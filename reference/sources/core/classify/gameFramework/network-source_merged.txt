

================================================================================
// FILE_PATH: ./gameFramework/j/b.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/b.class */
public class b {

    /* renamed from: a, reason: collision with root package name */
    int f579a;
    String b;
    String c;
    int d;
    long e;
    final /* synthetic */ a f;

    b(a aVar, int i, String str, String str2, c cVar) {
        this.f = aVar;
        this.f579a = i;
        this.b = str;
        this.c = str2;
        if (cVar != null) {
            this.d = cVar.c;
        }
        this.e = System.nanoTime();
    }

    public String a() {
        String str;
        if (this.b != null) {
            str = this.b + ": " + this.c;
        } else {
            str = this.c;
        }
        return str;
    }

    public String b() {
        String str = VariableScope.nullOrMissingString;
        if (this.b != null) {
            int i = -1;
            if (this.f579a != -1) {
                i = com.corrodinggames.rts.game.n.i(this.f579a);
            }
            str = "<strong> <font color='" + com.corrodinggames.rts.gameFramework.f.h(i) + "'>" + this.f.a(this.b) + ": </font></strong>";
        }
        boolean z = true;
        for (String str2 : this.c.split("\n")) {
            if (!str2.trim().equals(VariableScope.nullOrMissingString)) {
                if (z) {
                    z = false;
                } else {
                    str = str + "<br/>";
                }
                str = str + this.f.a(str2);
            }
        }
        return str;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ak.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.util.ArrayList;
import java.util.Iterator;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ak.class */
public class ak {

    /* renamed from: a, reason: collision with root package name */
    public long f565a;
    public ArrayList b = new ArrayList();
    public al c = new al(this, "Unit Pos");
    public al d = new al(this, "Unit Dir", false);
    public al e = new al(this, "Unit Hp");
    public al f = new al(this, "Unit Id");
    public al g = new al(this, "Waypoints");
    public al h = new al(this, "Waypoints Pos");
    public al i = new al(this, "Team Credits");
    public al j = new al(this, "UnitPaths");
    public al k = new al(this, "Unit Count");
    public al l = new al(this, "Team Info", false);
    public al m = new al(this, "Team 1 Credits", false);
    public al n = new al(this, "Team 2 Credits", false);
    public al o = new al(this, "Team 3 Credits", false);
    public al p = new al(this, "Command center2", false);
    public al q = new al(this, "Command center3", false);

    public void a() {
        Iterator it = this.b.iterator();
        while (it.hasNext()) {
            ((al) it.next()).b = 0L;
        }
    }

    public void b() {
        this.f565a = 0L;
        a();
        Iterator it = com.corrodinggames.rts.gameFramework.w.er.iterator();
        while (it.hasNext()) {
            com.corrodinggames.rts.gameFramework.w wVar = (com.corrodinggames.rts.gameFramework.w) it.next();
            if (wVar instanceof com.corrodinggames.rts.game.units.y) {
                com.corrodinggames.rts.game.units.y yVar = (com.corrodinggames.rts.game.units.y) wVar;
                this.f565a = (long) (this.f565a + (yVar.eo * 1000.0f));
                this.f565a = (long) (this.f565a + (yVar.ep * 1000.0f));
                this.f565a = (long) (this.f565a + (yVar.cu * 1.0f));
                this.f565a += yVar.eh;
                this.c.b += Float.floatToRawIntBits(yVar.eo);
                this.c.b += Float.floatToRawIntBits(yVar.ep);
                this.d.b += Float.floatToRawIntBits(yVar.cg);
                this.e.b = (long) (r0.b + yVar.cu);
                this.f.b += yVar.eh;
                if (wVar instanceof com.corrodinggames.rts.game.units.d.e) {
                    com.corrodinggames.rts.game.units.d.e eVar = (com.corrodinggames.rts.game.units.d.e) yVar;
                    this.p.b = (long) (r0.b + (eVar.f * 2.0f));
                    this.q.b += eVar.h;
                }
                com.corrodinggames.rts.game.units.au auVarAr = yVar.ar();
                if (auVarAr != null) {
                    this.g.b += auVarAr.j();
                    this.h.b = (long) (r0.b + (auVarAr.g() * 1000.0f));
                }
                this.j.b += yVar.aL();
            }
        }
        for (int i = 0; i < com.corrodinggames.rts.game.n.c; i++) {
            com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i);
            if (nVarK != null) {
                this.i.b += (int) nVarK.o;
                if (i == 0) {
                    this.m.b += (int) nVarK.o;
                }
                if (i == 1) {
                    this.n.b += (int) nVarK.o;
                }
                if (i == 2) {
                    this.o.b += (int) nVarK.o;
                }
                this.k.b += nVarK.w();
                this.l.b += i + (nVarK.x * 100) + (nVarK.r * 1000) + ((nVarK.w ? i : 0) * 10000);
            }
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/w.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/w.class */
public class w {

    /* renamed from: a, reason: collision with root package name */
    public String f600a;
    public String b;
    public x c;

    public void a(String str) {
        this.f600a = str;
    }

    public void a(String str, x xVar, Exception exc) {
        this.b = str;
        this.c = xVar;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ar.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ar.class */
public class ar {
    public static int a(int i) {
        return i + 5;
    }

    public static String a() {
        if (!com.corrodinggames.rts.gameFramework.l.at()) {
            return null;
        }
        return ((com.corrodinggames.rts.game.i) com.corrodinggames.rts.gameFramework.l.B()).o();
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/n.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import com.corrodinggames.rts.gameFramework.br;
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorCompletionService;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.message.BasicNameValuePair;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/n.class */
public class n {
    static int e;
    public static String g;

    /* renamed from: a, reason: collision with root package name */
    public static boolean f591a = true;
    public static boolean b = true;
    public static String[] c = {"http://gs1.corrodinggames.com/masterserver/1.4", "http://gs4.corrodinggames.net/masterserver/1.4"};
    public static r d = new r();
    public static Object f = new Object();

    public static void a(String str) {
        if (b) {
            com.corrodinggames.rts.gameFramework.l.e(str);
        }
    }

    static void a(List list, boolean z, s sVar) {
        a(list, z, sVar, c);
    }

    static void a(List list, boolean z, s sVar, String[] strArr) {
        sVar.f = strArr.length;
        int i = 0;
        for (String str : strArr) {
            i++;
            new Thread(new u(list, sVar, str, z, i)).start();
            if (f591a) {
                com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", i + ": Started RequestsParallelRunnable thread");
            }
        }
    }

    public static String a(List list, String str) {
        if (list != null) {
            Iterator it = list.iterator();
            while (it.hasNext()) {
                NameValuePair nameValuePair = (NameValuePair) it.next();
                if (str.equals(nameValuePair.getName())) {
                    return nameValuePair.getValue();
                }
            }
            return null;
        }
        return null;
    }

    public static BufferedReader a(List list) {
        return a(list, true, c, 10, true);
    }

    public static BufferedReader a(List list, int i) {
        return a(list, true, c, i, true);
    }

    public static BufferedReader a(final List list, final boolean z, String[] strArr, int i, final boolean z2) {
        Future futurePoll;
        String strA = a(list, "action");
        ExecutorService executorServiceNewFixedThreadPool = Executors.newFixedThreadPool(strArr.length);
        try {
            ExecutorCompletionService executorCompletionService = new ExecutorCompletionService(executorServiceNewFixedThreadPool);
            ArrayList arrayList = new ArrayList();
            for (final String str : strArr) {
                arrayList.add(executorCompletionService.submit(new Callable() { // from class: com.corrodinggames.rts.gameFramework.j.n.1
                    @Override // java.util.concurrent.Callable
                    /* renamed from: a, reason: merged with bridge method [inline-methods] */
                    public t call() {
                        try {
                            n.a("Running doSingleRequest:" + str);
                            return n.a(list, str, z);
                        } catch (Exception e2) {
                            com.corrodinggames.rts.gameFramework.l.e("Error on doSingleRequest:" + str + " - " + e2.getMessage());
                            if (z2) {
                                e2.printStackTrace();
                                return null;
                            }
                            return null;
                        }
                    }
                }));
            }
            int length = strArr.length;
            t tVar = null;
            t tVar2 = null;
            t tVar3 = null;
            int i2 = 0;
            while (true) {
                if (i2 >= length) {
                    break;
                }
                try {
                    futurePoll = executorCompletionService.poll(10L, TimeUnit.SECONDS);
                } catch (InterruptedException e2) {
                } catch (ExecutionException e3) {
                    e3.printStackTrace();
                    if (e3.getCause() != null) {
                        e3.getCause().printStackTrace();
                    }
                }
                if (futurePoll == null) {
                    com.corrodinggames.rts.gameFramework.l.b("MULTI_MASTERSERVERS: poll timed out (" + strA + ")");
                    break;
                }
                t tVar4 = (t) futurePoll.get();
                if (tVar4 != null) {
                    tVar = tVar4;
                    if (tVar4.b) {
                        if (tVar4.c) {
                            tVar3 = tVar4;
                        } else {
                            tVar2 = tVar4;
                            break;
                        }
                    }
                }
                i2++;
            }
            if (tVar2 == null && tVar3 != null) {
                com.corrodinggames.rts.gameFramework.l.b("All masterserver results included an error message (" + strA + ")");
                tVar2 = tVar3;
            }
            if (tVar2 == null) {
                com.corrodinggames.rts.gameFramework.l.b("No valid result found on any masterserver (" + strA + ")");
                tVar2 = tVar;
            }
            if (tVar2 != null) {
                BufferedReader bufferedReader = tVar2.f597a;
                executorServiceNewFixedThreadPool.shutdown();
                return bufferedReader;
            }
            throw new IOException("No results found (" + strA + ")");
        } catch (Throwable th) {
            executorServiceNewFixedThreadPool.shutdown();
            throw th;
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    public static t a(List list, String str, boolean z) throws IllegalStateException, IOException {
        HttpGet httpGet;
        String str2;
        HttpResponse httpResponseExecute;
        String strA = a(list, "action");
        long jA = br.a();
        String str3 = str + "/interface";
        if (z) {
            HttpPost httpPost = new HttpPost(str3);
            httpPost.setEntity(new UrlEncodedFormEntity(list));
            httpGet = httpPost;
        } else {
            str3 = str3 + "?" + URLEncodedUtils.format(list, "utf-8");
            httpGet = new HttpGet(str3);
        }
        if (com.corrodinggames.rts.gameFramework.l.ax()) {
            str2 = "rw server";
        } else {
            str2 = "rw " + (com.corrodinggames.rts.gameFramework.l.av() ? "pc" : "android");
        }
        String strC = com.corrodinggames.rts.gameFramework.h.a.c();
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (lVarB != null) {
            str2 = str2 + " " + lVarB.c(true) + " " + strC;
        }
        httpGet.setHeader("User-Agent", str2);
        httpGet.setHeader("Language", strC);
        HttpClient httpClientA = d.a();
        try {
            httpResponseExecute = httpClientA.execute(httpGet);
        } catch (NullPointerException e2) {
            com.corrodinggames.rts.gameFramework.l.b("doRequest: httpclient.execute threw NullPointerException, running workaround");
            httpClientA = d.b();
            httpResponseExecute = httpClientA.execute(httpGet);
        }
        float fA = br.a(jA);
        HttpEntity entity = httpResponseExecute.getEntity();
        InputStream content = entity.getContent();
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        byte[] bArr = new byte[16384];
        while (true) {
            int i = content.read(bArr, 0, bArr.length);
            if (i == -1) {
                break;
            }
            byteArrayOutputStream.write(bArr, 0, i);
        }
        byteArrayOutputStream.flush();
        content.close();
        entity.consumeContent();
        byte[] byteArray = byteArrayOutputStream.toByteArray();
        t tVar = new t();
        String strA2 = a(byteArray);
        tVar.b = strA2.startsWith("CORRODINGGAMES");
        tVar.c = strA2.contains("[FAILED]");
        if (!tVar.b || tVar.c) {
            String str4 = str3 + (strA != null ? "?action=" + strA : VariableScope.nullOrMissingString) + " (" + fA + "ms)";
            if (!"list".equals(strA)) {
                str4 = str4 + ":\n" + new String(byteArray);
            }
            com.corrodinggames.rts.gameFramework.l.e(str4);
        }
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(new ByteArrayInputStream(byteArray)));
        d.a(httpClientA);
        tVar.f597a = bufferedReader;
        return tVar;
    }

    public static String a(byte[] bArr) {
        int length = bArr.length;
        for (int i = 0; i < bArr.length; i++) {
            if (bArr[i] == 10 || bArr[i] == 13) {
                length = i;
                break;
            }
        }
        return new String(bArr, 0, length);
    }

    public static g b(String str) throws IOException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (str == null) {
            throw new IOException("findOrCreateServer id cannot be null");
        }
        Iterator it = lVarB.bX.bi.iterator();
        while (it.hasNext()) {
            g gVar = (g) it.next();
            if (str.equals(gVar.b)) {
                return gVar;
            }
        }
        return null;
    }

    public static g c(String str) throws IOException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (str == null) {
            throw new IOException("findOrCreateServer id cannot be null");
        }
        g gVarB = b(str);
        if (gVarB != null) {
            return gVarB;
        }
        g gVar = new g();
        gVar.b = str;
        gVar.f584a = false;
        gVar.o = lVarB.bX.p();
        return gVar;
    }

    public static void a(Runnable runnable) {
        com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", "Load requested");
        new Thread(new q(runnable)).start();
    }

    static void a(int i, int i2) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        boolean z = false;
        synchronized (f) {
            Iterator it = lVarB.bX.bi.iterator();
            while (it.hasNext()) {
                g gVar = (g) it.next();
                if (gVar.p < i) {
                    com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", i2 + ": Removing stale server with id:" + gVar.b);
                    it.remove();
                    z = true;
                }
            }
        }
        if (z) {
            com.corrodinggames.rts.appFramework.p.l();
        }
    }

    public static void a() {
        com.corrodinggames.rts.gameFramework.l.b("GetOwnInfoRunnable", "getOwnInfoFromMasterServer");
        aq.e = 6;
        new Thread(new p()).start();
    }

    static void a(List list, String str, String str2) {
        list.add(new BasicNameValuePair(str, str2));
    }

    static void b(List list) {
        String str;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        a(list, "password_required", com.corrodinggames.rts.gameFramework.f.a(lVarB.bX.n != null));
        a(list, "created_by", lVarB.bX.y);
        a(list, "private_ip", lVarB.bX.ah());
        a(list, "port_number", Integer.toString(lVarB.bX.m));
        if (lVarB.bX.u != null) {
            a(list, "game_map", com.corrodinggames.rts.gameFramework.e.a.o(lVarB.bX.u));
        } else {
            a(list, "game_map", com.corrodinggames.rts.gameFramework.e.a.o(lVarB.bX.ay.b));
        }
        ai aiVar = lVarB.bX.ay.f562a;
        if (aiVar == null) {
            aiVar = ai.skirmishMap;
        }
        a(list, "game_mode", aiVar.name());
        if (!lVarB.bX.v) {
            if (lVarB.bX.aW) {
                str = "ingame";
            } else if (lVarB.bX.ay.p) {
                str = "locked";
            } else {
                str = "battleroom";
            }
            a(list, "game_status", str);
        } else {
            a(list, "game_status", "chat");
        }
        a(list, "player_count", Integer.toString(lVarB.bX.E()));
        String string = Integer.toString(com.corrodinggames.rts.game.n.c);
        if (lVarB.bX.v) {
        }
        a(list, "max_player_count", string);
    }

    public static void b() {
        com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "Create requested");
        aq.b = 5;
        new Thread(new y()).start();
    }

    public static void c() {
        new Thread(new aa()).start();
    }

    public static void d() {
        com.corrodinggames.rts.gameFramework.l.b("startRemoveOnMasterServer", "Remove requested");
        new Thread(new z()).start();
    }

    public static void a(String str, String str2) {
        com.corrodinggames.rts.gameFramework.l.b("startErrorReport", "ErrorReport requested");
        v vVar = new v();
        vVar.b = str2;
        vVar.f599a = str;
        new Thread(vVar).start();
    }

    public static String a(int i) {
        if (i == 0) {
            return VariableScope.nullOrMissingString;
        }
        if (i > 0) {
            if (i < 100000) {
                return com.corrodinggames.rts.gameFramework.f.a(com.corrodinggames.rts.gameFramework.f.b("x" + i), 10);
            }
            if (i < 200000) {
                return com.corrodinggames.rts.gameFramework.f.a(com.corrodinggames.rts.gameFramework.f.b("y" + i), 11);
            }
            if (i < 300000) {
                return com.corrodinggames.rts.gameFramework.f.a(com.corrodinggames.rts.gameFramework.f.b("z" + i), 12);
            }
            if (i < 1000000) {
                return com.corrodinggames.rts.gameFramework.f.a(com.corrodinggames.rts.gameFramework.f.b("xx" + i), 13) + "-" + com.corrodinggames.rts.gameFramework.l.B().bX.g(i - 300000);
            }
            if (i < 2000000) {
                return com.corrodinggames.rts.gameFramework.f.a(com.corrodinggames.rts.gameFramework.f.b("yy" + i), 14) + "-" + com.corrodinggames.rts.gameFramework.l.B().bX.g(i - 1000000);
            }
            return "NA";
        }
        return "NA";
    }

    public static void a(w wVar, String str, int i, String str2) {
        com.corrodinggames.rts.gameFramework.l.e("getGameServerInfoFromMasterServer");
        ab abVar = new ab();
        abVar.f550a = wVar;
        abVar.b = str;
        abVar.c = i;
        abVar.d = str2;
        new Thread(abVar).start();
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ag.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ag.class */
public class ag extends Exception {
}


================================================================================
// FILE_PATH: ./gameFramework/j/z.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedReader;
import java.io.IOException;
import java.util.ArrayList;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/z.class */
class z implements Runnable {
    z() {
    }

    @Override // java.lang.Runnable
    public void run() throws IOException {
        com.corrodinggames.rts.gameFramework.l.aq();
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.b("startRemoveOnMasterServer", "Starting remove");
        try {
            ArrayList arrayList = new ArrayList(2);
            n.a(arrayList, "action", "remove");
            String str = lVarB.bX.aS;
            if (str == null) {
                com.corrodinggames.rts.gameFramework.l.b("startRemoveOnMasterServer", "No game id");
                return;
            }
            n.a(arrayList, "id", str);
            n.a(arrayList, "private_token", lVarB.bX.aR);
            BufferedReader bufferedReaderA = n.a(arrayList);
            String line = bufferedReaderA.readLine();
            if (line == null || !line.contains("CORRODINGGAMES")) {
                com.corrodinggames.rts.gameFramework.l.b("startRemoveOnMasterServer", "Error bad header returned from the master server: " + line);
                return;
            }
            com.corrodinggames.rts.gameFramework.l.b("startRemoveOnMasterServer", "Remove server response was:" + bufferedReaderA.readLine());
            com.corrodinggames.rts.gameFramework.l.b("startRemoveOnMasterServer", "Completed load from master server without error");
        } catch (IOException e) {
            com.corrodinggames.rts.gameFramework.l.b("startRemoveOnMasterServer", "Remove failed");
            e.printStackTrace();
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/af.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.SocketAddress;
import java.net.SocketException;
import java.util.Timer;
import java.util.TimerTask;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/af.class */
final class af implements Runnable {

    /* renamed from: a, reason: collision with root package name */
    boolean f560a;
    DatagramSocket b;
    Timer c;
    final /* synthetic */ ad d;

    @Override // java.lang.Runnable
    public void run() throws IOException {
        try {
            this.d.d("starting socket for broadcast..");
            this.b = new DatagramSocket((SocketAddress) null);
            this.b.setReuseAddress(true);
            this.b.bind(new InetSocketAddress(this.d.t));
            this.d.d("reading..");
            byte[] bArr = new byte[1500];
            DatagramPacket datagramPacket = new DatagramPacket(bArr, bArr.length);
            TimerTask timerTask = new TimerTask() { // from class: com.corrodinggames.rts.gameFramework.j.af.1
                @Override // java.util.TimerTask, java.lang.Runnable
                public void run() throws IOException {
                    if (!af.this.d.C) {
                        af.this.a();
                    }
                }
            };
            this.c = new Timer();
            this.c.scheduleAtFixedRate(timerTask, 20L, 5000L);
            while (this.f560a) {
                this.b.receive(datagramPacket);
                String str = new String(datagramPacket.getData(), datagramPacket.getOffset(), datagramPacket.getLength());
                this.d.d("accepted udp socket..");
                k kVar = new k(str);
                if (!kVar.l().equals("com.corrodinggames.rts")) {
                    this.d.d("ignoring udp packet: MAGIC_GAME_ID doesn't match");
                } else {
                    int iF = kVar.f();
                    kVar.f();
                    String strL = kVar.l();
                    if (strL.equals("ping")) {
                        this.d.d("got ping");
                        if (this.d.C) {
                            as asVar = new as();
                            asVar.c("com.corrodinggames.rts");
                            asVar.a(this.d.e);
                            asVar.a(0);
                            asVar.c("pong");
                            asVar.a(this.d.m);
                            String strC = asVar.c();
                            this.b.send(new DatagramPacket(strC.getBytes(), strC.length(), datagramPacket.getAddress(), this.d.t));
                        } else {
                            this.d.d("not server");
                        }
                    } else if (!strL.equals("pong")) {
                        this.d.d("got pong");
                        g gVar = new g();
                        gVar.f584a = true;
                        gVar.g = kVar.f();
                        gVar.c = datagramPacket.getAddress().toString();
                        gVar.j = VariableScope.nullOrMissingString + iF;
                        this.d.a(gVar);
                    } else {
                        this.d.d("ignoring udp packet: unknown mode:" + strL);
                    }
                }
            }
        } catch (SocketException e) {
            if (this.f560a) {
                throw new RuntimeException(e);
            }
            e.printStackTrace();
        } catch (IOException e2) {
            throw new RuntimeException(e2);
        }
    }

    public void a() throws IOException {
        this.d.d("sending ping");
        if (this.b == null) {
            this.d.d("failed to send a broadcast ping: datagramSocket is null");
            return;
        }
        InetAddress inetAddressAl = this.d.al();
        if (inetAddressAl == null) {
            this.d.d("failed to send a broadcast ping: could not get a broadcast address");
            return;
        }
        try {
            as asVar = new as();
            asVar.c("com.corrodinggames.rts");
            asVar.a(this.d.e);
            asVar.a(0);
            asVar.c("ping");
            String strC = asVar.c();
            this.d.d("sending ping on :" + inetAddressAl.toString());
            this.b.send(new DatagramPacket(strC.getBytes(), strC.length(), inetAddressAl, this.d.t));
        } catch (IOException e) {
            e.printStackTrace();
            this.d.d("failed to send a broadcast ping, IOException");
        }
    }

    public void b() {
        this.f560a = false;
        if (this.b != null) {
            this.b.close();
        }
        if (this.c != null) {
            this.c.cancel();
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/o.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.util.TimerTask;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/o.class */
class o extends TimerTask {

    /* renamed from: a, reason: collision with root package name */
    int f593a;

    o(int i) {
        this.f593a = i;
    }

    @Override // java.util.TimerTask, java.lang.Runnable
    public void run() {
        n.a(this.f593a, -1);
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/as.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import android.graphics.PointF;
import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.io.ByteArrayOutputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.ListIterator;
import java.util.zip.DataFormatException;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/as.class */
public class as {
    ByteArrayOutputStream b;
    DataOutputStream c;

    /* renamed from: a, reason: collision with root package name */
    private DataOutputStream f573a;
    private LinkedList e;
    public int d;

    public void a() throws IOException {
        ListIterator listIterator = this.e.listIterator(this.e.size());
        while (listIterator.hasPrevious()) {
            ((at) listIterator.previous()).a();
        }
        this.c.flush();
        if (this.b != null) {
            this.b.flush();
        }
    }

    void b() {
        this.f573a = this.c;
    }

    public as(int i) {
        this();
        this.d = i;
    }

    public as() {
        this.e = new LinkedList();
        this.d = 999999;
        this.b = new ByteArrayOutputStream();
        this.c = new DataOutputStream(this.b);
        b();
    }

    public as(DataOutputStream dataOutputStream) {
        this.e = new LinkedList();
        this.d = 999999;
        this.c = dataOutputStream;
        b();
    }

    public au b(int i) {
        return a(i, -1);
    }

    public au a(int i, int i2) {
        try {
            a();
            au auVar = new au(i);
            auVar.c = this.b.toByteArray();
            auVar.d = i2;
            return auVar;
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public String c() {
        try {
            a();
            return this.b.toString();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public byte[] d() {
        try {
            a();
            return this.b.toByteArray();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public void c(int i) throws IOException {
        this.f573a.writeByte(i);
    }

    public void a(boolean z) throws IOException {
        this.f573a.writeBoolean(z);
    }

    public void a(int i) throws IOException {
        this.f573a.writeInt(i);
    }

    public void a(float f) throws IOException {
        this.f573a.writeFloat(f);
    }

    public void a(double d) throws IOException {
        this.f573a.writeDouble(d);
    }

    public void a(long j) throws IOException {
        this.f573a.writeLong(j);
    }

    public void b(String str) {
        a(str != null);
        if (str != null) {
            c(str);
        }
    }

    public void a(Integer num) throws IOException {
        a(num != null);
        if (num != null) {
            a(num.intValue());
        }
    }

    public void c(String str) {
        this.f573a.writeUTF(str);
    }

    public void a(com.corrodinggames.rts.game.units.custom.g gVar) throws IOException {
        if (gVar == null) {
            this.f573a.writeUTF(VariableScope.nullOrMissingString);
        }
        this.f573a.writeUTF(gVar.toString());
    }

    public void a(com.corrodinggames.rts.gameFramework.w wVar) throws IOException {
        if (wVar == null) {
            this.f573a.writeLong(-1L);
        } else {
            this.f573a.writeLong(wVar.eh);
        }
    }

    public void b(com.corrodinggames.rts.gameFramework.w wVar) throws IOException {
        if (wVar != null && !wVar.ej) {
            this.f573a.writeLong(wVar.eh);
        } else {
            this.f573a.writeLong(-1L);
        }
    }

    public void a(com.corrodinggames.rts.gameFramework.utility.m mVar) throws IOException {
        if (mVar == null) {
            a(0);
            return;
        }
        a(mVar.size());
        Iterator it = mVar.iterator();
        while (it.hasNext()) {
            b((com.corrodinggames.rts.gameFramework.w) it.next());
        }
    }

    public void b(com.corrodinggames.rts.game.units.am amVar) throws IOException {
        if (amVar != null && !amVar.ej && !amVar.bV) {
            a((com.corrodinggames.rts.gameFramework.w) amVar);
        } else {
            a((com.corrodinggames.rts.gameFramework.w) null);
        }
    }

    public void a(com.corrodinggames.rts.game.units.am amVar) throws IOException {
        if (amVar != null && !amVar.ej) {
            a((com.corrodinggames.rts.gameFramework.w) amVar);
        } else {
            a((com.corrodinggames.rts.gameFramework.w) null);
        }
    }

    public void a(com.corrodinggames.rts.game.units.y yVar) throws IOException {
        if (yVar != null && !yVar.ej) {
            a((com.corrodinggames.rts.gameFramework.w) yVar);
        } else {
            a((com.corrodinggames.rts.gameFramework.w) null);
        }
    }

    public void a(PointF pointF) throws IOException {
        a(pointF != null);
        if (pointF != null) {
            a(pointF.f45a);
            a(pointF.b);
        }
    }

    public void a(Enum r4) throws IOException {
        if (r4 == null) {
            this.f573a.writeInt(-1);
        } else {
            this.f573a.writeInt(r4.ordinal());
        }
    }

    public void a(com.corrodinggames.rts.game.units.as asVar) throws IOException {
        if (asVar == null) {
            this.f573a.writeInt(-1);
        } else if (asVar instanceof com.corrodinggames.rts.game.units.custom.l) {
            this.f573a.writeInt(-2);
            c(((com.corrodinggames.rts.game.units.custom.l) asVar).M);
        } else {
            this.f573a.writeInt(((com.corrodinggames.rts.game.units.ar) asVar).ordinal());
        }
    }

    public void a(c cVar) throws IOException {
        if (cVar == null) {
            this.f573a.writeInt(0);
        } else {
            this.f573a.writeInt(cVar.c);
        }
    }

    public void a(com.corrodinggames.rts.game.n nVar) throws IOException {
        this.f573a.writeByte(nVar.k);
    }

    public void a(File file) throws IOException {
        com.corrodinggames.rts.gameFramework.utility.j jVarA = com.corrodinggames.rts.gameFramework.e.a.a(file);
        if (jVarA == null) {
            throw new IOException("Failed to read save file data");
        }
        try {
            a(jVarA, (int) file.length());
            if (jVarA != null) {
                jVarA.close();
            }
        } catch (Throwable th) {
            if (jVarA != null) {
                jVarA.close();
            }
            throw th;
        }
    }

    public void a(k kVar) throws IOException {
        InputStream inputStreamW = kVar.w();
        try {
            inputStreamW.reset();
        } catch (IOException e) {
            e.printStackTrace();
        }
        a(inputStreamW, inputStreamW.available());
    }

    public void a(InputStream inputStream, int i) throws IOException {
        int i2 = 0;
        a(i);
        byte[] bArr = new byte[16384];
        while (true) {
            int i3 = inputStream.read(bArr, 0, bArr.length);
            if (i3 != -1) {
                if (i2 + i3 > i) {
                    int i4 = i - i2;
                    if (i4 < 0) {
                        ad.g("writeStream: bytesTillFull is " + i4);
                        return;
                    } else {
                        this.f573a.write(bArr, 0, i4);
                        return;
                    }
                }
                this.f573a.write(bArr, 0, i3);
                i2 += i3;
            } else {
                return;
            }
        }
    }

    public void a(ByteArrayOutputStream byteArrayOutputStream) throws IOException {
        a(byteArrayOutputStream.size());
        byteArrayOutputStream.writeTo(this.f573a);
    }

    public void a(byte[] bArr) throws IOException {
        a(bArr.length);
        this.f573a.write(bArr);
    }

    public void b(byte[] bArr) {
        this.f573a.write(bArr);
    }

    public void a(short s) throws IOException {
        this.f573a.writeShort(s);
    }

    public void e() throws IOException {
        a((short) 12345);
    }

    public void d(String str) {
    }

    public boolean f() {
        return false;
    }

    public void e(String str) {
        a(str, false);
    }

    public void a(String str, boolean z) {
        at atVar = new at(z);
        atVar.c = str;
        this.e.add(atVar);
        this.f573a = ((at) this.e.getLast()).e;
    }

    public void a(String str) throws IOException {
        at atVar = (at) this.e.removeLast();
        if (!atVar.c.equals(str)) {
            com.corrodinggames.rts.gameFramework.l.b("OutputNetStream:endBlock", "Name does not match: expected" + str + " , got:" + atVar.c);
        }
        atVar.a();
        if (this.e.isEmpty()) {
            this.f573a = this.c;
        } else {
            this.f573a = ((at) this.e.getLast()).e;
        }
        this.f573a.writeUTF(atVar.c);
        a(atVar.d);
        try {
            atVar.b();
        } catch (Exception e) {
            if (e instanceof DataFormatException) {
                if (!com.corrodinggames.rts.gameFramework.l.aZ) {
                    com.corrodinggames.rts.gameFramework.l.b("DataFormatException error calling streamBlock.close() (this is expected on android 4.4)");
                }
            } else {
                com.corrodinggames.rts.gameFramework.l.b("Error calling streamBlock.close() to clean up memory");
                e.printStackTrace();
            }
        }
    }

    public int g() {
        return this.d;
    }

    public void h() throws IOException {
        this.c = null;
        this.f573a = null;
        try {
            if (this.b != null) {
                this.b.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        this.b = null;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/v.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import android.os.Build;
import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.io.IOException;
import java.util.ArrayList;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/v.class */
class v implements Runnable {

    /* renamed from: a, reason: collision with root package name */
    String f599a;
    String b;

    v() {
    }

    @Override // java.lang.Runnable
    public void run() {
        long jV = com.corrodinggames.rts.gameFramework.l.V();
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.b("SendErrorReport", "Starting");
        try {
            try {
                try {
                    ArrayList arrayList = new ArrayList(2);
                    n.a(arrayList, "action", "error_report");
                    n.a(arrayList, "game_version", Integer.toString(lVarB.c(false)));
                    n.a(arrayList, "game_version_internal", Integer.toString(lVarB.c(true)));
                    n.a(arrayList, "game_version_string", lVarB.r());
                    n.a(arrayList, "package_name", lVarB.l());
                    n.a(arrayList, "installation_source", lVarB.m());
                    String str = VariableScope.nullOrMissingString + Build.VERSION.SDK_INT;
                    if (com.corrodinggames.rts.gameFramework.l.av()) {
                        str = "s:0;";
                        if (com.corrodinggames.rts.gameFramework.o.a.a().e()) {
                            str = "s:1;";
                        }
                    }
                    if (com.corrodinggames.rts.gameFramework.l.av() || com.corrodinggames.rts.gameFramework.l.aZ) {
                        n.a(arrayList, "system_version", System.getProperty("os.name") + " - " + System.getProperty("os.version"));
                    }
                    n.a(arrayList, "sdk_version", str);
                    n.a(arrayList, "device_model", lVarB.G());
                    n.a(arrayList, "build_version", lVarB.H());
                    n.a(arrayList, "release_version", com.corrodinggames.rts.gameFramework.f.a(com.corrodinggames.rts.gameFramework.l.as));
                    n.a(arrayList, "dedicated_server", com.corrodinggames.rts.gameFramework.f.a(com.corrodinggames.rts.gameFramework.l.aU));
                    String str2 = lVarB.bX != null ? lVarB.bX.aR : "NA";
                    n.a(arrayList, "private_token", str2);
                    n.a(arrayList, "private_token_2", com.corrodinggames.rts.gameFramework.f.b(com.corrodinggames.rts.gameFramework.f.b(str2)));
                    n.a(arrayList, "message", this.f599a);
                    n.a(arrayList, "stacktrace", this.b);
                    com.corrodinggames.rts.gameFramework.l.b("SendErrorReport", "making request");
                    String line = n.a(arrayList).readLine();
                    if (line == null || !line.contains("CORRODINGGAMES")) {
                        com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "Error bad header returned from the master server: " + line);
                        com.corrodinggames.rts.gameFramework.l.b("SendErrorReport", "took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
                    } else {
                        com.corrodinggames.rts.gameFramework.l.b("SendErrorReport", "Send trace successfully");
                        com.corrodinggames.rts.gameFramework.l.b("SendErrorReport", "took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                    com.corrodinggames.rts.gameFramework.l.b("SendErrorReport", "took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
                }
            } catch (IOException e2) {
                e2.printStackTrace();
                com.corrodinggames.rts.gameFramework.l.b("SendErrorReport", "took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
            }
        } catch (Throwable th) {
            com.corrodinggames.rts.gameFramework.l.b("SendErrorReport", "took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
            throw th;
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/aj.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/aj.class */
public class aj {

    /* renamed from: a, reason: collision with root package name */
    String f564a;
    long b;
    String c;

    public String a() {
        return this.c != null ? this.c : "Active ban";
    }

    public float b() {
        return (this.b - System.currentTimeMillis()) / 1000.0f;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/c.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.io.IOException;
import java.net.InetAddress;
import java.net.Socket;
import java.util.concurrent.ConcurrentLinkedQueue;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/c.class */
public class c {
    private final ad W;
    public int c;
    public Socket d;
    InetAddress e;
    public long g;
    public boolean h;
    public boolean i;
    public c j;
    au l;
    public String m;
    public String n;
    public String o;
    public boolean p;
    public boolean q;
    public boolean r;
    public boolean s;
    public boolean t;
    public boolean u;
    public boolean v;
    public boolean w;
    public int x;
    public int y;
    public com.corrodinggames.rts.game.e z;
    d F;
    e G;
    Thread H;
    Thread I;
    public String L;
    public int M;
    public boolean N;
    public boolean O;
    public int P;
    public boolean Q;
    public int R;
    public long S;
    public boolean T;
    volatile int U;
    volatile int V;

    /* renamed from: a, reason: collision with root package name */
    volatile boolean f580a = false;
    volatile boolean b = false;
    ConcurrentLinkedQueue f = new ConcurrentLinkedQueue();
    public int k = -1;
    int A = -1;
    long B = -1;
    boolean C = false;
    boolean D = false;
    public int E = 999999;
    boolean J = false;
    boolean K = false;

    public c(ad adVar, Socket socket) {
        this.W = adVar;
        this.d = socket;
        synchronized (this.W.aQ) {
            this.c = this.W.aP;
            this.W.aP++;
        }
        this.M = com.corrodinggames.rts.gameFramework.f.a(1, 1000000);
    }

    public boolean a() {
        if (this.S < System.currentTimeMillis() - 10000) {
            this.S = System.currentTimeMillis();
            this.R = 0;
        }
        if (this.R > 100) {
            if (!this.T) {
                this.T = true;
                c("Command limit was reached");
                return true;
            }
            return true;
        }
        this.R++;
        return false;
    }

    public int b() {
        if (this.B == -1) {
            return -2;
        }
        if (this.B < System.currentTimeMillis() - 5000) {
            return -1;
        }
        return this.A;
    }

    int c() {
        com.corrodinggames.rts.game.e eVar = this.z;
        if (eVar != null) {
            return eVar.k;
        }
        return -1;
    }

    public synchronized void d() {
        this.G = new e(this);
        this.I = new Thread(this.G);
        this.I.setDaemon(true);
        this.I.start();
        this.F = new d(this);
        this.H = new Thread(this.F);
        this.H.setDaemon(true);
        this.H.start();
    }

    private void i() {
        com.corrodinggames.rts.game.e eVar;
        this.f580a = true;
        if (this.W.C && !this.W.n() && (eVar = this.z) != null) {
            this.z = null;
            if (this.W.d(eVar) == null) {
                eVar.I();
                this.W.P();
                com.corrodinggames.rts.appFramework.n.o();
            }
        }
        if (this.H != null) {
            this.H.interrupt();
        }
        this.W.b(this);
        this.p = false;
        if (this.q) {
            this.W.c(this, "Closing");
        }
    }

    private synchronized void j() {
        if (this.f580a) {
            return;
        }
        this.b = true;
        if (this.G != null) {
            this.G.a();
        }
        if (this.H != null) {
            this.H.interrupt();
        }
        this.W.b(this);
    }

    public void a(String str) {
        as asVar = new as();
        if (str == null) {
            str = "NULL";
        }
        try {
            asVar.c(str);
            a(asVar.b(111));
            j();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public synchronized void a(boolean z, boolean z2) throws IOException {
        a(z, z2, "Time out");
    }

    public String e() {
        String str = "<null>";
        if (this.z != null) {
            str = this.z.v;
        }
        return str;
    }

    public String f() {
        InetAddress inetAddress;
        if (this.j != null) {
            return this.n;
        }
        try {
            Socket socket = this.d;
            if (socket != null && (inetAddress = socket.getInetAddress()) != null) {
                return inetAddress.getHostAddress();
            }
            return null;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

    public String g() {
        if (this.j != null) {
            return this.n == null ? "<forwarded unknown>" : this.n;
        }
        String hostAddress = "<no socket>";
        try {
            Socket socket = this.d;
            if (socket != null) {
                hostAddress = "<no bond socket>";
                InetAddress inetAddress = socket.getInetAddress();
                if (inetAddress != null) {
                    hostAddress = inetAddress.getHostAddress();
                }
            }
            return hostAddress;
        } catch (Exception e) {
            e.printStackTrace();
            return "<socket error>";
        }
    }

    public synchronized void a(boolean z, boolean z2, String str) throws IOException {
        if (!this.f580a) {
            c("handleRemoteDisconnect");
            String str2 = null;
            if (this.z != null) {
                str2 = this.z.v;
            }
            String str3 = null;
            if (this.z != null) {
                String str4 = "player";
                String str5 = VariableScope.nullOrMissingString;
                if (this.z.b()) {
                    str4 = "spectator";
                } else if (this.W.aW) {
                    str5 = this.z.a(false, false) == 0 ? " (Had no units)" : " (Team " + this.z.h() + ")";
                }
                str3 = str4 + " '" + this.z.v + "' disconnected" + str5;
            } else if (this.p) {
                if (this.s && this.q) {
                    str3 = "relay server disconnected";
                } else {
                    str3 = "a player disconnected";
                }
            }
            if (!this.W.C) {
                str3 = "The server disconnected";
            }
            if (str3 != null && str != null) {
                str3 = str3 + "  (" + ad.i(str) + ")";
            }
            i();
            if (str3 != null) {
                boolean z3 = false;
                if (this.z != null && this.W.C && this.W.d(this.z) != null) {
                    z3 = true;
                }
                if (!z3) {
                    if (!this.W.C) {
                        this.W.f(str3);
                    } else {
                        this.W.j(str3);
                    }
                } else {
                    c("Not sending: '" + str3 + "' still another active connection");
                }
            }
            this.W.d.b(this, str2);
        } else {
            c("handleRemoteDisconnect: connection is already disconnecting");
        }
        if (!z2 && this.G != null) {
            this.G.a();
        }
        if (z2) {
            this.J = true;
        }
        if (z) {
            this.K = true;
        }
        if (this.J && this.K) {
            try {
                this.d.close();
            } catch (IOException e) {
                com.corrodinggames.rts.gameFramework.l.a("Error while closing network socket", (Throwable) e);
            }
            this.I = null;
            this.H = null;
            this.G = null;
            this.F = null;
            if (this.f != null) {
                this.f.clear();
            }
        }
    }

    public void a(String str, Throwable th) {
        com.corrodinggames.rts.gameFramework.l.a(d(str), th);
    }

    public void b(String str) {
        com.corrodinggames.rts.gameFramework.l.b(d(str));
    }

    public void c(String str) {
        com.corrodinggames.rts.gameFramework.l.e(d(str));
    }

    public String d(String str) {
        String str2 = "id:" + this.c + ": " + str;
        com.corrodinggames.rts.game.e eVar = this.z;
        if (eVar != null) {
            str2 = str2 + " (Player:" + eVar.v + ")";
        }
        return str2;
    }

    public void a(au auVar) {
        if (this.G == null && this.f580a) {
            return;
        }
        this.G.a(auVar);
    }

    public boolean h() {
        return !this.f580a;
    }

    public void finalize() throws IOException {
        try {
            if (this.d == null || this.d.isClosed()) {
                return;
            }
            com.corrodinggames.rts.gameFramework.l.e("Connection::finalize called on unclosed socket (index:" + this.c + ")");
            if (this.d.getInetAddress() == null) {
                com.corrodinggames.rts.gameFramework.l.e("Skipping possible steam socket");
            }
            try {
                this.d.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } catch (RuntimeException e2) {
            e2.printStackTrace();
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/at.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.DataOutputStream;
import java.io.OutputStream;
import java.util.zip.GZIPOutputStream;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/at.class */
public class at {

    /* renamed from: a, reason: collision with root package name */
    public GZIPOutputStream f574a;
    public BufferedOutputStream b;
    public String c;
    public DataOutputStream e;
    public boolean f = false;
    public ByteArrayOutputStream d = new ByteArrayOutputStream();

    public void a() {
        this.e.flush();
        if (this.b != null) {
            this.b.flush();
        }
        if (this.f574a != null) {
            this.f574a.finish();
        }
    }

    public void b() {
        if (!this.f) {
            this.e.close();
        } else {
            com.corrodinggames.rts.gameFramework.l.g("TODO: Cannot yet close wrapped stream");
        }
    }

    public at(boolean z) {
        OutputStream outputStream;
        if (z) {
            this.f574a = new GZIPOutputStream(this.d);
            this.b = new BufferedOutputStream(this.f574a);
            outputStream = this.b;
        } else {
            outputStream = this.d;
        }
        this.e = new DataOutputStream(outputStream);
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/h.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.InputStream;
import java.io.OutputStream;
import java.net.InetAddress;
import java.net.Socket;
import java.net.SocketAddress;
import java.nio.channels.SocketChannel;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/h.class */
public class h extends Socket {

    /* renamed from: a, reason: collision with root package name */
    c f585a;
    int b;
    boolean c = false;
    i d = new i(this);
    j e = new j(this);

    public void a(au auVar) {
        this.f585a.a(new ay(this.b, auVar));
    }

    public h(c cVar, int i) {
        this.f585a = cVar;
        this.b = i;
    }

    @Override // java.net.Socket
    public void bind(SocketAddress socketAddress) {
        throw new RuntimeException("Not supported");
    }

    @Override // java.net.Socket, java.io.Closeable, java.lang.AutoCloseable
    public synchronized void close() {
        if (!this.c) {
            this.c = true;
            com.corrodinggames.rts.gameFramework.l.e("Closing steam socket");
        }
        if (this.d != null) {
            this.d.a(new byte[0]);
        }
    }

    @Override // java.net.Socket
    public void connect(SocketAddress socketAddress, int i) {
        throw new RuntimeException("Not supported");
    }

    @Override // java.net.Socket
    public void connect(SocketAddress socketAddress) {
        throw new RuntimeException("Not supported");
    }

    @Override // java.net.Socket
    public SocketChannel getChannel() {
        throw new RuntimeException("Not supported");
    }

    @Override // java.net.Socket
    public InetAddress getInetAddress() {
        return null;
    }

    @Override // java.net.Socket
    public InetAddress getLocalAddress() {
        return null;
    }

    @Override // java.net.Socket
    public SocketAddress getLocalSocketAddress() {
        return null;
    }

    @Override // java.net.Socket
    public SocketAddress getRemoteSocketAddress() {
        return null;
    }

    @Override // java.net.Socket
    public InputStream getInputStream() {
        return this.d;
    }

    @Override // java.net.Socket
    public boolean getKeepAlive() {
        return true;
    }

    @Override // java.net.Socket
    public int getLocalPort() {
        return 5555;
    }

    @Override // java.net.Socket
    public boolean getOOBInline() {
        return false;
    }

    @Override // java.net.Socket
    public OutputStream getOutputStream() {
        return this.e;
    }

    @Override // java.net.Socket
    public int getPort() {
        return 5555;
    }

    @Override // java.net.Socket
    public synchronized int getReceiveBufferSize() {
        return 512;
    }

    @Override // java.net.Socket
    public boolean getReuseAddress() {
        return false;
    }

    @Override // java.net.Socket
    public synchronized int getSendBufferSize() {
        return 512;
    }

    @Override // java.net.Socket
    public int getSoLinger() {
        return 0;
    }

    @Override // java.net.Socket
    public synchronized int getSoTimeout() {
        return 0;
    }

    @Override // java.net.Socket
    public boolean getTcpNoDelay() {
        return true;
    }

    @Override // java.net.Socket
    public int getTrafficClass() {
        return 0;
    }

    @Override // java.net.Socket
    public boolean isBound() {
        return true;
    }

    @Override // java.net.Socket
    public boolean isClosed() {
        return this.c;
    }

    @Override // java.net.Socket
    public boolean isConnected() {
        return true;
    }

    @Override // java.net.Socket
    public boolean isInputShutdown() {
        return this.d != null;
    }

    @Override // java.net.Socket
    public boolean isOutputShutdown() {
        return this.e != null;
    }

    @Override // java.net.Socket
    public void sendUrgentData(int i) {
    }

    @Override // java.net.Socket
    public void setKeepAlive(boolean z) {
    }

    @Override // java.net.Socket
    public void setOOBInline(boolean z) {
    }

    @Override // java.net.Socket
    public void setPerformancePreferences(int i, int i2, int i3) {
    }

    @Override // java.net.Socket
    public synchronized void setReceiveBufferSize(int i) {
    }

    @Override // java.net.Socket
    public void setReuseAddress(boolean z) {
    }

    @Override // java.net.Socket
    public synchronized void setSendBufferSize(int i) {
    }

    @Override // java.net.Socket
    public void setSoLinger(boolean z, int i) {
    }

    @Override // java.net.Socket
    public synchronized void setSoTimeout(int i) {
    }

    @Override // java.net.Socket
    public void setTcpNoDelay(boolean z) {
    }

    @Override // java.net.Socket
    public void setTrafficClass(int i) {
    }

    @Override // java.net.Socket
    public void shutdownInput() {
    }

    @Override // java.net.Socket
    public void shutdownOutput() {
    }

    @Override // java.net.Socket
    public String toString() {
        return "<ForwardedSocket>";
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/aa.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedReader;
import java.io.IOException;
import java.util.ArrayList;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/aa.class */
class aa implements Runnable {
    aa() {
    }

    @Override // java.lang.Runnable
    public void run() throws IOException {
        com.corrodinggames.rts.gameFramework.l.aq();
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        try {
            ArrayList arrayList = new ArrayList(2);
            n.a(arrayList, "action", "update");
            String str = lVarB.bX.aS;
            if (str == null) {
                com.corrodinggames.rts.gameFramework.l.b("startUpdateOnMasterServer", "No game id");
                return;
            }
            n.a(arrayList, "id", str);
            n.a(arrayList, "private_token", lVarB.bX.aR);
            if (com.corrodinggames.rts.gameFramework.l.ax()) {
                n.a(arrayList, "check_port", "false");
            }
            n.b(arrayList);
            BufferedReader bufferedReaderA = n.a(arrayList);
            String line = bufferedReaderA.readLine();
            if (line == null || !line.contains("CORRODINGGAMES")) {
                com.corrodinggames.rts.gameFramework.l.b("startUpdateOnMasterServer", "Error bad header returned from the master server: " + line);
                return;
            }
            String line2 = bufferedReaderA.readLine();
            if (!"GAME UPDATED".equals(line2)) {
                com.corrodinggames.rts.gameFramework.l.b("startUpdateOnMasterServer", "Update server response was:" + line2);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ax.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ax.class */
public class ax {

    /* renamed from: a, reason: collision with root package name */
    public BufferedOutputStream f578a;
    public String b;
    public PrintStream d;
    public boolean e = false;
    public ByteArrayOutputStream c = new ByteArrayOutputStream();

    public void a() throws IOException {
        this.d.flush();
        if (this.f578a != null) {
            this.f578a.flush();
        }
    }

    public void b() {
        if (!this.e) {
            this.d.close();
        } else {
            com.corrodinggames.rts.gameFramework.l.g("TODO: Cannot yet close wrapped stream");
        }
    }

    public ax(boolean z) {
        OutputStream outputStream;
        if (z) {
            this.f578a = new BufferedOutputStream(this.c);
            outputStream = this.f578a;
        } else {
            outputStream = this.c;
        }
        this.d = new PrintStream(outputStream);
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/d.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.DataInputStream;
import java.io.EOFException;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.net.SocketException;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/d.class */
final class d implements Runnable {

    /* renamed from: a, reason: collision with root package name */
    Boolean f581a;
    final /* synthetic */ c b;

    private d(c cVar) {
        this.b = cVar;
        this.f581a = true;
    }

    @Override // java.lang.Runnable
    public void run() throws IllegalAccessException, InterruptedException, InstantiationException, ClassNotFoundException, IOException, IllegalArgumentException, InvocationTargetException {
        String message;
        com.corrodinggames.rts.gameFramework.l.aq();
        Thread.currentThread().setName("ReceiveWorker-" + this.b.g());
        try {
            a();
        } catch (EOFException e) {
            this.b.a("network:ReceiveWorker: EOF reading packet", e);
        } catch (IOException e2) {
            if (!this.b.f580a) {
                e2.printStackTrace();
            }
            if (com.corrodinggames.rts.gameFramework.l.aZ && (e2 instanceof SocketException) && !this.b.f580a) {
                com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
                if (!lVarB.bX.C && lVarB.bX.aW && (message = e2.getMessage()) != null && message.contains("EBADF")) {
                    lVarB.i("Warning: This disconnect likely due to iOS removing sockets of background apps. Avoid minimising the game in multiplayer. Note: Games can be rejoined.");
                }
            }
            this.b.c("network:ReceiveWorker: " + e2.getMessage());
        } catch (OutOfMemoryError e3) {
            com.corrodinggames.rts.gameFramework.l.c(e3);
            this.b.c("network:ReceiveWorker OutOfMemoryError: " + e3.getMessage());
        }
        this.b.a(true, false);
    }

    void a() throws IllegalAccessException, InterruptedException, InstantiationException, IOException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        DataInputStream dataInputStream = new DataInputStream(this.b.d.getInputStream());
        while (this.f581a.booleanValue() && !this.b.f580a && !this.b.d.isClosed()) {
            int i = dataInputStream.readInt();
            int i2 = dataInputStream.readInt();
            if (i > 20000000) {
                this.b.b("readData(): new packet of type:" + i2 + " has size of:" + i);
            }
            if (i > 10000) {
                int i3 = 50000000;
                if (this.b.W.C) {
                    i3 = 1000000;
                }
                if (!this.b.p) {
                    i3 = 10000;
                }
                if (i > i3) {
                    this.b.b("Requested packet too large rejecting (max:" + i3 + ")");
                    return;
                }
            }
            if (i < 0) {
                this.b.b("Requested packet negative size:" + i + " rejecting");
                return;
            }
            au auVar = new au(i2);
            auVar.c = new byte[i];
            this.b.V = 0;
            this.b.U = i;
            int i4 = 0;
            auVar.f575a = this.b;
            while (i4 < i && !this.b.f580a) {
                int i5 = dataInputStream.read(auVar.c, i4, i - i4);
                if (i5 == -1) {
                    this.b.b("we got to the end of the stream?!?");
                    return;
                }
                i4 += i5;
                this.b.P++;
                this.b.V = i4;
            }
            this.b.U = 0;
            this.b.V = 0;
            if (!this.b.f580a) {
                if (auVar.b > 100) {
                    this.b.W.c(auVar);
                } else {
                    this.b.W.aN.add(auVar);
                }
            }
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/am.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/am.class */
public enum am {
    layout_2sides,
    layout_3sides,
    layout_ffa,
    layout_spectators
}


================================================================================
// FILE_PATH: ./gameFramework/j/q.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.io.BufferedReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Timer;
import org.apache.http.message.BasicNameValuePair;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/q.class */
class q implements Runnable {

    /* renamed from: a, reason: collision with root package name */
    Runnable f594a;

    q(Runnable runnable) {
        this.f594a = runnable;
    }

    @Override // java.lang.Runnable
    public void run() {
        com.corrodinggames.rts.gameFramework.l.aq();
        final com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", "Starting load");
        final int i = n.e;
        n.e++;
        try {
            new Timer().schedule(new o(i), 5000L);
            ArrayList arrayList = new ArrayList(2);
            arrayList.add(new BasicNameValuePair("action", "list"));
            arrayList.add(new BasicNameValuePair("game_version", Integer.toString(lVarB.c(true))));
            arrayList.add(new BasicNameValuePair("game_version_beta", com.corrodinggames.rts.gameFramework.f.a(lVarB.n())));
            n.a((List) arrayList, false, new s() { // from class: com.corrodinggames.rts.gameFramework.j.q.1
                @Override // com.corrodinggames.rts.gameFramework.j.s
                void a(BufferedReader bufferedReader, int i2, String str) throws InterruptedException, IOException {
                    com.corrodinggames.rts.gameFramework.l lVarB2 = com.corrodinggames.rts.gameFramework.l.B();
                    String line = bufferedReader.readLine();
                    if (line == null || !line.contains("CORRODINGGAMES")) {
                        String str2 = i2 + ": Unknown header from the master server: '" + com.corrodinggames.rts.gameFramework.f.a(line, 30) + "'";
                        com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", str2);
                        this.d = str2;
                        try {
                            String str3 = VariableScope.nullOrMissingString + line + "\n";
                            com.corrodinggames.rts.gameFramework.l.e("----------- Full response ----------");
                            com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", "line:" + line);
                            while (true) {
                                String line2 = bufferedReader.readLine();
                                if (line2 != null) {
                                    com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", "line:" + line2);
                                    str3 = str3 + line2 + "\n";
                                } else {
                                    com.corrodinggames.rts.gameFramework.l.e("------------------------------------");
                                    n.g = str3;
                                    return;
                                }
                            }
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    } else {
                        com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", i2 + ": Starting load");
                        int i3 = 0;
                        while (true) {
                            String line3 = bufferedReader.readLine();
                            if (line3 != null) {
                                String[] strArrSplit = line3.split(",", -1);
                                if (strArrSplit.length <= 21) {
                                    com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", i2 + ": columns.length too short at:" + strArrSplit.length);
                                    com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", i2 + ": short line is:" + line3);
                                } else {
                                    String str4 = strArrSplit[0];
                                    String str5 = strArrSplit[1];
                                    String str6 = strArrSplit[2];
                                    String str7 = strArrSplit[3];
                                    String str8 = strArrSplit[4];
                                    String str9 = strArrSplit[5];
                                    String str10 = strArrSplit[6];
                                    String str11 = strArrSplit[7];
                                    String str12 = strArrSplit[8];
                                    String str13 = strArrSplit[9];
                                    String str14 = strArrSplit[10];
                                    String str15 = strArrSplit[11];
                                    String str16 = strArrSplit[12];
                                    String str17 = strArrSplit[13];
                                    String str18 = strArrSplit[15];
                                    String str19 = strArrSplit[16];
                                    String str20 = strArrSplit[17];
                                    String str21 = strArrSplit[18];
                                    String str22 = strArrSplit[19];
                                    String str23 = strArrSplit[20];
                                    String str24 = strArrSplit[21];
                                    String strSubstring = null;
                                    String str25 = null;
                                    if (str7 != null && str7.startsWith("url:") && Boolean.parseBoolean(str20)) {
                                        strSubstring = str7.substring(4);
                                        str25 = str5;
                                        if (!com.corrodinggames.rts.gameFramework.f.c(strSubstring + ";" + str25).equals(str8)) {
                                            com.corrodinggames.rts.gameFramework.l.e("Skipping " + str21);
                                        }
                                    }
                                    if (str21 == null || str21.trim().length() == 0) {
                                        str21 = str4;
                                    }
                                    try {
                                        String str26 = str21;
                                        synchronized (n.f) {
                                            g gVarC = n.c(str26);
                                            gVarC.c = str7;
                                            gVarC.d = str8;
                                            gVarC.e = strSubstring;
                                            gVarC.f = str25;
                                            gVarC.g = Integer.valueOf(str9).intValue();
                                            gVarC.h = Boolean.parseBoolean(str10);
                                            gVarC.m = Boolean.parseBoolean(str12);
                                            gVarC.j = str6;
                                            try {
                                                gVarC.l = Integer.parseInt(gVarC.j);
                                            } catch (NumberFormatException e2) {
                                                com.corrodinggames.rts.gameFramework.l.b("game_version_int:" + e2.getMessage());
                                            }
                                            gVarC.n = str11;
                                            gVarC.q = str13;
                                            gVarC.r = str14;
                                            gVarC.s = str15;
                                            gVarC.k = str16;
                                            gVarC.f584a = Boolean.parseBoolean(str17);
                                            gVarC.t = str18;
                                            gVarC.u = str19;
                                            gVarC.y = Boolean.parseBoolean(str22);
                                            if (VariableScope.nullOrMissingString.equals(str23)) {
                                                str23 = null;
                                            }
                                            gVarC.z = str23;
                                            if (!str24.trim().equals(VariableScope.nullOrMissingString)) {
                                                gVarC.A = Integer.valueOf(str24).intValue();
                                            }
                                            try {
                                                gVarC.v = Integer.parseInt(gVarC.t);
                                            } catch (NumberFormatException e3) {
                                                com.corrodinggames.rts.gameFramework.l.b("game_player_count_int:" + e3.getMessage());
                                            }
                                            try {
                                                gVarC.w = Integer.parseInt(gVarC.u);
                                            } catch (NumberFormatException e4) {
                                                com.corrodinggames.rts.gameFramework.l.b("game_max_player_count_int:" + e4.getMessage());
                                            }
                                            gVarC.x = Boolean.parseBoolean(str20);
                                            if (gVarC.p < i) {
                                                gVarC.p = i;
                                            }
                                            if (n.b(gVarC.b) == null) {
                                                lVarB2.bX.bi.add(gVarC);
                                            }
                                            i3++;
                                        }
                                    } catch (NumberFormatException e5) {
                                        com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", i2 + ": failed to load server");
                                        e5.printStackTrace();
                                    }
                                }
                            } else {
                                com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", "[" + i2 + "]: Found " + i3 + " servers");
                                if (i3 == 0) {
                                    try {
                                        Thread.sleep(2000L);
                                    } catch (InterruptedException e6) {
                                        e6.printStackTrace();
                                    }
                                }
                                this.e = true;
                                q.this.f594a.run();
                                try {
                                    Thread.sleep(2000L);
                                } catch (InterruptedException e7) {
                                    e7.printStackTrace();
                                }
                                n.a(i, i2);
                                com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", i2 + ": Completed load from master server without error");
                                return;
                            }
                        }
                    }
                }

                @Override // com.corrodinggames.rts.gameFramework.j.s
                void a() {
                    if (!this.e) {
                        lVarB.bX.bh = this.d;
                        q.this.f594a.run();
                    }
                }
            });
        } catch (Exception e) {
            e.printStackTrace();
            lVarB.a("Error getting game list from server", 1);
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/p.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedReader;
import java.io.IOException;
import java.util.ArrayList;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.message.BasicNameValuePair;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/p.class */
class p implements Runnable {
    p() {
    }

    @Override // java.lang.Runnable
    public void run() throws IOException {
        com.corrodinggames.rts.gameFramework.l.aq();
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.b("GetOwnInfoRunnable", "Starting getOwnInfoFromMasterServer");
        try {
            ArrayList arrayList = new ArrayList(2);
            arrayList.add(new BasicNameValuePair("action", "self_info"));
            n.a(arrayList, "port", Integer.toString(lVarB.bX.m));
            n.a(arrayList, "id", lVarB.bX.aS);
            aq.f572a.b(lVarB.bX.aS, arrayList);
            aq.f572a.c(lVarB.bX.aS, arrayList);
            BufferedReader bufferedReaderA = n.a(arrayList);
            String line = bufferedReaderA.readLine();
            if (line == null || !line.contains("CORRODINGGAMES")) {
                com.corrodinggames.rts.gameFramework.l.b("GetOwnInfoRunnable", "Error bad header returned from the master server: " + line);
                return;
            }
            while (true) {
                String line2 = bufferedReaderA.readLine();
                if (line2 != null) {
                    String[] strArrSplit = line2.split(",");
                    if (strArrSplit.length <= 1) {
                        com.corrodinggames.rts.gameFramework.l.b("GetOwnInfoRunnable", "columns.length too short at:" + strArrSplit.length);
                    } else {
                        String str = strArrSplit[0];
                        String str2 = strArrSplit[1];
                        try {
                            com.corrodinggames.rts.gameFramework.l.b("GetOwnInfoRunnable", "got info");
                            lVarB.bX.a(true, str, Boolean.valueOf(Boolean.parseBoolean(str2)));
                        } catch (NumberFormatException e) {
                            com.corrodinggames.rts.gameFramework.l.b("GetOwnInfoRunnable", "failed to load server");
                            e.printStackTrace();
                        }
                    }
                } else {
                    com.corrodinggames.rts.appFramework.p.l();
                    com.corrodinggames.rts.gameFramework.l.b("GetOwnInfoRunnable", "Completed load from master server without error");
                    return;
                }
            }
        } catch (ClientProtocolException e2) {
            lVarB.bX.a(false, (String) null, (Boolean) null);
            e2.printStackTrace();
        } catch (IOException e3) {
            lVarB.bX.a(false, (String) null, (Boolean) null);
            e3.printStackTrace();
        } catch (Exception e4) {
            lVarB.bX.a(false, (String) null, (Boolean) null);
            com.corrodinggames.rts.gameFramework.l.a("GetOwnInfoRunnable Failed", e4);
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/al.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/al.class */
public class al {

    /* renamed from: a, reason: collision with root package name */
    public String f566a;
    public long b;
    boolean c;
    final /* synthetic */ ak d;

    public al(ak akVar, String str) {
        this(akVar, str, true);
    }

    public al(ak akVar, String str, boolean z) {
        this.d = akVar;
        this.f566a = str;
        this.c = z;
        akVar.b.add(this);
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/e.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedOutputStream;
import java.io.DataOutputStream;
import java.io.OutputStream;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/e.class */
final class e implements Runnable {
    OutputStream b;
    BufferedOutputStream c;
    DataOutputStream d;
    final /* synthetic */ c f;

    /* renamed from: a, reason: collision with root package name */
    Boolean f582a = true;
    com.corrodinggames.rts.gameFramework.utility.w e = new com.corrodinggames.rts.gameFramework.utility.w();

    public synchronized void a(au auVar) {
        if (this.f.f580a) {
            return;
        }
        this.f.f.add(auVar);
        notifyAll();
    }

    public synchronized void a() {
        notifyAll();
    }

    public synchronized void b() throws InterruptedException {
        try {
            if (this.f.f.isEmpty() && !this.f.f580a && !this.f.b) {
                wait(10000L);
            }
        } catch (InterruptedException e) {
        }
    }

    e(c cVar) {
        this.f = cVar;
        this.b = cVar.d.getOutputStream();
        this.c = new BufferedOutputStream(this.b);
        this.d = new DataOutputStream(this.c);
    }

    /* JADX WARN: Code restructure failed: missing block: B:44:0x01e7, code lost:
    
        r6.f.f580a = true;
     */
    @Override // java.lang.Runnable
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct code enable 'Show inconsistent code' option in preferences
    */
    public void run() throws java.lang.InterruptedException, java.io.IOException {
        /*
            Method dump skipped, instructions count: 532
            To view this dump change 'Code comments level' option to 'DEBUG'
        */
        throw new UnsupportedOperationException("Method not decompiled: com.corrodinggames.rts.gameFramework.j.e.run():void");
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ay.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ay.class */
public class ay extends au {
    public au f;
    public int g;

    public ay(int i, au auVar) {
        super(175);
        this.g = i;
        this.f = auVar;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/i.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.IOException;
import java.io.InputStream;
import java.nio.ByteBuffer;
import java.util.concurrent.LinkedBlockingDeque;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/i.class */
public class i extends InputStream {

    /* renamed from: a, reason: collision with root package name */
    LinkedBlockingDeque f586a = new LinkedBlockingDeque();
    boolean b = true;
    byte[] c = new byte[1];
    final /* synthetic */ h d;

    public i(h hVar) {
        this.d = hVar;
    }

    public void a(byte[] bArr) {
        this.f586a.add(ByteBuffer.wrap(bArr));
    }

    @Override // java.io.InputStream
    public int read() {
        while (read(this.c, 0, 1) <= 0) {
        }
        return this.c[0] & 255;
    }

    @Override // java.io.InputStream
    public int read(byte[] bArr) {
        return read(bArr, 0, bArr.length);
    }

    @Override // java.io.InputStream
    public int read(byte[] bArr, int i, int i2) throws IOException {
        int iRemaining;
        if (this.d.c) {
            throw new IOException("closed");
        }
        int i3 = 0;
        int i4 = i2;
        int i5 = i;
        while (!this.d.c) {
            try {
                ByteBuffer byteBuffer = (ByteBuffer) this.f586a.take();
                if (byteBuffer != null) {
                    if (this.b) {
                        this.b = false;
                        com.corrodinggames.rts.gameFramework.l.e("First packet from forwarded:" + this.d.b);
                    }
                    if (byteBuffer.remaining() <= i4) {
                        iRemaining = byteBuffer.remaining();
                        byteBuffer.get(bArr, i5, iRemaining);
                    } else {
                        iRemaining = i4;
                        byteBuffer.get(bArr, i5, i4);
                        this.f586a.addFirst(byteBuffer);
                    }
                    i3 += iRemaining;
                    i4 -= iRemaining;
                    i5 += iRemaining;
                    if (i4 < 0) {
                        throw new IOException("bytesNeeded<0:" + i4);
                    }
                    if (i4 == 0) {
                        return i3;
                    }
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
                return i3;
            }
        }
        throw new IOException("Closed");
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/au.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/au.class */
public class au {
    public int b;
    public byte[] c;
    public boolean e;

    /* renamed from: a, reason: collision with root package name */
    public c f575a = null;
    public int d = -1;

    public au(int i) {
        this.b = i;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ac.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ac.class */
public class ac {
    public boolean a(c cVar, String str, String str2) {
        return true;
    }

    public boolean a(c cVar, com.corrodinggames.rts.game.n nVar, String str, boolean z) {
        return true;
    }

    public void b(c cVar, String str, String str2) {
    }

    public void a(int i, String str, String str2, c cVar) {
    }

    public String a(c cVar, String str) {
        return null;
    }

    public void c(c cVar, String str, String str2) {
    }

    public void b(c cVar, String str) {
    }

    public void a(com.corrodinggames.rts.game.n nVar) {
    }

    public String a(c cVar, String str, int i, int i2, String str2, com.corrodinggames.rts.game.e eVar) {
        com.corrodinggames.rts.gameFramework.l.e("new player Joining packageName:" + str2 + ", appVersion:" + i2 + ", playerName:" + str + " ip:" + cVar.g() + " id:" + cVar.c);
        return null;
    }

    public void a() {
    }

    public boolean a(c cVar) {
        return false;
    }

    public boolean b(c cVar) {
        return false;
    }

    public void b() {
        com.corrodinggames.rts.gameFramework.l.e("NetworkCallbacks:startGameEvent()");
    }

    public void c() {
    }

    public void a(ae aeVar) {
    }

    public void d() {
    }

    public boolean e() {
        return false;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/j.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.OutputStream;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/j.class */
public class j extends OutputStream {

    /* renamed from: a, reason: collision with root package name */
    boolean f587a = true;
    final /* synthetic */ h b;

    public j(h hVar) {
        this.b = hVar;
    }

    @Override // java.io.OutputStream
    public void write(int i) {
        com.corrodinggames.rts.gameFramework.l.g("SteamSocketOutputStream: Slow write: " + i);
        write(new byte[]{(byte) i});
    }

    @Override // java.io.OutputStream
    public void write(byte[] bArr, int i, int i2) {
        if (this.b.c) {
            com.corrodinggames.rts.gameFramework.l.e("cannot write steam socket closed");
        } else {
            com.corrodinggames.rts.gameFramework.l.e("Forwarded message to client: " + this.b.b + " with old method");
        }
    }

    @Override // java.io.OutputStream
    public void write(byte[] bArr) {
        write(bArr, 0, bArr.length);
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/av.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.util.TimerTask;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/av.class */
class av extends TimerTask {
    private final ad c;

    /* renamed from: a, reason: collision with root package name */
    public boolean f576a = true;
    public long b = 0;

    av(ad adVar) {
        this.c = adVar;
    }

    @Override // java.util.TimerTask, java.lang.Runnable
    public void run() throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        try {
            long jCurrentTimeMillis = System.currentTimeMillis();
            if (this.c.au != 0 && (jCurrentTimeMillis > this.c.au + 5 || jCurrentTimeMillis < this.c.au)) {
                this.c.au = 0L;
                this.c.Q();
            }
            if (jCurrentTimeMillis > this.b + 1000 || jCurrentTimeMillis < this.b) {
                this.b = jCurrentTimeMillis;
                if (this.f576a) {
                    as asVar = new as();
                    asVar.a(System.currentTimeMillis());
                    asVar.c(0);
                    this.c.g(asVar.b(108));
                } else {
                    this.c.P();
                }
                this.f576a = !this.f576a;
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/s.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedReader;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/s.class */
abstract class s {
    String d;
    boolean e;
    int f;

    abstract void a(BufferedReader bufferedReader, int i, String str);

    abstract void a();

    s() {
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ao.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.IOException;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketAddress;
import java.util.ArrayList;
import java.util.Iterator;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ao.class */
public class ao implements Runnable {
    public static boolean b = true;
    private final ad r;
    ServerSocket d;
    int e;
    boolean f;
    boolean o;
    boolean p;
    boolean q;

    /* renamed from: a, reason: collision with root package name */
    public final boolean f569a = false;
    volatile boolean c = true;
    long g = -1;
    final boolean h = false;
    final boolean i = true;
    final Object j = new Object();
    ArrayList k = new ArrayList();
    final Object l = new Object();
    int m = 0;
    int n = 0;

    ao(ad adVar) {
        this.r = adVar;
    }

    public boolean a(InetAddress inetAddress, boolean z) {
        if (inetAddress == null) {
            com.corrodinggames.rts.gameFramework.l.e("isIpAllowed: inetAddress==null");
            return true;
        }
        if (!b) {
            return true;
        }
        long jCurrentTimeMillis = System.currentTimeMillis();
        if (jCurrentTimeMillis > this.g + 60000) {
            this.g = jCurrentTimeMillis;
            synchronized (this.l) {
                this.k.clear();
            }
            this.m = 0;
            this.n = 0;
            this.o = false;
            this.p = false;
            this.q = false;
        }
        synchronized (this.l) {
            boolean z2 = false;
            Iterator it = this.k.iterator();
            while (true) {
                if (!it.hasNext()) {
                    break;
                }
                ap apVar = (ap) it.next();
                if (inetAddress.equals(apVar.f571a)) {
                    apVar.b++;
                    int i = 30;
                    if (this.n > 100) {
                        i = 10;
                    }
                    if (this.n > 250) {
                        i = 5;
                    }
                    if (apVar.b > i) {
                        if (!apVar.c) {
                            apVar.c = true;
                            com.corrodinggames.rts.gameFramework.l.e("DOS: Too many attempts:" + apVar.b + " ip:" + inetAddress.toString());
                        }
                        if (apVar.b > 300 && !apVar.d) {
                            apVar.d = true;
                            com.corrodinggames.rts.gameFramework.l.e("DOS: Excessive attempts:" + apVar.b + " ip:" + inetAddress.toString());
                        }
                        return false;
                    }
                    z2 = true;
                }
            }
            if (!z2) {
                if (z) {
                    this.m++;
                }
                if (this.k.size() > 200) {
                    ap apVar2 = null;
                    Iterator it2 = this.k.iterator();
                    while (it2.hasNext()) {
                        ap apVar3 = (ap) it2.next();
                        if (apVar2 == null || apVar2.b > apVar3.b) {
                            apVar2 = apVar3;
                        }
                    }
                    if (apVar2 != null) {
                        this.k.remove(apVar2);
                    }
                }
                ap apVar4 = new ap(this);
                apVar4.f571a = inetAddress;
                this.k.add(apVar4);
            }
            if (this.m > 500) {
                if (!this.p) {
                    this.p = true;
                    com.corrodinggames.rts.gameFramework.l.e("DOS: Too many unique attempts: " + this.m + ". udp:" + this.f);
                    return false;
                }
                return false;
            }
            int i2 = 0;
            int i3 = 0;
            Iterator it3 = this.r.aM.iterator();
            while (it3.hasNext()) {
                c cVar = (c) it3.next();
                i3++;
                if (cVar.e != null && inetAddress.equals(cVar.e)) {
                    i2++;
                }
            }
            int i4 = 20;
            if (i3 > 150) {
                i4 = 10;
            }
            if (i3 > 200) {
                i4 = 5;
            }
            if (i2 > i4) {
                if (!this.q) {
                    this.q = true;
                    com.corrodinggames.rts.gameFramework.l.e("DOS: Too open connections from same ip:" + inetAddress.toString() + " (count:" + i2 + ") max:" + i4);
                    return false;
                }
                return false;
            }
            if (i3 > 300) {
                if (!this.o) {
                    this.o = true;
                    com.corrodinggames.rts.gameFramework.l.e("DOS: Too open connections locking down:" + inetAddress.toString() + " (count:" + i3 + ")");
                    return false;
                }
                return false;
            }
            this.n++;
            return true;
        }
    }

    public void a() {
        this.r.d("Recreating server socket " + (this.f ? "udp" : "tcp"));
        synchronized (this.j) {
            if (this.d != null) {
                try {
                    this.d.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                this.d = null;
            }
            if (!this.c) {
                throw new IOException("recreate on non-active socket");
            }
            a(this.f);
        }
    }

    public void a(boolean z) {
        this.e = this.r.m;
        this.r.d("starting socket.. " + (z ? "udp" : "tcp") + " port: " + this.e);
        this.f = z;
        if (!z) {
            this.d = new ServerSocket(this.e);
            return;
        }
        a.a.b bVar = new a.a.b(this.r.m, 0, null, true);
        bVar.a(new a.a.c() { // from class: com.corrodinggames.rts.gameFramework.j.ao.1
            @Override // a.a.c
            public boolean a(SocketAddress socketAddress) {
                if (socketAddress instanceof InetSocketAddress) {
                    return ao.this.a(((InetSocketAddress) socketAddress).getAddress(), false);
                }
                com.corrodinggames.rts.gameFramework.l.e("AcceptFilter: Unhandled SocketAddress type:" + socketAddress.getClass().getName());
                return true;
            }
        });
        this.d = bVar;
    }

    @Override // java.lang.Runnable
    public void run() throws IOException {
        com.corrodinggames.rts.gameFramework.l.aq();
        Thread.currentThread().setName("NewConnectionWorker-" + (this.f ? "udp" : "tcp") + " - " + this.e);
        int i = 0;
        int i2 = 0;
        this.r.d("reading..");
        while (this.c) {
            try {
                Socket socketAccept = this.d.accept();
                try {
                    socketAccept.setTcpNoDelay(true);
                    socketAccept.setSoTimeout(15000);
                    String hostAddress = "<unknown>";
                    InetAddress inetAddress = socketAccept.getInetAddress();
                    if (inetAddress != null) {
                        hostAddress = inetAddress.getHostAddress();
                    }
                    if (!a(inetAddress, true)) {
                        socketAccept.close();
                    } else {
                        c cVar = new c(this.r, socketAccept);
                        String str = "Accepted new connection id:" + cVar.c + ".. (ip:" + hostAddress + ")";
                        if (this.f) {
                            str = str + " (udp)";
                        }
                        this.r.d(str);
                        cVar.h = this.f;
                        cVar.e = inetAddress;
                        cVar.d();
                        this.r.aM.add(cVar);
                    }
                } catch (IOException e) {
                    com.corrodinggames.rts.gameFramework.l.e("Got IOException on new player connection");
                    e.printStackTrace();
                }
            } catch (IOException e2) {
                if (this.c) {
                    com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
                    i++;
                    com.corrodinggames.rts.gameFramework.l.e("ServerSocket-accept(" + (this.f ? "udp" : "tcp") + ") failed: " + e2.getMessage() + " (closed:" + this.d.isClosed() + ")");
                    if (i > 100) {
                        com.corrodinggames.rts.gameFramework.l.e("Too many server socket fails");
                        b();
                        return;
                    }
                    try {
                        a();
                        if (i2 < 3 && lVarB.bX.D() > 0) {
                            String str2 = "Warning: server socket got closed and needed to be recreated, players were likely disconnected (but can rejoin).";
                            if (com.corrodinggames.rts.gameFramework.l.aZ) {
                                str2 = str2 + "\n This likely due to iOS removing sockets of background apps. Avoid minimising the game when hosting.";
                            }
                            com.corrodinggames.rts.gameFramework.l.B().i(str2);
                            i2++;
                        }
                    } catch (IOException e3) {
                        e3.printStackTrace();
                        com.corrodinggames.rts.gameFramework.l.B().i("Warning server socket got closed and could not be recreated");
                        b();
                        return;
                    }
                } else {
                    com.corrodinggames.rts.gameFramework.l.e("ServerSocket-accept(" + (this.f ? "udp" : "tcp") + "): Got expected IOException after closed socket");
                    return;
                }
            }
        }
    }

    public void b() {
        synchronized (this.j) {
            this.c = false;
            if (this.d != null) {
                try {
                    this.d.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                this.d = null;
            }
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/f.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.io.IOException;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/f.class */
public class f extends as {

    /* renamed from: a, reason: collision with root package name */
    public String f583a = VariableScope.nullOrMissingString;

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(int i) throws IOException {
        this.f583a += "|" + i;
        super.a(i);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(float f) throws IOException {
        this.f583a += "|" + f;
        super.a(f);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(short s) throws IOException {
        this.f583a += "|" + ((int) s);
        super.a(s);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(boolean z) throws IOException {
        this.f583a += "|" + z;
        super.a(z);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(String str, boolean z) {
        this.f583a += "<" + str + ">";
        super.a(str, z);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(String str) throws IOException {
        this.f583a += "</" + str + ">";
        super.a(str);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(com.corrodinggames.rts.game.units.am amVar) throws IOException {
        this.f583a += "|u:" + amVar;
        super.a(amVar);
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/g.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/g.class */
public class g {

    /* renamed from: a, reason: collision with root package name */
    public boolean f584a;
    public String b;
    public String c;
    public String d;
    public String e;
    public String f;
    public int g;
    public boolean h;
    public String j;
    public String k;
    public int l;
    public boolean m;
    public String n;
    public long o;
    public int p;
    public String q;
    public String r;
    public String s;
    public String t;
    public String u;
    public boolean x;
    public boolean y;
    public String z;
    public int A;
    public long i = -1;
    public int v = -1;
    public int w = 8;

    public boolean a() {
        String str = com.corrodinggames.rts.gameFramework.l.B().bX.bw;
        if (str != null && str.equals(this.b)) {
            return true;
        }
        return false;
    }

    public String b() {
        String str;
        String strC = c();
        if (strC != null) {
            String strReplace = this.f;
            if (strReplace != null) {
                strReplace = strReplace.replace("\\n", "\n");
            }
            return (VariableScope.nullOrMissingString + strReplace + "\n") + "Url: " + strC + "\n";
        }
        String str2 = VariableScope.nullOrMissingString;
        if (this.f584a) {
            str2 = str2 + "Lan: " + this.d + ":" + this.g + "\n";
        }
        String str3 = (str2 + "User: " + this.n + "\n") + "Map: " + com.corrodinggames.rts.appFramework.i.e(this.q) + "\n";
        if (this.m) {
            str3 = str3 + "Password Required\n";
        }
        if (!this.h && !this.f584a) {
            str3 = str3 + "Port: not open (Connecting over the internet may fail)\n";
        }
        if ("ANY".equalsIgnoreCase(this.k)) {
            str = str3 + "Version: " + this.k + "\n";
        } else {
            str = str3 + "Version: v" + this.k + (g() ? VariableScope.nullOrMissingString : " (different game version!)") + "\n";
        }
        if (this.z != null && !this.z.equals(VariableScope.nullOrMissingString)) {
            str = str + "Mods Needed: " + this.z + "\n";
        }
        return str;
    }

    public String c() {
        return this.e;
    }

    public boolean d() {
        return this.e != null;
    }

    public String e() {
        if (this.A == 0) {
            return this.c + ":" + this.g;
        }
        return "get|" + this.b.replace("|", ".") + "|" + this.A + "|" + this.m + "|" + this.g;
    }

    public String f() {
        return this.d + ":" + this.g;
    }

    public boolean g() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (this.x && "ANY".equals(this.k)) {
            return true;
        }
        return (this.x && this.k != null && this.k.contains("+") && lVarB.c(true) >= this.l) || lVarB.c(true) == this.l;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/an.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.IOException;
import java.net.Socket;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/an.class */
public class an implements Runnable {

    /* renamed from: a, reason: collision with root package name */
    String f568a;
    boolean b;
    boolean c;
    Thread d;
    public String e;
    Runnable f;
    public Socket g;
    boolean h = false;

    public an(String str, boolean z, Runnable runnable) {
        this.f568a = str;
        this.b = z;
        this.f = runnable;
    }

    public boolean a() {
        if (!this.c) {
            return false;
        }
        this.h = true;
        return true;
    }

    public void b() {
        this.c = true;
        this.d = new Thread(this);
        this.d.start();
    }

    @Override // java.lang.Runnable
    public void run() throws IOException {
        try {
            try {
                this.g = ad.b(this.f568a, this.b);
                this.c = false;
                if (!this.h) {
                    this.f.run();
                    return;
                }
                if (this.g != null) {
                    try {
                        this.g.close();
                        this.g = null;
                        this.e = "cancelled";
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            } catch (ag e2) {
                com.corrodinggames.rts.gameFramework.l.e("Cancelled connectSocketToServer");
                this.e = "CANCELLED";
                this.c = false;
                if (!this.h) {
                    this.f.run();
                    return;
                }
                if (this.g != null) {
                    try {
                        this.g.close();
                        this.g = null;
                        this.e = "cancelled";
                    } catch (IOException e3) {
                        e3.printStackTrace();
                    }
                }
            } catch (IOException e4) {
                this.e = e4.getMessage();
                e4.printStackTrace();
                this.c = false;
                if (!this.h) {
                    this.f.run();
                    return;
                }
                if (this.g != null) {
                    try {
                        this.g.close();
                        this.g = null;
                        this.e = "cancelled";
                    } catch (IOException e5) {
                        e5.printStackTrace();
                    }
                }
            }
        } catch (Throwable th) {
            this.c = false;
            if (!this.h) {
                this.f.run();
            } else if (this.g != null) {
                try {
                    this.g.close();
                    this.g = null;
                    this.e = "cancelled";
                } catch (IOException e6) {
                    e6.printStackTrace();
                }
            }
            throw th;
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/r.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import android.net.http.AndroidHttpClient;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.ReentrantLock;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/r.class */
public class r {

    /* renamed from: a, reason: collision with root package name */
    ReentrantLock f596a = new ReentrantLock();

    public HttpClient a() {
        return a(30000, false);
    }

    public HttpClient b() {
        return a(30000, true);
    }

    public HttpClient a(int i, boolean z) throws InterruptedException {
        HttpClient defaultHttpClient;
        boolean zTryLock = false;
        try {
            zTryLock = this.f596a.tryLock(300L, TimeUnit.MILLISECONDS);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        if (!zTryLock) {
            try {
                com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", "Could not get getNewHttpClient lock! another thread maybe stuck in getNewHttpClient!");
            } catch (Throwable th) {
                if (zTryLock) {
                    this.f596a.unlock();
                }
                throw th;
            }
        }
        if (!z) {
            defaultHttpClient = AndroidHttpClient.a((String) null);
        } else {
            defaultHttpClient = new DefaultHttpClient();
        }
        HttpParams params = defaultHttpClient.getParams();
        HttpConnectionParams.setConnectionTimeout(params, i);
        HttpConnectionParams.setSoTimeout(params, 20000);
        if (zTryLock) {
            this.f596a.unlock();
        }
        return defaultHttpClient;
    }

    public void a(HttpClient httpClient) {
        if (httpClient instanceof AndroidHttpClient) {
            ((AndroidHttpClient) httpClient).a();
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/aw.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import android.graphics.PointF;
import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.PrintStream;
import java.util.LinkedList;
import java.util.ListIterator;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/aw.class */
public class aw extends as {

    /* renamed from: a, reason: collision with root package name */
    ByteArrayOutputStream f577a;
    PrintStream e;
    private PrintStream f;
    private LinkedList g;

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a() throws IOException {
        ListIterator listIterator = this.g.listIterator(this.g.size());
        while (listIterator.hasPrevious()) {
            ((ax) listIterator.previous()).a();
        }
        this.e.flush();
        if (this.f577a != null) {
            this.f577a.flush();
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    void b() {
        this.f = this.e;
    }

    public aw() {
        this.g = new LinkedList();
        this.f577a = new ByteArrayOutputStream();
        this.e = new PrintStream(this.f577a);
        b();
    }

    public aw(PrintStream printStream) {
        this.g = new LinkedList();
        this.e = printStream;
        b();
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public au b(int i) {
        return a(i, -1);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public au a(int i, int i2) {
        try {
            a();
            au auVar = new au(i);
            auVar.c = this.f577a.toByteArray();
            auVar.d = i2;
            return auVar;
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public String c() {
        try {
            a();
            return this.f577a.toString();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public byte[] d() {
        try {
            a();
            return this.f577a.toByteArray();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void c(int i) {
        this.f.println(i);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(boolean z) {
        this.f.println(z);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(int i) {
        this.f.println("#int:");
        this.f.println(i);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(float f) {
        this.f.println("#writeFloat");
        this.f.println(f);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(long j) {
        this.f.println("#writeLong");
        this.f.println(j);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void b(String str) {
        a(str != null);
        if (str != null) {
            c(str);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void c(String str) {
        this.f.println(str);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(com.corrodinggames.rts.gameFramework.w wVar) {
        this.f.println("#writeGameObject:");
        if (wVar == null) {
            this.f.println(-1);
        } else {
            this.f.println(wVar.eh);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void b(com.corrodinggames.rts.gameFramework.w wVar) {
        this.f.println("#writeExistingGameObject:");
        if (wVar != null && !wVar.ej) {
            this.f.println(wVar.eh);
        } else {
            this.f.println(-1);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void b(com.corrodinggames.rts.game.units.am amVar) {
        if (amVar != null && !amVar.ej && !amVar.bV) {
            a((com.corrodinggames.rts.gameFramework.w) amVar);
        } else {
            a((com.corrodinggames.rts.gameFramework.w) null);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(com.corrodinggames.rts.game.units.am amVar) {
        if (amVar != null && !amVar.ej) {
            a((com.corrodinggames.rts.gameFramework.w) amVar);
        } else {
            a((com.corrodinggames.rts.gameFramework.w) null);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(com.corrodinggames.rts.game.units.y yVar) {
        if (yVar != null && !yVar.ej) {
            a((com.corrodinggames.rts.gameFramework.w) yVar);
        } else {
            a((com.corrodinggames.rts.gameFramework.w) null);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(PointF pointF) {
        this.f.println("#PointF:");
        a(pointF != null);
        if (pointF != null) {
            a(pointF.f45a);
            a(pointF.b);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(Enum r5) {
        if (r5 == null) {
            this.f.println("#Enum: null");
            this.f.println(-1);
        } else {
            this.f.println("#Enum:" + r5.getClass().getSimpleName() + " : " + r5.toString());
            this.f.println(r5.ordinal());
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(com.corrodinggames.rts.game.units.as asVar) {
        this.f.println("#unitType:");
        if (asVar == null) {
            this.f.println(-1);
        } else if (asVar instanceof com.corrodinggames.rts.game.units.custom.l) {
            this.f.println(-2);
            c(((com.corrodinggames.rts.game.units.custom.l) asVar).M);
        } else {
            this.f.println(((com.corrodinggames.rts.game.units.ar) asVar).ordinal());
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(c cVar) {
        if (cVar == null) {
            this.f.println(0);
        } else {
            this.f.println(cVar.c);
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(com.corrodinggames.rts.game.n nVar) {
        this.f.println("#team:");
        this.f.println(nVar.k);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(File file) throws IOException {
        com.corrodinggames.rts.gameFramework.utility.j jVarA = com.corrodinggames.rts.gameFramework.e.a.a(file);
        try {
            a(jVarA, (int) file.length());
        } finally {
            jVarA.close();
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(InputStream inputStream, int i) throws IOException {
        int i2 = 0;
        a(i);
        byte[] bArr = new byte[16384];
        while (true) {
            int i3 = inputStream.read(bArr, 0, bArr.length);
            if (i3 != -1) {
                if (i2 + i3 > i) {
                    int i4 = i - i2;
                    if (i4 < 0) {
                        ad.g("writeStream: bytesTillFull is " + i4);
                        return;
                    } else {
                        this.f.write(bArr, 0, i4);
                        return;
                    }
                }
                this.f.write(bArr, 0, i3);
                i2 += i3;
            } else {
                return;
            }
        }
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(ByteArrayOutputStream byteArrayOutputStream) throws IOException {
        a(byteArrayOutputStream.size());
        byteArrayOutputStream.writeTo(this.f);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(byte[] bArr) throws IOException {
        a(bArr.length);
        this.f.write(bArr);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(short s) {
        this.f.println("#writeShort");
        this.f.println((int) s);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void e() {
        this.f.println("#writeMark:");
        a((short) 12345);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void d(String str) {
        this.f.println("#writeIfDebugOnly: " + str);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public boolean f() {
        return true;
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void e(String str) {
        a(str, false);
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(String str, boolean z) {
        ax axVar = new ax(z);
        axVar.b = str;
        this.g.add(axVar);
        this.f = ((ax) this.g.getLast()).d;
    }

    @Override // com.corrodinggames.rts.gameFramework.j.as
    public void a(String str) throws IOException {
        ax axVar = (ax) this.g.removeLast();
        if (!axVar.b.equals(str)) {
            com.corrodinggames.rts.gameFramework.l.b("OutputNetStream:endBlock", "Name does not match: expected" + str + " , got:" + axVar.b);
        }
        axVar.a();
        if (this.g.isEmpty()) {
            this.f = this.e;
        } else {
            this.f = ((ax) this.g.getLast()).d;
        }
        String str2 = VariableScope.nullOrMissingString;
        String str3 = VariableScope.nullOrMissingString;
        for (int i = 0; i < this.g.size(); i++) {
            str2 = str2 + ">";
            str3 = str3 + "<";
        }
        this.f.println(str2 + ">>>> Start of block: " + axVar.b);
        a(axVar.c);
        this.f.println(str3 + "<<<< End of block: " + axVar.b);
        axVar.b();
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/k.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import android.graphics.PointF;
import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.io.ByteArrayInputStream;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.LinkedList;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/k.class */
public class k {

    /* renamed from: a, reason: collision with root package name */
    ByteArrayInputStream f588a;
    private DataInputStream e;
    private DataInputStream f;
    private LinkedList g = new LinkedList();
    int b = 999999;
    int c = 999999;
    int d = 0;

    void a() {
        this.f = this.e;
    }

    public k(au auVar) {
        this.f588a = new ByteArrayInputStream(auVar.c);
        this.e = new DataInputStream(this.f588a);
        a();
    }

    public k(DataInputStream dataInputStream) {
        this.e = dataInputStream;
        a();
    }

    public k(String str) {
        this.f588a = new ByteArrayInputStream(str.getBytes());
        this.e = new DataInputStream(this.f588a);
        a();
    }

    public k(byte[] bArr) {
        this.f588a = new ByteArrayInputStream(bArr);
        this.e = new DataInputStream(this.f588a);
        a();
    }

    public void a(int i) {
        this.b = i;
    }

    public int b() {
        return this.b;
    }

    public void b(int i) {
        this.c = i;
    }

    public int c() {
        return this.c;
    }

    public byte d() {
        return this.f.readByte();
    }

    public boolean e() {
        return this.f.readBoolean();
    }

    public int f() {
        return this.f.readInt();
    }

    public float g() {
        return this.f.readFloat();
    }

    public double h() {
        return this.f.readDouble();
    }

    public long i() {
        return this.f.readLong();
    }

    public String j() {
        if (!e()) {
            return null;
        }
        return l();
    }

    public Integer k() {
        if (!e()) {
            return null;
        }
        return Integer.valueOf(f());
    }

    public String l() {
        return this.f.readUTF();
    }

    public com.corrodinggames.rts.game.units.custom.g m() throws IOException {
        String utf = this.f.readUTF();
        if (utf.equals(VariableScope.nullOrMissingString)) {
            return null;
        }
        return com.corrodinggames.rts.game.units.custom.g.c(utf);
    }

    public long n() {
        return this.f.readLong();
    }

    public com.corrodinggames.rts.gameFramework.w a(Class cls) {
        return com.corrodinggames.rts.gameFramework.w.a(this.f.readLong(), cls, false);
    }

    public void a(com.corrodinggames.rts.gameFramework.utility.m mVar, Class cls) {
        int iF = f();
        for (int i = 0; i < iF; i++) {
            com.corrodinggames.rts.gameFramework.w wVarA = a(cls);
            if (wVarA != null) {
                mVar.add(wVarA);
            }
        }
    }

    public com.corrodinggames.rts.game.units.am o() {
        return a(m.warn);
    }

    public com.corrodinggames.rts.game.units.am a(m mVar) {
        return com.corrodinggames.rts.gameFramework.w.a(this.f.readLong(), mVar == m.expected);
    }

    public com.corrodinggames.rts.game.units.y p() {
        return com.corrodinggames.rts.gameFramework.w.b(this.f.readLong(), false);
    }

    public Enum b(Class cls) throws IOException {
        int i = this.f.readInt();
        if (i == -1) {
            return null;
        }
        Object[] enumConstants = cls.getEnumConstants();
        if (i < 0 || i >= enumConstants.length) {
            ad.g("readEnum:" + i + " is out of range for " + cls.toString());
            return null;
        }
        return (Enum) enumConstants[i];
    }

    public com.corrodinggames.rts.game.units.as q() throws IOException {
        int i = this.f.readInt();
        if (i == -1) {
            return null;
        }
        if (i == -2) {
            String strL = l();
            com.corrodinggames.rts.game.units.custom.l lVarN = com.corrodinggames.rts.game.units.custom.l.n(strL);
            if (lVarN == null) {
                ad.g("readUnitType: Could not find customUnitMetadata:" + strL);
            }
            com.corrodinggames.rts.game.units.as asVarC = com.corrodinggames.rts.game.units.custom.l.c(lVarN);
            if (asVarC != null) {
                if (asVarC instanceof com.corrodinggames.rts.game.units.custom.l) {
                    lVarN = (com.corrodinggames.rts.game.units.custom.l) asVarC;
                } else {
                    com.corrodinggames.rts.gameFramework.l.b("replacement not a custom unit:" + asVarC.i());
                }
            }
            return lVarN;
        }
        Object[] enumConstants = com.corrodinggames.rts.game.units.ar.class.getEnumConstants();
        if (i < 0 || i >= enumConstants.length) {
            ad.g("readUnitType:" + i + " is out of range for UnitType");
            return null;
        }
        return (com.corrodinggames.rts.game.units.ar) enumConstants[i];
    }

    public com.corrodinggames.rts.game.n r() throws IOException {
        byte b = this.f.readByte();
        com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(b);
        if (nVarK == null) {
            throw new IOException("Error loading save data, could not find referenced team:" + ((int) b) + VariableScope.nullOrMissingString);
        }
        return nVarK;
    }

    public com.corrodinggames.rts.game.n s() {
        return com.corrodinggames.rts.game.n.k(this.f.readByte());
    }

    public byte[] t() {
        int i;
        int i2 = 0;
        int iF = f();
        byte[] bArr = new byte[iF];
        while (i2 < iF && (i = this.f.read(bArr, i2, iF - i2)) != -1) {
            i2 += i;
        }
        return bArr;
    }

    public k u() {
        return new k(t());
    }

    public short v() {
        return this.f.readShort();
    }

    public void a(String str) {
        if (v() != 12345) {
            ad.g("Mark wasn't read for:" + str);
            if (com.corrodinggames.rts.gameFramework.l.B().aa()) {
                throw new RuntimeException("Mark wasn't read for:" + str);
            }
        }
    }

    public InputStream w() {
        return this.f;
    }

    public void b(String str) throws IOException {
        a(str, false);
    }

    public String x() {
        return a(false, false);
    }

    public void a(String str, boolean z) throws IOException {
        a(str, z, false);
    }

    public void a(String str, boolean z, boolean z2) throws IOException {
        if (this.b < 11) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping start block:" + str);
            return;
        }
        String strA = a(z, z2);
        if (!strA.equals(str)) {
            com.corrodinggames.rts.gameFramework.l.b("InputNetStream:endBlock", "Name does not match: expected:" + str + " , got:" + strA);
        }
    }

    public byte[] c(String str) throws IOException {
        String utf = this.f.readUTF();
        if (!utf.equals(str)) {
            com.corrodinggames.rts.gameFramework.l.b("getBlockRaw", "Name does not match: expected:" + str + " , got:" + utf);
        }
        return t();
    }

    public String a(boolean z, boolean z2) throws IOException {
        if (this.b < 11) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping start block: startBlockAndGetName()");
            return "<skipped>";
        }
        String utf = this.f.readUTF();
        l lVar = new l(t(), z, z2);
        lVar.f589a = utf;
        this.g.add(lVar);
        this.f = ((l) this.g.getLast()).c;
        return utf;
    }

    public void d(String str) {
        if (this.b < 11) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping end block:" + str);
            return;
        }
        l lVar = (l) this.g.removeLast();
        if (!lVar.f589a.equals(str)) {
            com.corrodinggames.rts.gameFramework.l.b("InputNetStream:endBlock", "Name does not match: expected" + str + " ," + lVar.f589a);
        }
        if (this.g.isEmpty()) {
            this.f = this.e;
        } else {
            this.f = ((l) this.g.getLast()).c;
        }
    }

    public PointF y() {
        if (!e()) {
            return null;
        }
        PointF pointF = new PointF();
        pointF.f45a = g();
        pointF.b = g();
        return pointF;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ab.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Locale;
import org.apache.http.message.BasicNameValuePair;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ab.class */
class ab implements Runnable {

    /* renamed from: a, reason: collision with root package name */
    w f550a;
    String b;
    int c;
    String d;

    ab() {
    }

    @Override // java.lang.Runnable
    public void run() throws IOException {
        com.corrodinggames.rts.gameFramework.l.aq();
        com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.b("getGameServerInfoFromMasterServer", "Starting getGameServerInfoFromMasterServer");
        String strA = n.a(this.c);
        String strC = null;
        if (this.d != null) {
            strC = com.corrodinggames.rts.gameFramework.f.c(this.b + this.d, 3);
        }
        try {
            ArrayList arrayList = new ArrayList(2);
            arrayList.add(new BasicNameValuePair("action", "get"));
            arrayList.add(new BasicNameValuePair("game_id", this.b));
            arrayList.add(new BasicNameValuePair("c", strA));
            arrayList.add(new BasicNameValuePair("p_hash", strC));
            BufferedReader bufferedReaderA = n.a(arrayList);
            String line = bufferedReaderA.readLine();
            if (line == null || !line.contains("CORRODINGGAMES")) {
                com.corrodinggames.rts.gameFramework.l.b("getGameServerInfoFromMasterServerRunnable", "Error bad header returned from the master server: " + line);
                this.f550a.a("Unexpected header from master server", x.unknown, null);
                return;
            }
            String line2 = bufferedReaderA.readLine();
            if (line2 == null) {
                throw new IOException("Unexpected end of response");
            }
            if (line.contains("[FAILED]")) {
                com.corrodinggames.rts.gameFramework.l.b("Got failed header with status:" + line2);
                String str = "Failed to get server connection data - unknown";
                x xVar = x.unknown;
                if (line2.startsWith("ERROR_OTHER")) {
                    String[] strArrSplit = line2.split(",");
                    if (strArrSplit.length >= 2) {
                        str = strArrSplit[1];
                    }
                    xVar = x.unknown;
                } else if (line2.startsWith("ERROR_MISSING")) {
                    str = "Request missing required fields";
                } else if (!line2.startsWith("ERROR_WRONG_C")) {
                    if (line2.startsWith("ERROR_MISSING_PASSWORD")) {
                        str = "Missing password";
                        xVar = x.unknown;
                    } else if (line2.startsWith("ERROR_WRONG_PASSWORD")) {
                        str = "Wrong password";
                        xVar = x.wrongPassword;
                    }
                }
                this.f550a.a(str, xVar, null);
                return;
            }
            String line3 = bufferedReaderA.readLine();
            if (line3 == null) {
                throw new IOException("Unexpected end of response");
            }
            if (!line3.toLowerCase(Locale.ROOT).contains(com.corrodinggames.rts.gameFramework.f.c("game_" + strA).toLowerCase(Locale.ROOT))) {
                com.corrodinggames.rts.gameFramework.l.b("getGameServerInfoFromMasterServerRunnable", "Error bad header returned from the master server: " + line3);
                this.f550a.a("Unexpected return from master server", x.unknown, null);
                return;
            }
            bufferedReaderA.readLine();
            String line4 = bufferedReaderA.readLine();
            if (line4 == null) {
                throw new IOException("Unexpected end of response");
            }
            String[] strArrSplit2 = line4.split(",");
            if (strArrSplit2.length <= 18) {
                throw new RuntimeException("getGameServerInfoFromMasterServerRunnable: columns.length too short at:" + strArrSplit2.length);
            }
            String str2 = strArrSplit2[3];
            String str3 = strArrSplit2[4];
            String str4 = strArrSplit2[5];
            String str5 = strArrSplit2[6];
            String str6 = strArrSplit2[7];
            String str7 = strArrSplit2[8];
            String str8 = strArrSplit2[9];
            String str9 = strArrSplit2[10];
            String str10 = strArrSplit2[11];
            String str11 = strArrSplit2[12];
            String str12 = strArrSplit2[13];
            String str13 = strArrSplit2[15];
            String str14 = strArrSplit2[16];
            String str15 = strArrSplit2[17];
            String str16 = strArrSplit2[18];
            com.corrodinggames.rts.gameFramework.l.b("getGameServerInfoFromMasterServerRunnable", "got ");
            com.corrodinggames.rts.gameFramework.l.b("getGameServerInfoFromMasterServerRunnable", "Completed get from master server without error");
            this.f550a.a(str2 + ":" + str4);
        } catch (IOException e) {
            com.corrodinggames.rts.gameFramework.l.a("getGameServerInfoFromMasterServerRunnable Failed", (Exception) e);
            this.f550a.a(e.getMessage(), x.unknown, e);
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/u.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedReader;
import java.net.UnknownHostException;
import java.util.List;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/u.class */
class u implements Runnable {

    /* renamed from: a, reason: collision with root package name */
    int f598a;
    List b;
    s c;
    String d;
    boolean e;

    public u(List list, s sVar, String str, boolean z, int i) {
        this.f598a = i;
        this.b = list;
        this.c = sVar;
        this.d = str;
        this.e = z;
    }

    @Override // java.lang.Runnable
    public void run() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        try {
            if (n.f591a) {
                com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", this.f598a + ": Started doSingleRequest");
            }
            BufferedReader bufferedReader = n.a(this.b, this.d, this.e).f597a;
            if (n.f591a) {
                com.corrodinggames.rts.gameFramework.l.b("LoadFromMasterServer", this.f598a + ": Ended doSingleRequest");
            }
            this.c.a(bufferedReader, this.f598a, this.d);
        } catch (Exception e) {
            e.printStackTrace();
            String strA = com.corrodinggames.rts.gameFramework.f.a(e, true);
            if (e instanceof UnknownHostException) {
                strA = "DNS lookup failed, check your internet connection";
            }
            if (strA != null && strA.contains("Cleartext HTTP traffic")) {
                strA = strA + " ( Broken apk file? - " + lVarB.l() + ")";
            }
            this.c.d = "#" + this.f598a + ": " + strA;
            com.corrodinggames.rts.gameFramework.l.e("Error getting game list from server #" + this.f598a);
            if (lVarB.p()) {
                lVarB.a("Error getting game list from server #" + this.f598a, 1);
            }
        }
        synchronized (this.c) {
            this.c.f--;
            if (this.c.f == 0) {
                this.c.a();
            }
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ai.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ai.class */
public enum ai {
    skirmishMap { // from class: com.corrodinggames.rts.gameFramework.j.ai.1
        @Override // com.corrodinggames.rts.gameFramework.j.ai
        public String a() {
            return "Skirmish Map";
        }
    },
    customMap { // from class: com.corrodinggames.rts.gameFramework.j.ai.2
        @Override // com.corrodinggames.rts.gameFramework.j.ai
        public String a() {
            return "Custom Map";
        }
    },
    savedGame { // from class: com.corrodinggames.rts.gameFramework.j.ai.3
        @Override // com.corrodinggames.rts.gameFramework.j.ai
        public String a() {
            return "Saved Game";
        }
    };

    public abstract String a();
}


================================================================================
// FILE_PATH: ./gameFramework/j/y.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedReader;
import java.io.IOException;
import java.util.ArrayList;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/y.class */
class y implements Runnable {
    y() {
    }

    @Override // java.lang.Runnable
    public void run() {
        com.corrodinggames.rts.gameFramework.l.aq();
        long jV = com.corrodinggames.rts.gameFramework.l.V();
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "Starting create");
        try {
            try {
                ArrayList arrayList = new ArrayList(2);
                n.a(arrayList, "action", "add");
                String str = "u_" + com.corrodinggames.rts.gameFramework.f.b();
                n.a(arrayList, "user_id", str);
                aq.f572a.a(str, arrayList);
                n.a(arrayList, "game_name", "Unnamed");
                n.a(arrayList, "game_version", Integer.toString(lVarB.c(true)));
                if (lVarB.bX.v) {
                    n.a(arrayList, "game_version_string", "ANY");
                } else {
                    n.a(arrayList, "game_version_string", lVarB.v());
                }
                n.a(arrayList, "game_version_beta", com.corrodinggames.rts.gameFramework.f.a(lVarB.n()));
                String strAu = lVarB.bX.au();
                if (strAu != null) {
                    n.a(arrayList, "game_mods", strAu);
                }
                n.a(arrayList, "private_token", lVarB.bX.aR);
                n.a(arrayList, "private_token_2", com.corrodinggames.rts.gameFramework.f.b(com.corrodinggames.rts.gameFramework.f.b(lVarB.bX.aR)));
                n.a(arrayList, "confirm", com.corrodinggames.rts.gameFramework.f.b("a" + com.corrodinggames.rts.gameFramework.f.b(lVarB.bX.aR)));
                n.b(arrayList);
                BufferedReader bufferedReaderA = n.a(arrayList, 15);
                String line = bufferedReaderA.readLine();
                if (line == null || !line.contains("CORRODINGGAMES")) {
                    com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "Error bad header returned from the master server: " + line);
                    com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "create took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
                    return;
                }
                String[] strArrSplit = bufferedReaderA.readLine().split(",");
                if (strArrSplit.length < 1) {
                    com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "columns.length too short at:" + strArrSplit.length);
                }
                String str2 = strArrSplit[0];
                try {
                    com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "Created server is:" + str2);
                    lVarB.bX.aS = str2;
                } catch (NumberFormatException e) {
                    com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "failed to load server");
                    e.printStackTrace();
                }
                if (strArrSplit.length >= 2) {
                    try {
                        aq.f = Integer.parseInt(strArrSplit[1]);
                    } catch (NumberFormatException e2) {
                        aq.f = -1;
                    }
                }
                com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "Completed create from master server without error");
                com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "create took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
            } catch (IOException e3) {
                e3.printStackTrace();
                com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "create took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
            }
        } catch (Throwable th) {
            com.corrodinggames.rts.gameFramework.l.b("StartCreateOnMasterServer", "create took: " + ((com.corrodinggames.rts.gameFramework.l.V() - jV) / 1000000.0f) + " seconds");
            throw th;
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ae.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.IOException;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ae.class */
public class ae {
    public String b;
    public int c;
    public boolean d;
    public String e;
    public String f;
    public String g;

    public void a(String str) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (this.d) {
            try {
                as asVar = new as();
                asVar.c(1);
                asVar.a(this.c);
                asVar.c(str);
                lVarB.bX.d(asVar.b(118));
                return;
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
        if (lVarB.bX.C) {
            com.corrodinggames.rts.gameFramework.l.a("Cannot enter a password when we are a server");
        } else {
            lVarB.bX.n = str;
            lVarB.bX.X();
        }
    }

    public void a() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        lVarB.bX.b("exited password");
        lVarB.bX.K();
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/l.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedInputStream;
import java.io.ByteArrayInputStream;
import java.io.DataInputStream;
import java.io.InputStream;
import java.util.zip.GZIPInputStream;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/l.class */
public class l {

    /* renamed from: a, reason: collision with root package name */
    public String f589a;
    public ByteArrayInputStream b;
    public DataInputStream c;

    public l(byte[] bArr, boolean z, boolean z2) {
        InputStream bufferedInputStream;
        this.b = new ByteArrayInputStream(bArr);
        if (z) {
            bufferedInputStream = new BufferedInputStream(new GZIPInputStream(this.b));
        } else {
            bufferedInputStream = this.b;
        }
        this.c = new DataInputStream(bufferedInputStream);
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ap.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.net.InetAddress;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ap.class */
class ap {

    /* renamed from: a, reason: collision with root package name */
    InetAddress f571a;
    int b = 1;
    boolean c;
    boolean d;
    final /* synthetic */ ao e;

    ap(ao aoVar) {
        this.e = aoVar;
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/aq.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.util.List;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/aq.class */
public class aq {

    /* renamed from: a, reason: collision with root package name */
    public static aq f572a = new aq();
    public static int b = 2;
    static int c = 3;
    static int d = 2;
    static int e = 3;
    public static int f = 4;
    static String g = "tx";
    static String h = "_";
    public static int i = 55;
    public static int j = 66;
    public static int k = 100;
    public static boolean l = true;

    public static float a(float f2, float f3, float f4) {
        return f2 + ((f3 - f2) * f4);
    }

    public void a(String str, List list) {
        long jV = com.corrodinggames.rts.gameFramework.l.V();
        n.a(list, h + "1", VariableScope.nullOrMissingString + jV);
        n.a(list, g + "2", com.corrodinggames.rts.gameFramework.f.d("_" + str + (b + c)));
        n.a(list, g + "3", com.corrodinggames.rts.gameFramework.f.d("_" + str + (b + c + jV)));
    }

    public void b(String str, List list) {
        n.a(list, g + "3", com.corrodinggames.rts.gameFramework.f.d("-" + str + (d + e) + f));
    }

    public void c(String str, List list) {
        if (f > 1000) {
            n.a(list, g + "4", com.corrodinggames.rts.gameFramework.f.d("+" + str + (d + e) + f));
        }
    }

    public static void a(c cVar) {
        if (cVar.N) {
            com.corrodinggames.rts.gameFramework.l.V();
            if (com.corrodinggames.rts.gameFramework.l.B().bx > -5) {
                cVar.O = com.corrodinggames.rts.gameFramework.f.a(0.0f, 0.0f, (float) k, 0.0f) > 10.0f;
            }
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/m.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/m.class */
public enum m {
    expected,
    warn
}


================================================================================
// FILE_PATH: ./gameFramework/j/ad.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.net.DhcpInfo;
import android.net.wifi.WifiManager;
import android.os.Build;
import android.util.Log;
import com.corrodinggames.rts.R;
import com.corrodinggames.rts.game.units.custom.bd;
import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import com.corrodinggames.rts.gameFramework.br;
import com.corrodinggames.rts.gameFramework.utility.SlickToAndroidKeycodes;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.NetworkInterface;
import java.net.Socket;
import java.net.SocketException;
import java.net.UnknownHostException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Enumeration;
import java.util.Iterator;
import java.util.Locale;
import java.util.Timer;
import java.util.TimerTask;
import java.util.UUID;
import java.util.concurrent.ConcurrentLinkedQueue;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ad.class */
public final class ad {
    ArrayList f;
    public boolean g;
    public boolean i;
    public float j;
    public float k;
    public int m;
    public String n;
    public boolean o;
    public boolean p;
    public boolean q;
    public boolean s;
    public String u;
    public String y;
    private boolean bG;
    public com.corrodinggames.rts.game.n z;
    public boolean A;
    public boolean C;
    public boolean D;
    public String E;
    public boolean G;
    public boolean H;
    public Float K;
    public String L;
    public boolean N;
    public int O;
    public int P;
    public int Q;
    public int R;
    public String S;
    public boolean Y;
    public float Z;
    boolean aa;
    public float ab;
    public float ac;
    public boolean ad;
    public float ae;
    public boolean af;
    public boolean ag;
    public boolean aj;
    public boolean ak;
    public boolean al;
    public boolean an;
    public int ap;
    public int aq;
    public int ar;
    public static boolean as;
    long au;
    public boolean av;
    public k aA;
    public k aB;
    Thread aD;
    ao aE;
    Thread aF;
    ao aG;
    Timer aH;
    av aI;
    Thread aJ;
    af aK;
    boolean aO;
    String aS;
    public String aT;
    public Boolean aU;
    public Boolean aV;
    public boolean aW;
    public float ba;
    public boolean bb;
    public boolean bc;
    public boolean bd;
    public boolean be;
    public boolean bf;
    public String bg;
    public com.corrodinggames.rts.game.e bj;
    public com.corrodinggames.rts.game.e bk;
    float bn;
    float bo;
    int bp;
    int bq;
    public long bs;
    public long bt;
    public boolean bx;
    static ArrayList bA;
    Timer bD;
    an bF;

    /* renamed from: a, reason: collision with root package name */
    public static final boolean f551a = false;
    public static boolean b = true;
    public static boolean c = false;
    public static boolean r = true;
    public static ae bE = new ae();
    public ac d = new ac();
    public int h = 25;
    public boolean l = false;
    public int t = 5005;
    public boolean v = false;
    public long w = 1;
    public boolean x = false;
    private boolean bH = false;
    public volatile boolean B = false;
    public boolean F = false;
    public int I = 0;
    private volatile float bI = 1.0f;
    public volatile float J = 1.0f;
    public ArrayList M = new ArrayList();
    public int T = -1;
    public int U = -1;
    public int V = -1;
    public int W = com.corrodinggames.rts.gameFramework.f.a(1, 9000000);
    public int X = 0;
    public int ah = -1;
    public int ai = 300;
    public ak am = new ak();
    public boolean ao = true;
    float at = 0.0f;
    public int aw = 5;
    public int ax = 5;
    public ah ay = new ah();
    public String az = null;
    public a aC = new a();
    public ConcurrentLinkedQueue aM = new ConcurrentLinkedQueue();
    ConcurrentLinkedQueue aN = new ConcurrentLinkedQueue();
    volatile int aP = 1;
    Object aQ = new Object();
    public boolean aX = false;
    boolean aY = false;
    boolean aZ = false;
    public String bh = null;
    public ConcurrentLinkedQueue bi = new ConcurrentLinkedQueue();
    public final Object bl = new Object();
    public boolean bm = false;
    boolean br = false;
    boolean bu = false;
    public Socket bv = null;
    public String bw = null;
    boolean by = false;
    boolean bz = false;
    boolean bB = false;
    final Object bC = new Object();
    public int e = com.corrodinggames.rts.gameFramework.l.B().c(true);
    String aR = com.corrodinggames.rts.gameFramework.f.e(40);
    c aL = new c(this, null);

    /*  JADX ERROR: Failed to decode insn: 0x002C: MOVE_MULTI
        java.lang.ArrayIndexOutOfBoundsException: arraycopy: source index -1 out of bounds for object array[8]
        	at java.base/java.lang.System.arraycopy(Native Method)
        	at jadx.plugins.input.java.data.code.StackState.insert(StackState.java:52)
        	at jadx.plugins.input.java.data.code.CodeDecodeState.insert(CodeDecodeState.java:137)
        	at jadx.plugins.input.java.data.code.JavaInsnsRegister.dup2x1(JavaInsnsRegister.java:313)
        	at jadx.plugins.input.java.data.code.JavaInsnData.decode(JavaInsnData.java:46)
        	at jadx.core.dex.instructions.InsnDecoder.lambda$process$0(InsnDecoder.java:50)
        	at jadx.plugins.input.java.data.code.JavaCodeReader.visitInstructions(JavaCodeReader.java:85)
        	at jadx.core.dex.instructions.InsnDecoder.process(InsnDecoder.java:46)
        	at jadx.core.dex.nodes.MethodNode.load(MethodNode.java:158)
        	at jadx.core.dex.nodes.ClassNode.load(ClassNode.java:460)
        	at jadx.core.ProcessClass.process(ProcessClass.java:69)
        	at jadx.core.ProcessClass.generateCode(ProcessClass.java:109)
        	at jadx.core.dex.nodes.ClassNode.generateClassCode(ClassNode.java:403)
        	at jadx.core.dex.nodes.ClassNode.decompile(ClassNode.java:391)
        	at jadx.core.dex.nodes.ClassNode.getCode(ClassNode.java:341)
        */
    public long y() {
        /*
            r8 = this;
            r0 = 0
            r9 = r0
            r0 = r9
            if (r0 == 0) goto L27
            java.lang.StringBuilder r0 = new java.lang.StringBuilder
            r1 = r0
            r1.<init>()
            java.lang.String r1 = "New id set:"
            java.lang.StringBuilder r0 = r0.append(r1)
            r1 = r8
            long r1 = r1.w
            java.lang.StringBuilder r0 = r0.append(r1)
            r1 = 1
            java.lang.StringBuilder r0 = r0.append(r1)
            java.lang.String r0 = r0.toString()
            com.corrodinggames.rts.gameFramework.l.e(r0)
            com.corrodinggames.rts.gameFramework.l.T()
            r0 = r8
            r1 = r0
            long r1 = r1.w
            // decode failed: arraycopy: source index -1 out of bounds for object array[8]
            r2 = 1
            long r1 = r1 + r2
            r0.w = r1
            r10 = r-1
            r-1 = r10
            r0 = 0
            int r-1 = (r-1 > r0 ? 1 : (r-1 == r0 ? 0 : -1))
            if (r-1 != 0) goto L42
            java.lang.String r-1 = "getNextUnitId: id==0"
            com.corrodinggames.rts.gameFramework.l.e(r-1)
            com.corrodinggames.rts.gameFramework.l.T()
            r-1 = r10
            return r-1
        */
        throw new UnsupportedOperationException("Method not decompiled: com.corrodinggames.rts.gameFramework.j.ad.y():long");
    }

    public aj a(c cVar) {
        String strF = cVar.f();
        long jCurrentTimeMillis = System.currentTimeMillis();
        if (strF == null) {
            cVar.b("Is banned: No target");
            return null;
        }
        synchronized (this.M) {
            Iterator it = this.M.iterator();
            while (it.hasNext()) {
                aj ajVar = (aj) it.next();
                if (strF.equals(ajVar.f564a) && ajVar.b > jCurrentTimeMillis) {
                    return ajVar;
                }
            }
            return null;
        }
    }

    public boolean a(c cVar, String str, int i) {
        if (cVar == null) {
            com.corrodinggames.rts.gameFramework.l.b("Ban failed: No connection");
            return false;
        }
        String strF = cVar.f();
        if (strF == null) {
            cVar.b("Ban failed: No target");
            return false;
        }
        aj ajVar = new aj();
        ajVar.f564a = cVar.f();
        ajVar.b = System.currentTimeMillis() + (i * 1000);
        ajVar.c = str;
        synchronized (this.M) {
            b();
            this.M.add(ajVar);
        }
        cVar.c("Banned " + strF + " for " + i + "s");
        return true;
    }

    public void a() {
        synchronized (this.M) {
            this.M.clear();
        }
    }

    public void b() {
        synchronized (this.M) {
            int i = 0;
            long jCurrentTimeMillis = System.currentTimeMillis();
            Iterator it = this.M.iterator();
            while (it.hasNext()) {
                i++;
                boolean z = false;
                if (((aj) it.next()).b < jCurrentTimeMillis) {
                    z = true;
                }
                if (i > 1000) {
                    z = true;
                }
                if (z) {
                    it.remove();
                }
            }
        }
    }

    public String a(String str) {
        String strReplace = str.trim().replace(" ", "_");
        this.y = strReplace;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (this.y != null && !this.y.equals(lVarB.bQ.lastNetworkPlayerName)) {
            lVarB.bQ.lastNetworkPlayerName = this.y;
            lVarB.bQ.save();
        }
        return strReplace;
    }

    public void a(float f, String str) {
        if (f < 0.1d) {
            a("setCurrentStepRate:" + f + " is too small, source:" + str, true);
        } else {
            this.bI = f;
        }
    }

    public float c() {
        return this.bI;
    }

    public void d() {
        this.ah = com.corrodinggames.rts.gameFramework.l.B().bx;
        this.am.b();
        this.an = false;
    }

    public void a(as asVar) throws IOException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        asVar.c(0);
        this.ay.a(asVar);
        asVar.a(lVarB.bB);
        asVar.a(lVarB.bC);
    }

    public void a(k kVar) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        kVar.d();
        this.ay.a(kVar);
        lVarB.bB = kVar.f();
        lVarB.bC = kVar.f();
    }

    public ah e() {
        ah ahVarC;
        if (this.C) {
            ahVarC = this.ay;
        } else if (this.H) {
            ahVarC = this.ay.clone();
        } else {
            ahVarC = null;
            com.corrodinggames.rts.gameFramework.l.b("getChangeableSetup", "Clicked but not server or proxy controller");
        }
        return ahVarC;
    }

    public void f() {
        if (this.F) {
            com.corrodinggames.rts.gameFramework.l.B().bQ.aiDifficulty = this.ay.f;
        }
        if (!this.C && !this.F) {
            return;
        }
        if (this.aW) {
            com.corrodinggames.rts.gameFramework.l.g("updateAIDifficulty with gameHasBeenStarted=true");
        } else {
            for (int i = 0; i < com.corrodinggames.rts.game.n.c; i++) {
                com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i);
                if (nVarK != null) {
                    a(nVarK);
                }
            }
        }
        aq();
    }

    public void a(com.corrodinggames.rts.game.n nVar) {
        if (nVar.w) {
            nVar.c("aiDifficultyOverride=" + nVar.z);
            if (nVar.z != null) {
                nVar.x = nVar.z.intValue();
            } else {
                nVar.x = this.ay.f;
            }
        }
    }

    public boolean b(com.corrodinggames.rts.game.n nVar) {
        boolean z = false;
        if (nVar.w) {
            String str = "AI - " + b(nVar.C());
            if (!str.equals(nVar.v)) {
                nVar.v = str;
                z = true;
            }
        }
        return z;
    }

    public void a(ah ahVar) {
        if (this.C) {
            f();
            P();
            L();
            com.corrodinggames.rts.appFramework.n.o();
            return;
        }
        if (this.H) {
            b(ahVar);
        } else {
            com.corrodinggames.rts.gameFramework.l.e("applyChangedSetup but not server or proxy controller");
        }
    }

    private void b(ah ahVar) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.e("applyProxyControl");
        ah ahVar2 = this.ay;
        if (!ahVar2.b.equals(ahVar.b)) {
            lVarB.bX.k("-map '" + com.corrodinggames.rts.gameFramework.e.a.o(com.corrodinggames.rts.appFramework.i.e(ahVar.b)) + "'");
        }
        if (ahVar2.e != ahVar.e) {
            lVarB.bX.k("-revealedmap " + (!ahVar.e ? "true" : "false"));
        }
        if (ahVar2.d != ahVar.d) {
            lVarB.bX.k("-fog " + lVarB.bX.a(ahVar.d));
        }
        if (ahVar2.c != ahVar.c) {
            lVarB.bX.k("-credits " + lVarB.bX.e(ahVar.c));
        }
        if (!com.corrodinggames.rts.gameFramework.f.k(ahVar2.h, ahVar.h)) {
            lVarB.bX.k("-income " + com.corrodinggames.rts.gameFramework.f.a(ahVar.h, 1));
        }
        if (ahVar2.i != ahVar.i) {
            lVarB.bX.k("-nukes " + (!ahVar.i ? "true" : "false"));
        }
        if (ahVar2.f != ahVar.f) {
            lVarB.bX.k("-ai " + ahVar.f);
        }
        if (ahVar2.g != ahVar.g) {
            lVarB.bX.k("-startingunits " + ahVar.g);
        }
        if (ahVar2.l != ahVar.l) {
            lVarB.bX.k("-sharedControl " + (ahVar.l ? "true" : "false"));
        }
    }

    public String g() {
        if (this.ay.d == 0) {
            return "No fog";
        }
        if (this.ay.d == 1) {
            return "Basic fog";
        }
        if (this.ay.d == 2) {
            return "Line of Sight";
        }
        return "Unknown";
    }

    public String a(int i) {
        if (i == 0) {
            return "off";
        }
        if (i == 1) {
            return "basic";
        }
        if (i == 2) {
            return "los";
        }
        return "Unknown";
    }

    public String b(int i) {
        return c(i);
    }

    public String c(int i) {
        if (i == -2) {
            return "Very Easy";
        }
        if (i == -1) {
            return "Easy";
        }
        if (i == 0) {
            return "Medium";
        }
        if (i == 1) {
            return "Hard";
        }
        if (i == 2) {
            return "Very Hard";
        }
        if (i == 3) {
            return "Impossible";
        }
        return "Unknown";
    }

    public String h() {
        return d(this.ay.g);
    }

    public ArrayList i() {
        ArrayList arrayList = new ArrayList();
        for (int i = 1; i <= 4; i++) {
            arrayList.add(Integer.valueOf(i));
        }
        arrayList.addAll(com.corrodinggames.rts.game.units.custom.l.s());
        return arrayList;
    }

    public String d(int i) {
        if (i == 1) {
            return "Normal (1 builder)";
        }
        if (i == 2) {
            return "Small Army";
        }
        if (i == 3) {
            return "3 Engineers";
        }
        if (i == 4) {
            return "3 Engineers (No Command Center)";
        }
        if (i == 5) {
            return "Experimental Spider";
        }
        if (i == 9) {
            return "Custom";
        }
        com.corrodinggames.rts.game.units.custom.l lVarC = com.corrodinggames.rts.game.units.custom.l.c(i);
        if (lVarC != null) {
            return lVarC.e();
        }
        return "Unknown";
    }

    public String j() {
        if (this.ay.c == 0) {
            return "Default ($" + k() + ")";
        }
        return "$" + k();
    }

    public final int k() {
        return e(this.ay.c);
    }

    public int e(int i) {
        if (i == 0) {
            return 4000;
        }
        if (i == 1) {
            return 0;
        }
        if (i == 2) {
            return 1000;
        }
        if (i == 3) {
            return 2000;
        }
        if (i == 4) {
            return 5000;
        }
        if (i == 5) {
            return 10000;
        }
        if (i == 6) {
            return 50000;
        }
        if (i == 7) {
            return 100000;
        }
        if (i == 8) {
            return 200000;
        }
        return 999;
    }

    public String l() {
        return com.corrodinggames.rts.gameFramework.e.a.o(this.az);
    }

    public void m() {
        new com.corrodinggames.rts.gameFramework.utility.m();
        com.corrodinggames.rts.gameFramework.f.b(SlickToAndroidKeycodes.AndroidCodes.KEYCODE_TV_CONTENTS_MENU);
        aq.a(5.0f, 6.0f, 7.0f);
        ar.a(5);
        this.bg = ar.a();
        this.bf = true;
    }

    public boolean n() {
        return this.aW;
    }

    public boolean o() {
        return this.d.e();
    }

    public synchronized void a(boolean z, String str, Boolean bool) {
        this.aV = Boolean.valueOf(z);
        this.aT = str;
        this.aU = bool;
        com.corrodinggames.rts.appFramework.n.o();
    }

    void a(g gVar) {
        Iterator it = this.bi.iterator();
        while (it.hasNext()) {
            g gVar2 = (g) it.next();
            if (gVar2.f584a && gVar2.c.equals(gVar.c) && gVar2.g == gVar.g) {
                gVar2.o = p();
            }
        }
        gVar.o = p();
        this.bi.add(gVar);
        com.corrodinggames.rts.appFramework.p.l();
    }

    public long p() {
        return System.currentTimeMillis();
    }

    public ad() {
        this.aL.p = true;
        this.bj = new com.corrodinggames.rts.game.e(-3, false);
        this.bj.v = "SPECTATOR";
        this.bk = new com.corrodinggames.rts.game.e(-1, false);
        this.bk.v = "ADMIN";
    }

    public void q() {
        a(false);
    }

    public void r() {
        a(true);
    }

    public void s() {
        this.bH = false;
        this.bG = false;
        this.z = null;
        this.p = false;
        this.bs = System.currentTimeMillis();
        this.X = 0;
        this.I = 0;
        this.w = 1L;
        a(1.0f, "new");
        this.Z = 10.0f;
        this.N = false;
        this.Q = 10;
        this.R = 0;
        this.Y = false;
        this.aa = false;
        this.al = false;
        this.ak = false;
        this.ab = 0.0f;
        this.ac = 0.0f;
        this.ad = false;
        this.af = false;
        this.aW = false;
        this.aY = false;
        this.aZ = false;
        this.ba = 0.0f;
        this.aX = false;
        this.bb = false;
        this.bc = false;
        this.bd = false;
        this.be = false;
        this.ag = false;
        this.ah = -1;
        this.am.f565a = 0L;
        this.br = false;
        this.am.a();
        this.an = false;
        this.ao = true;
        this.ap = 0;
        this.aq = 0;
        this.ar = 0;
        this.at = 0.0f;
        this.bn = 0.0f;
        this.bo = 0.0f;
        this.bp = 0;
        this.bq = -1000;
        aq.i = 55;
        aq.j = 66;
    }

    public void a(boolean z) {
        this.B = false;
        this.C = false;
        this.f = null;
        this.F = false;
        this.D = false;
        this.E = null;
        this.x = false;
        this.H = false;
        this.G = false;
        this.av = false;
        this.A = false;
        s();
        this.S = null;
        this.m = 0;
        this.i = false;
        this.j = 0.0f;
        this.k = 0.0f;
        this.bz = false;
        this.aB = null;
        this.ax = com.corrodinggames.rts.gameFramework.l.B().bQ.teamUnitCapHostedGame;
        if (this.ax < 1) {
            this.ax = 1;
        }
        this.aw = this.ax;
        this.ay.g = 1;
        this.ay.h = 1.0f;
        this.ay.i = false;
        this.ay.j = false;
        this.ay.l = false;
        this.ay.c = 0;
        this.ay.m = false;
        this.ay.n = false;
        this.ay.o = true;
        this.ay.p = false;
        this.ay.q = 0;
        a();
        this.aC.c();
        com.corrodinggames.rts.gameFramework.l.B().bS.g();
        if ("<CHAT ONLY>".equals(this.ay.b)) {
            com.corrodinggames.rts.gameFramework.l.e("Chat only map selection - restarting");
            this.ay.a();
        }
        if (!z) {
            com.corrodinggames.rts.game.n.F();
        }
        com.corrodinggames.rts.game.units.custom.ag.b(this.o);
    }

    public void t() {
    }

    public synchronized void b(String str) throws InterruptedException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.e("Disconnect: " + str);
        if (this.C) {
            ar();
            n.d();
            if (this.aE != null) {
                this.aE.b();
                try {
                    if (this.aD != null) {
                        this.aD.join();
                    }
                } catch (InterruptedException e) {
                }
                this.aE = null;
                this.aD = null;
            }
            if (this.aG != null) {
                this.aG.b();
                try {
                    if (this.aF != null) {
                        this.aF.join();
                    }
                } catch (InterruptedException e2) {
                }
                this.aG = null;
                this.aF = null;
            }
            if (this.aH != null) {
                this.aH.cancel();
                this.aH = null;
                this.aI = null;
            }
            if (this.aK != null) {
                this.aK.b();
                this.aK = null;
                this.aJ = null;
            }
        }
        q(str);
        com.corrodinggames.rts.gameFramework.o.a.a().j();
        synchronized (this.bl) {
            this.B = false;
            this.C = false;
            this.F = false;
            this.f = null;
            try {
                wait(50L);
            } catch (InterruptedException e3) {
                e3.printStackTrace();
            }
            this.aW = false;
            lVarB.cb.e();
            lVarB.e();
            am();
            this.bm = false;
            this.bl.notifyAll();
        }
    }

    public void u() {
        synchronized (this.bl) {
            if (this.B) {
                this.bm = true;
                try {
                    this.bl.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public void b(c cVar) {
        this.aM.remove(cVar);
    }

    private synchronized void ay() {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            if (((c) it.next()).f580a) {
                it.remove();
            }
        }
    }

    void a(byte[] bArr, c cVar) throws IOException {
        if (!com.corrodinggames.rts.gameFramework.l.ax()) {
            Log.d("RustedWarfare", "Ignoring incoming resync tagged as debug only");
            return;
        }
        if (cVar.u) {
            Log.d("RustedWarfare", "Ignoring desync client save, as past desync was already saved");
            return;
        }
        cVar.u = true;
        Log.d("RustedWarfare", "Saving client save for debugging");
        File file = new File("desyncs/" + ("desync_" + com.corrodinggames.rts.gameFramework.f.a("d MMM yyyy HH.mm.ss") + "_" + cVar.c));
        file.getParentFile().mkdirs();
        try {
            FileOutputStream fileOutputStream = new FileOutputStream(file);
            fileOutputStream.write(bArr);
            fileOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void v() {
        if (this.br) {
            return;
        }
        com.corrodinggames.rts.gameFramework.l.e("Adding quick resync command");
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.e eVarB = lVarB.cf.b();
        eVarB.i = com.corrodinggames.rts.game.n.i;
        eVarB.r = true;
        eVarB.u = 200;
        lVarB.bX.a(eVarB);
        this.br = true;
    }

    public void w() throws IOException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        as asVar = new as();
        try {
            lVarB.ca.a(asVar);
            try {
                asVar.a();
            } catch (IOException e) {
                e.printStackTrace();
            }
            byte[] bArrD = asVar.d();
            asVar.h();
            if (this.C) {
                Iterator it = this.aM.iterator();
                while (it.hasNext()) {
                    c cVar = (c) it.next();
                    if (cVar.w) {
                        cVar.w = false;
                        cVar.v = false;
                        a(cVar, bArrD, this.l, false);
                    }
                }
            }
            com.corrodinggames.rts.gameFramework.l.e("Loading quick resync save data (bytes:" + bArrD.length + ")");
            k kVar = new k(bArrD);
            lVarB.a("Game resync (quick)...", true);
            int i = lVarB.bx;
            int i2 = lVarB.by;
            lVarB.ca.a(kVar, true, true, true);
            lVarB.bx = i;
            lVarB.by = i2;
            this.X = lVarB.bx + 1;
            this.ag = false;
            this.ah = this.X + 1;
            this.am.f565a = 0L;
            Iterator it2 = this.aM.iterator();
            while (it2.hasNext()) {
                ((c) it2.next()).v = false;
            }
            this.br = false;
            this.ar++;
            this.bn = 0.0f;
            this.bo = 0.0f;
            if (this.bp < 1) {
                this.bp++;
            }
            this.bq = lVarB.bx;
        } catch (IOException e2) {
            throw new RuntimeException(e2);
        }
    }

    public synchronized void x() {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.w) {
                throw new RuntimeException("Player: " + cVar.e() + " has complete desync");
            }
            if (cVar.v) {
                throw new RuntimeException("Player: " + cVar.e() + " has minor desync");
            }
            if (cVar.x == 0) {
                throw new RuntimeException("Player: " + cVar.e() + " has no sync matches");
            }
        }
    }

    private synchronized void e(float f) {
        com.corrodinggames.rts.gameFramework.l.B();
        boolean z = false;
        boolean z2 = false;
        boolean z3 = false;
        this.bn += f;
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.w) {
                z = true;
            }
            if (cVar.v) {
                if (this.g) {
                    com.corrodinggames.rts.gameFramework.l.e("desync_count:" + cVar.y + " lastResyncTimer:" + this.bn);
                }
                if (cVar.y < 4 || this.bn > 3600.0f) {
                    z3 = true;
                }
            }
        }
        if (z3) {
            this.bo += f;
            if (c && this.bo > 5.0f) {
                z2 = true;
            }
            if (this.bp == 0) {
                if (this.bo > 60.0f) {
                    z2 = true;
                }
            } else if (this.bp == 1) {
                if (this.bo > 420.0f) {
                    z2 = true;
                }
            } else if (this.bp == 2) {
                if (this.bo > 3600.0f) {
                    z2 = true;
                }
            } else if (this.bp == 3 && this.bo > 14400.0f) {
                z2 = true;
            }
        }
        if (as && z2) {
            com.corrodinggames.rts.gameFramework.l.e("disableDesyncFixing==true, running quick resync instead");
            z2 = false;
            z = true;
        }
        if (!z2 && z) {
            if (b) {
                v();
            } else {
                z2 = true;
            }
        }
        if (z2) {
            String str = VariableScope.nullOrMissingString;
            Iterator it2 = this.aM.iterator();
            while (it2.hasNext()) {
                c cVar2 = (c) it2.next();
                if (cVar2.w || cVar2.v) {
                    if (!str.equals(VariableScope.nullOrMissingString)) {
                        str = str + ", ";
                    }
                    str = str + cVar2.e();
                }
            }
            j("Resyncing game for " + str + "...");
            az();
            a(this.l, false, true);
        }
    }

    private void az() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        this.bn = 0.0f;
        this.bo = 0.0f;
        this.bp++;
        this.bq = lVarB.bx;
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            cVar.w = false;
            cVar.v = false;
            cVar.x = 0;
        }
    }

    public void c(String str) {
        q(str);
    }

    private void q(String str) {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            ((c) it.next()).a(str);
        }
        this.aM.clear();
        this.aN.clear();
        this.aP = 1;
        this.aO = false;
    }

    public long z() {
        return this.w;
    }

    public void a(long j) {
        this.w = j;
    }

    public boolean a(boolean z, int i) {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.p && cVar.h() && !cVar.s && !cVar.D) {
                if (z) {
                    j("Still waiting on: " + cVar.e());
                    return false;
                }
                return false;
            }
        }
        return true;
    }

    public void A() {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            cVar.C = false;
            cVar.D = false;
        }
    }

    public int B() {
        int i = 0;
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.p && cVar.h() && !cVar.s) {
                i++;
            }
        }
        return i;
    }

    public int C() {
        ArrayList arrayList = new ArrayList();
        int i = 0;
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.p && cVar.h() && !cVar.s) {
                com.corrodinggames.rts.game.e eVar = cVar.z;
                if (eVar != null) {
                    if (!arrayList.contains(eVar)) {
                        arrayList.add(eVar);
                    }
                }
                i++;
            }
        }
        return i;
    }

    public int D() {
        int i = 0;
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.p && !cVar.s) {
                i++;
            }
        }
        return i;
    }

    public int E() {
        int iC = 0 + C();
        if (!com.corrodinggames.rts.gameFramework.l.ax()) {
            iC++;
        }
        return iC;
    }

    public void d(String str) {
        Log.b("RustedWarfare", "network:" + str);
    }

    public static void e(String str) {
        com.corrodinggames.rts.gameFramework.l.e("network debug: " + str);
    }

    public void f(String str) {
        Log.d("RustedWarfare", "reportProblem:" + str);
        if (this.aW) {
            b((c) null, -1, (String) null, str);
        } else {
            b((c) null, -1, (String) null, str);
        }
    }

    public static void g(String str) {
        a(str, false);
    }

    public static void h(String str) {
        a(str, true);
    }

    public static void a(String str, boolean z) {
        String str2;
        ad adVar = com.corrodinggames.rts.gameFramework.l.B().bX;
        String str3 = "desync:" + str;
        com.corrodinggames.rts.gameFramework.l.b(str3);
        com.corrodinggames.rts.gameFramework.l.T();
        adVar.ap++;
        if (adVar.ao) {
            if (adVar.ap > 2 || as) {
                z = true;
            }
            if (adVar.ap > 10) {
                str2 = "<suppressing desync errors>";
                adVar.ao = false;
                z = true;
            } else {
                str2 = str3;
            }
            if (z) {
                str2 = "-i " + str2;
            }
            adVar.m(str2);
        }
    }

    public static void a(String str, String str2) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        lVarB.cb.a(-1, str, str2, lVarB.bx);
        if (lVarB.bS != null && lVarB.bS.h != null) {
            lVarB.bS.h.a(str, str2);
        } else {
            com.corrodinggames.rts.gameFramework.l.g("interfaceEngine/messageInterface==null");
        }
    }

    public void F() {
    }

    public void a(com.corrodinggames.rts.gameFramework.e eVar) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        eVar.c = this.X;
        eVar.g();
        lVarB.cf.b.add(eVar);
    }

    public void G() {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (!cVar.p || cVar.b() == -2 || cVar.b() > 500 || cVar.b() < 0) {
            }
        }
    }

    public void H() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        String str = VariableScope.nullOrMissingString;
        for (com.corrodinggames.rts.game.n nVar : com.corrodinggames.rts.game.n.a(true)) {
            if (nVar != null) {
                String str2 = "unnamed";
                if (nVar.v != null) {
                    str2 = nVar.v;
                }
                str = str + "" + nVar.N().toLowerCase() + " [Team " + nVar.h() + "] - " + str2 + (" " + nVar.y()) + "\n";
            }
        }
        com.corrodinggames.rts.gameFramework.l.e("showPlayerListPopup(): Showing playlist messagebox.");
        lVarB.c("Players", str);
    }

    public void a(float f) throws InterruptedException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        this.at += f;
        if (this.aZ) {
            if (this.ba > 0.0f) {
                this.ba -= f / 60.0f;
                com.corrodinggames.rts.gameFramework.l.B().bS.a("Returning to battleroom in " + ((int) this.ba) + "...", 3500);
            } else {
                com.corrodinggames.rts.gameFramework.l.e("Sending returnToBattleroomEvent...");
                this.aZ = false;
                i((c) null);
            }
        }
        if (this.aY) {
            aD();
        }
        if (this.at > 60.0f) {
            G();
            this.at = 0.0f;
        }
        if (this.aW && !this.aX) {
            this.aX = true;
            int i = 0;
            int i2 = 0;
            Iterator it = com.corrodinggames.rts.game.n.f().iterator();
            while (it.hasNext()) {
                int iA = com.corrodinggames.rts.game.n.a(((Integer) it.next()).intValue(), false);
                if (iA > i2) {
                    i2 = iA;
                }
                i++;
            }
            if (i > 2 && i2 <= 1) {
                this.bb = true;
            }
        }
        if (!this.C && !this.bH) {
            ad();
            this.bH = true;
        }
        if (this.C) {
            if (!this.aa && this.aW) {
                if (a(false, 0)) {
                    this.Z = com.corrodinggames.rts.gameFramework.f.a(this.Z, f);
                    if (this.Z == 0.0f) {
                        this.aa = true;
                        a(VariableScope.nullOrMissingString, "<All players ready>");
                        this.d.a();
                    }
                } else {
                    this.ab += f;
                    this.ac += f;
                    if (this.ab > 900.0f) {
                        this.aa = true;
                        a(VariableScope.nullOrMissingString, "Starting game without all players ready!");
                    } else if (this.ac > 180.0f) {
                        this.ac = 0.0f;
                        a(true, (int) ((900.0f - this.ab) / 60.0f));
                    }
                }
            }
            if (this.aa) {
                boolean z = false;
                if (this.ak) {
                    z = true;
                }
                if (this.al) {
                    z = true;
                }
                if (lVarB.bx >= this.X - this.R && !z) {
                    int i3 = this.X + this.Q;
                    this.O++;
                    boolean z2 = false;
                    for (int i4 = 0; i4 < com.corrodinggames.rts.game.n.c; i4++) {
                        com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i4);
                        if (nVarK != null && nVarK.V != 0 && !nVarK.B() && nVarK.V < 40) {
                            z2 = true;
                        }
                    }
                    if (lVarB.b() != 0 && lVarB.b() < 40 && !com.corrodinggames.rts.gameFramework.l.ax()) {
                        z2 = true;
                    }
                    if (z2) {
                        this.P++;
                    }
                    if (this.O > 8) {
                        float fFloatValue = 1.0f;
                        if (this.P > 4) {
                            fFloatValue = 2.0f;
                        }
                        if (this.K != null) {
                            fFloatValue = this.K.floatValue();
                        }
                        if (fFloatValue != c()) {
                            com.corrodinggames.rts.gameFramework.l.e("Changing step rate to " + fFloatValue);
                            com.corrodinggames.rts.gameFramework.e eVarB = lVarB.cf.b();
                            eVarB.i = com.corrodinggames.rts.game.n.i;
                            eVarB.r = true;
                            eVarB.s = fFloatValue;
                            a(eVarB);
                        }
                        this.O = 0;
                        this.P = 0;
                    }
                    as asVar = new as();
                    try {
                        asVar.a(i3);
                        int i5 = 0;
                        Iterator it2 = lVarB.cf.b.iterator();
                        while (it2.hasNext()) {
                            if (((com.corrodinggames.rts.gameFramework.e) it2.next()).c == this.X) {
                                i5++;
                            }
                        }
                        asVar.a(i5);
                        Iterator it3 = lVarB.cf.b.iterator();
                        while (it3.hasNext()) {
                            com.corrodinggames.rts.gameFramework.e eVar = (com.corrodinggames.rts.gameFramework.e) it3.next();
                            if (eVar.c == this.X) {
                                eVar.a(asVar);
                            }
                        }
                        au auVarB = asVar.b(10);
                        auVarB.e = true;
                        d(auVarB);
                        this.X = i3;
                    } catch (IOException e) {
                        throw new RuntimeException(e);
                    }
                }
            }
        }
        if (!lVarB.cf.d.isEmpty()) {
            Iterator it4 = lVarB.cf.d.iterator();
            while (it4.hasNext()) {
                com.corrodinggames.rts.gameFramework.e eVar2 = (com.corrodinggames.rts.gameFramework.e) it4.next();
                if (0 != 0) {
                    lVarB.cf.c.add(eVar2);
                    it4.remove();
                } else {
                    if (!eVar2.x) {
                        eVar2.b();
                    }
                    if (eVar2.a()) {
                        lVarB.cf.c.add(eVar2);
                        it4.remove();
                    }
                }
            }
        }
        if (!this.C) {
            if (!lVarB.cf.c.isEmpty()) {
                Iterator it5 = lVarB.cf.c.iterator();
                while (it5.hasNext()) {
                    com.corrodinggames.rts.gameFramework.e eVar3 = (com.corrodinggames.rts.gameFramework.e) it5.next();
                    if (!eVar3.e()) {
                        eVar3.j();
                        as asVar2 = new as();
                        try {
                            eVar3.a(asVar2);
                            d(asVar2.b(20));
                        } catch (IOException e2) {
                            throw new RuntimeException(e2);
                        }
                    }
                }
                lVarB.cf.c.clear();
            }
        } else if (!lVarB.cf.c.isEmpty()) {
            Iterator it6 = lVarB.cf.c.iterator();
            while (it6.hasNext()) {
                com.corrodinggames.rts.gameFramework.e eVar4 = (com.corrodinggames.rts.gameFramework.e) it6.next();
                if (!eVar4.e()) {
                    if (!eVar4.l()) {
                        g("Skipped command issued from server");
                    } else {
                        eVar4.j();
                        a(eVar4);
                    }
                }
            }
            lVarB.cf.c.clear();
        }
        while (!this.aN.isEmpty()) {
            au auVar = (au) this.aN.remove();
            try {
                a(auVar);
            } catch (IOException e3) {
                String strG = "None";
                c cVar = auVar.f575a;
                if (cVar != null) {
                    strG = cVar.g();
                    String message = e3.getMessage();
                    if (message == null) {
                        message = "IO error";
                    }
                    cVar.a(message);
                    g("IO error on processGamePacket for " + cVar.e());
                }
                com.corrodinggames.rts.gameFramework.l.a("Error on processGamePacket ip:" + strG, (Throwable) e3);
            }
        }
        if (this.C) {
            if (!this.B) {
                com.corrodinggames.rts.gameFramework.l.e("Skipping server updates, not networked");
            } else {
                ay();
                if (!this.aj) {
                    e(f);
                }
            }
        }
        if (this.B) {
            if (this.al) {
                lVarB.bS.b("Game paused.", 100);
            } else {
                lVarB.bS.a("Game paused.");
            }
        }
        if (lVarB.bx < this.X) {
            this.Y = false;
        }
        if (this.bm) {
            b("queDisconnect");
        }
    }

    public void b(float f) {
        c cVarW;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (lVarB != null && !this.C && this.B) {
            boolean z = false;
            Iterator it = this.aM.iterator();
            while (it.hasNext()) {
                c cVar = (c) it.next();
                if (cVar.p && !cVar.f580a) {
                    z = true;
                }
            }
            if (this.be && n()) {
                lVarB.bS.b("Game ended by server.");
                com.corrodinggames.rts.appFramework.n.o();
            } else if (!z && n()) {
                lVarB.bS.b("Server Disconnected.");
                com.corrodinggames.rts.appFramework.n.o();
            }
            if (z) {
                if ((this.Y || this.bs + 1000 < System.currentTimeMillis()) && !this.C && (cVarW = W()) != null && cVarW.U > 20000) {
                    String str = "Receiving network data: " + cVarW.V + "/" + cVarW.U;
                    com.corrodinggames.rts.gameFramework.l.e(str);
                    lVarB.bS.d(str);
                    if (!this.aW && this.bt + 4000 < System.currentTimeMillis()) {
                        this.bt = System.currentTimeMillis();
                        o(str);
                    }
                    a(cVarW, cVarW.V, cVarW.U);
                }
            }
        }
    }

    public void c(float f) throws IOException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        this.bs = System.currentTimeMillis();
        if (this.B && (this.ah + this.ai < lVarB.bx || this.ah == -1)) {
            d();
            lVarB.cb.a(this.am);
        }
        if ((this.B || lVarB.cb.j()) && this.N) {
            this.N = false;
            w();
        }
        if (this.B && this.C && !this.an && this.ah + (this.ai / 2) < lVarB.bx && this.ah != -1) {
            try {
                as asVar = new as();
                asVar.a(this.ah);
                asVar.a(this.am.f565a);
                asVar.a(this.am.b.size());
                Iterator it = this.am.b.iterator();
                while (it.hasNext()) {
                    asVar.a(((al) it.next()).b);
                }
                h(asVar.b(30));
                if (this.g) {
                    com.corrodinggames.rts.gameFramework.l.e("Sent checksum to client [" + this.ah + "]");
                }
                this.an = true;
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
    }

    public boolean I() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (lVarB.bU.e()) {
            if (!this.bu) {
                com.corrodinggames.rts.gameFramework.l.e("shouldGameBePaused: isGoingToBlockThisFrame()==true: " + lVarB.bU.f());
            }
            this.bu = true;
            return true;
        }
        if (this.bu) {
            com.corrodinggames.rts.gameFramework.l.e("shouldGameBePaused: isGoingToBlockThisFrame()==false");
        }
        this.bu = false;
        return false;
    }

    public void a(float f, boolean z) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (lVarB.bx >= this.X) {
            if (lVarB.bx > this.X) {
                throw new RuntimeException("game frame:" + lVarB.bx + " is greater then nest step:" + this.X);
            }
            this.Y = true;
        }
        if (z && I()) {
            this.Y = true;
        }
    }

    public void a(au auVar) throws IOException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (b(auVar)) {
            d("filtered packet (type:" + auVar.b + ")");
        }
        switch (auVar.b) {
            case 10:
                if (this.C) {
                    d("we are a server! we don't follow orders");
                    break;
                } else if (auVar.f575a.t) {
                    d("ignoring command");
                    break;
                } else {
                    k kVar = new k(auVar);
                    int iF = kVar.f();
                    int iF2 = kVar.f();
                    for (int i = 0; i < iF2; i++) {
                        com.corrodinggames.rts.gameFramework.e eVarB = lVarB.cf.b();
                        eVarB.c = this.X;
                        eVarB.a(kVar);
                        a(eVarB);
                    }
                    if (iF < this.X) {
                        g("New nextBlockingFrame:" + iF + " is smaller than current step:" + this.X);
                    }
                    this.X = iF;
                    break;
                }
            case 20:
                if (!this.C) {
                    d("we are not a server! skipping");
                    break;
                } else {
                    k kVar2 = new k(auVar);
                    c cVar = auVar.f575a;
                    if (!cVar.a()) {
                        com.corrodinggames.rts.game.e eVar = cVar.z;
                        if (eVar == null) {
                            d("Player is null for message ADDCLIENTCOMMAND, skipping");
                            break;
                        } else {
                            com.corrodinggames.rts.gameFramework.e eVarB2 = lVarB.cf.b();
                            eVarB2.a(kVar2);
                            eVarB2.p = eVar;
                            if (eVarB2.r) {
                                d("Got system action from client, ignoring (" + cVar.c + ")");
                                eVarB2.r = false;
                            }
                            if (eVarB2.c() == null) {
                                g("Invalid command from '" + eVar.v + "', no team found");
                                break;
                            } else if (!eVarB2.l()) {
                                g("Ignored command from '" + eVar.v + "', check failed");
                                break;
                            } else {
                                a(eVarB2);
                                break;
                            }
                        }
                    }
                }
                break;
            case 30:
                c cVar2 = auVar.f575a;
                k kVar3 = new k(auVar);
                int iF3 = kVar3.f();
                long jI = kVar3.i();
                if (this.ag) {
                    d("PACKET_SYNCCHECKSUM: skipping frame:" + iF3 + ", we were told to wait for resync");
                    break;
                } else {
                    as asVar = new as();
                    asVar.c(0);
                    asVar.a(iF3);
                    asVar.a(this.ah);
                    if (this.ah != iF3 || this.am.f565a == 0) {
                        asVar.a(false);
                        Log.d("RustedWarfare", "got remoteSyncFrame for:" + iF3 + " needed:" + this.ah + " lastSyncCheckSum:" + this.am.f565a);
                    } else {
                        asVar.a(true);
                        Log.d("RustedWarfare", "Running checksum");
                        asVar.a(jI);
                        asVar.a(this.am.f565a);
                        boolean z = false;
                        if (jI != this.am.f565a) {
                            g("Checksum doesn't match. Got:" + jI + " expected:" + this.am.f565a);
                            z = true;
                            com.corrodinggames.rts.gameFramework.l.e("--- Desync for frame: " + iF3 + " ---");
                            Iterator it = com.corrodinggames.rts.game.n.c().iterator();
                            while (it.hasNext()) {
                                ((com.corrodinggames.rts.game.n) it.next()).t();
                            }
                        } else {
                            this.aq++;
                        }
                        int iF4 = kVar3.f();
                        if (iF4 != this.am.b.size()) {
                            Log.d("RustedWarfare", "checkSumSize!=syncCheckList.size()");
                        }
                        asVar.e("checkList");
                        asVar.a(iF4);
                        asVar.a(this.am.b.size());
                        Iterator it2 = this.am.b.iterator();
                        while (it2.hasNext()) {
                            al alVar = (al) it2.next();
                            long jI2 = kVar3.i();
                            asVar.a(jI2);
                            asVar.a(alVar.b);
                            if (jI2 != alVar.b && alVar.c) {
                                g("[" + iF3 + "] check(" + alVar.f566a + "): " + jI2 + "!=" + alVar.b);
                                z = true;
                            }
                        }
                        asVar.a("checkList");
                        asVar.a(z);
                    }
                    if (!this.C) {
                        a(cVar2, asVar.b(31));
                        break;
                    }
                }
                break;
            case 31:
                if (!this.C) {
                    d("we are not a server, but got PACKET_SYNCCHECKSUM_STATUS");
                    break;
                } else {
                    c cVar3 = auVar.f575a;
                    k kVar4 = new k(auVar);
                    kVar4.d();
                    int iF5 = kVar4.f();
                    int iF6 = kVar4.f();
                    if (kVar4.e()) {
                        kVar4.i();
                        kVar4.i();
                        kVar4.b("checkList");
                        kVar4.f();
                        if (kVar4.f() != this.am.b.size()) {
                            Log.d("RustedWarfare", "checkSumSize!=syncCheckList.size()");
                        }
                        Iterator it3 = this.am.b.iterator();
                        while (it3.hasNext()) {
                            al alVar2 = (al) it3.next();
                            long jI3 = kVar4.i();
                            long jI4 = kVar4.i();
                            if (jI3 != jI4) {
                                com.corrodinggames.rts.gameFramework.l.b(alVar2.f566a + " Checksum [" + iF5 + "]. server:" + jI3 + " client:" + jI4);
                            }
                        }
                        kVar4.d("checkList");
                        boolean zE = kVar4.e();
                        if (this.bq >= iF5) {
                            d("Not marking desync, already resynced before frame: " + this.bq + "<=" + iF5);
                            break;
                        } else {
                            if (!cVar3.v && zE) {
                                cVar3.y++;
                            }
                            cVar3.v = zE;
                            if (!zE) {
                                if (this.g) {
                                    com.corrodinggames.rts.gameFramework.l.e("checksum: client checksum match [" + iF5 + "]");
                                }
                                cVar3.x++;
                                break;
                            } else {
                                com.corrodinggames.rts.gameFramework.l.e("client:" + cVar3.e() + " desync [" + iF5 + "]");
                                if (this.aj && !this.ak) {
                                    g("pauseOnDesync is active, pausing");
                                    this.ak = true;
                                    break;
                                }
                            }
                        }
                    } else if (this.g) {
                        com.corrodinggames.rts.gameFramework.l.e("checksum for:" + cVar3.e() + " frameMatch==false client:" + iF6 + " server:[" + iF5 + "]");
                        break;
                    }
                }
                break;
            case 35:
                k kVar5 = new k(auVar);
                kVar5.d();
                int iF7 = kVar5.f();
                int iF8 = kVar5.f();
                float fG = kVar5.g();
                float fG2 = kVar5.g();
                if (!this.C && fG < 0.1d) {
                    a("resync packet with setCurrentStepRate:" + fG + " is too small", true);
                }
                c cVar4 = auVar.f575a;
                if (cVar4.t) {
                    d("ignoring resync command");
                    break;
                } else {
                    boolean zE2 = kVar5.e();
                    if (kVar5.e()) {
                        if (!this.C) {
                            d("we are not a server, but got a debug game save! skipping");
                            break;
                        } else {
                            a(kVar5.c("gameSave"), cVar4);
                            break;
                        }
                    } else {
                        com.corrodinggames.rts.gameFramework.l.e("Reloading from network save");
                        if (zE2 && !this.C) {
                            a(false, true, false);
                        }
                        byte[] bArrC = kVar5.c("gameSave");
                        com.corrodinggames.rts.gameFramework.l.e("Save size: " + bArrC.length);
                        if (this.l) {
                            a(bArrC, cVar4);
                        }
                        lVarB.cb.a(bArrC, lVarB.bx, iF7, iF8, fG, fG2);
                        k kVar6 = new k(bArrC);
                        lVarB.a("Resyncing game from server...", true);
                        lVarB.ca.a(kVar6, true, true, true);
                        lVarB.Z();
                        this.ar++;
                        lVarB.bx = iF7;
                        lVarB.by = iF8;
                        this.X = iF7 + 1;
                        this.ag = false;
                        this.ah = this.X + 1;
                        this.am.f565a = 0L;
                        if (fG < 0.1d) {
                            a("resync setCurrentStepRate:" + fG + " is too small", true);
                        }
                        a(fG, "rsync");
                        this.J = fG2;
                        break;
                    }
                }
                break;
            default:
                d("we did not handle packet:" + auVar.b);
                break;
        }
    }

    public synchronized boolean b(au auVar) {
        c cVar;
        if (this.C && (cVar = auVar.f575a) != null && !cVar.p && auVar.b != 105 && auVar.b != 110 && auVar.b != 111 && auVar.b != 108 && auVar.b != 160) {
            return true;
        }
        return false;
    }

    public synchronized void c(au auVar) throws IllegalAccessException, InterruptedException, InstantiationException, IOException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        int iG;
        String strJ;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (b(auVar)) {
            d("filtered packet (type:" + auVar.b + ")");
            return;
        }
        switch (auVar.b) {
            case 4:
                c cVar = auVar.f575a;
                k kVar = new k(auVar);
                kVar.d();
                kVar.f();
                kVar.f();
                return;
            case 105:
                d("got PACKET_GET_SERVER_INFO");
                if (!this.C) {
                    d("we are not a server! skipping");
                    return;
                }
                return;
            case 106:
                if (this.C) {
                    d("we are a server! we don't follow orders");
                    return;
                }
                k kVar2 = new k(auVar);
                c cVar2 = auVar.f575a;
                kVar2.l();
                kVar2.f();
                this.ay.f562a = (ai) kVar2.b(ai.class);
                this.ay.b = kVar2.l();
                this.ay.c = kVar2.f();
                this.ay.d = kVar2.f();
                this.ay.e = kVar2.e();
                this.ay.f = kVar2.f();
                byte bD = kVar2.d();
                this.G = kVar2.e();
                this.H = kVar2.e();
                this.av = true;
                if (bD >= 1) {
                    this.aw = kVar2.f();
                    this.ax = kVar2.f();
                }
                if (bD >= 2) {
                    this.ay.g = kVar2.f();
                    this.ay.h = kVar2.g();
                    this.ay.i = kVar2.e();
                    this.ay.j = kVar2.e();
                }
                if (bD >= 3 && kVar2.e()) {
                    try {
                        com.corrodinggames.rts.game.units.custom.l.a(kVar2);
                        this.x = true;
                    } catch (bd e) {
                        b("Missing unit:" + e.getMessage() + " d:" + e.b);
                        b("Server sync mismatch", e.getMessage());
                        if (!com.corrodinggames.rts.gameFramework.l.av()) {
                            lVarB.i(e.getMessage());
                        }
                        String str = "Server sync mismatch";
                        if (e.f269a != null) {
                            str = e.f269a;
                        }
                        lVarB.d(str, e.getMessage());
                        return;
                    }
                }
                if (bD >= 4) {
                    this.ay.l = kVar2.e();
                }
                if (bD >= 5) {
                    this.ay.m = kVar2.e();
                }
                if (bD >= 6) {
                    this.ay.n = kVar2.e();
                }
                if (bD >= 7) {
                    this.ay.o = kVar2.e();
                    this.ay.p = kVar2.e();
                }
                if (bD >= 8) {
                    this.ay.q = kVar2.f();
                }
                com.corrodinggames.rts.appFramework.n.o();
                return;
            case 108:
                c cVar3 = auVar.f575a;
                k kVar3 = new k(auVar);
                long jI = kVar3.i();
                kVar3.d();
                as asVar = new as();
                asVar.a(jI);
                asVar.c(1);
                int iB = lVarB.b();
                if (iB > 130) {
                    iB = 130;
                }
                asVar.c(iB);
                a(cVar3, asVar.b(109));
                return;
            case 109:
                if (!this.C) {
                    d("we are not a server! skipping");
                    return;
                }
                long jCurrentTimeMillis = System.currentTimeMillis();
                c cVar4 = auVar.f575a;
                k kVar4 = new k(auVar);
                long jI2 = kVar4.i();
                byte bD2 = 0;
                if (kVar4.d() >= 1) {
                    bD2 = kVar4.d();
                }
                int i = (int) (jCurrentTimeMillis - jI2);
                cVar4.A = i;
                cVar4.B = jCurrentTimeMillis;
                if (cVar4.z != null) {
                    cVar4.z.W = i;
                    cVar4.z.X = jCurrentTimeMillis;
                    cVar4.z.V = bD2;
                }
                if (cVar4.q && this.C && this.D && this.z != null) {
                    this.z.W = i;
                    this.z.X = jCurrentTimeMillis;
                }
                if (!this.aW) {
                    com.corrodinggames.rts.appFramework.n.o();
                    return;
                }
                return;
            case 110:
                d("got REGISTER_CONNECTION");
                if (!this.C) {
                    d("we are not a server! skipping");
                    return;
                }
                k kVar5 = new k(auVar);
                c cVar5 = auVar.f575a;
                kVar5.l();
                int iF = kVar5.f();
                int iF2 = kVar5.f();
                int iF3 = kVar5.f();
                String strL = kVar5.l();
                String strJ2 = kVar5.j();
                String strL2 = null;
                cVar5.E = iF2;
                if (iF >= 1) {
                    cVar5.L = kVar5.l();
                }
                if (iF >= 2) {
                    strL2 = kVar5.l();
                }
                int iF4 = -1;
                if (iF >= 3) {
                    iF4 = kVar5.f();
                }
                String strL3 = "MISSING";
                if (iF >= 4) {
                    strL3 = kVar5.l();
                }
                String strL4 = VariableScope.nullOrMissingString;
                if (iF >= 5) {
                    strL4 = kVar5.l();
                }
                if (strL.length() > 20) {
                    a(cVar5, "Your username is too long");
                    cVar5.a("kicked");
                    return;
                }
                String strP = p(strL);
                if (strP.length() < 2) {
                    a(cVar5, "Your username is too short");
                    cVar5.a("kicked");
                    return;
                }
                com.corrodinggames.rts.game.e eVarA = null;
                if (strL2 != null) {
                    eVarA = com.corrodinggames.rts.game.n.a(strL2);
                    if (eVarA != null) {
                        d("Existing player: " + eVarA.k + " - " + eVarA.v);
                    }
                }
                aj ajVarA = a(cVar5);
                if (ajVarA != null) {
                    com.corrodinggames.rts.gameFramework.l.e("Connection banned for " + ajVarA.b() + " more seconds");
                    a(cVar5, ajVarA.a());
                    cVar5.a("kicked");
                    return;
                }
                String strA = this.d.a(cVar5, strP, iF2, iF3, cVar5.L, eVarA);
                if (strA != null) {
                    a(cVar5, strA);
                    cVar5.a("kicked");
                    return;
                }
                if (iF2 < this.e && !this.v) {
                    a(cVar5, "Game is out of date, please update to v" + lVarB.u());
                    cVar5.a("kicked");
                    return;
                }
                if (iF2 > this.e && !this.v) {
                    a(cVar5, "Your client is newer then the server. Server is on: v" + lVarB.u());
                    cVar5.a("kicked");
                    return;
                }
                if (!this.v && iF4 != lVarB.z()) {
                    com.corrodinggames.rts.gameFramework.l.e("New Player kicked: Unit checksum mismatch: clientUnitsChecksum=" + iF4 + " game.getAllUnitsChecksum():" + lVarB.z());
                    a(cVar5, "Your core units are different to the server's core units. Game can not be synchronized");
                    cVar5.a("kicked");
                    return;
                }
                if (!this.v) {
                    String strG = g(cVar5.M);
                    if (!strG.equals(strL3)) {
                        com.corrodinggames.rts.gameFramework.l.e("New Player kicked: Integrity Check Failed: expectedResponse=" + strG + " clientResponse=" + strL3);
                        a(cVar5, "Your 'Rusted Warfare' client is different to the server. Game can not be synchronized.");
                        cVar5.a("kicked");
                        return;
                    }
                }
                if (!this.aW && this.ay.p) {
                    a(cVar5, "Room is locked. New players cannot join this server.");
                    cVar5.a("kicked");
                    return;
                }
                if (this.aW && eVarA == null && !this.s) {
                    a(cVar5, "A game has already been started on this server");
                    cVar5.a("kicked");
                    return;
                }
                if (this.n != null && eVarA == null && !com.corrodinggames.rts.gameFramework.f.e(this.n).equals(strJ2)) {
                    if (strJ2 == null) {
                        com.corrodinggames.rts.gameFramework.l.b("processSystemPacket", "Player tried to join but needs a password");
                    } else {
                        com.corrodinggames.rts.gameFramework.l.b("processSystemPacket", "Player tried to join but had an incorrect password");
                    }
                    d(cVar5);
                    return;
                }
                if (!h(this.W).equals(strL4)) {
                    cVar5.c("no extra");
                    cVar5.N = true;
                }
                if (cVar5.z == null) {
                    synchronized (this.bC) {
                        if (eVarA == null) {
                            iG = com.corrodinggames.rts.game.n.G();
                        } else {
                            iG = eVarA.k;
                        }
                        if (iG == -1 && !this.v) {
                            a(cVar5, "No free slots on server");
                            cVar5.a("no free slots");
                            return;
                        }
                        String strA2 = this.d.a(cVar5, strP);
                        if (strA2 != null) {
                            a(cVar5, strA2);
                            cVar5.a("kicked");
                        } else {
                            aq.a(cVar5);
                            if (!this.v && cVar5.O) {
                                a(cVar5, VariableScope.nullOrMissingString);
                                cVar5.a("kicked");
                                return;
                            }
                            String str2 = null;
                            if (eVarA != null) {
                                cVar5.z = eVarA;
                                String str3 = VariableScope.nullOrMissingString;
                                if (this.aW) {
                                    if (eVarA.b()) {
                                        str3 = " (Spectator)";
                                    } else {
                                        str3 = " (Team " + eVarA.h() + ")";
                                    }
                                }
                                j("'" + cVar5.z.v + "' reconnected. " + str3);
                                cVar5.w = true;
                                str2 = eVarA.v;
                                eVarA.P = cVar5.m;
                            } else {
                                if (this.v && iG == -1) {
                                    cVar5.z = new com.corrodinggames.rts.game.e(-3);
                                } else {
                                    cVar5.z = new com.corrodinggames.rts.game.e(iG);
                                    cVar5.z.r = iG % 2;
                                }
                                if (this.aW && this.s) {
                                    cVar5.w = true;
                                }
                            }
                            if (eVarA == null && strP != null) {
                                ArrayList arrayListAx = ax();
                                int i2 = 0;
                                while (true) {
                                    if (i2 < 10) {
                                        boolean z = false;
                                        String str4 = strP;
                                        if (i2 > 0) {
                                            str4 = str4 + "(" + i2 + ")";
                                        }
                                        Iterator it = arrayListAx.iterator();
                                        while (it.hasNext()) {
                                            if (str4.equalsIgnoreCase(((com.corrodinggames.rts.game.n) it.next()).v)) {
                                                z = true;
                                            }
                                        }
                                        if (z) {
                                            i2++;
                                        } else {
                                            strP = str4;
                                        }
                                    }
                                }
                            }
                            cVar5.z.v = strP;
                            cVar5.z.O = strL2;
                            cVar5.z.P = cVar5.m;
                            cVar5.E = iF2;
                            com.corrodinggames.rts.gameFramework.l.b("processSystemPacket", "New player: " + strP + ", networkVersion:" + cVar5.E + " existing:" + (eVarA != null));
                            cVar5.p = true;
                            if (eVarA == null) {
                                this.d.a(cVar5.z);
                            }
                            com.corrodinggames.rts.appFramework.n.o();
                            e(cVar5);
                            c(cVar5);
                            this.d.c(cVar5, strP, str2);
                            if ((eVarA != null || this.s) && this.aW) {
                                a(cVar5, true);
                            }
                        }
                        return;
                    }
                }
                com.corrodinggames.rts.gameFramework.l.b("processSystemPacket", "This connection already has a player");
                return;
            case 111:
                k kVar6 = new k(auVar);
                c cVar6 = auVar.f575a;
                String strL5 = null;
                try {
                    strL5 = kVar6.l();
                } catch (IOException e2) {
                    com.corrodinggames.rts.gameFramework.l.a("Error reading disconnect reason", (Throwable) e2);
                }
                d("Got a disconnect packet:" + strL5);
                if (cVar6 != null) {
                    cVar6.a(false, false, strL5);
                }
                if (!this.C) {
                }
                return;
            case 112:
                if (!this.C) {
                    d("we are not a server! skipping");
                    return;
                }
                c cVar7 = auVar.f575a;
                k kVar7 = new k(auVar);
                cVar7.C = kVar7.e();
                cVar7.D = kVar7.e();
                return;
            case 113:
                if (this.C) {
                    d("we are a server! skipping: " + auVar.b);
                    return;
                } else {
                    a(bE);
                    return;
                }
            case 115:
                if (this.C) {
                    d("we are a server! we don't follow orders");
                    return;
                }
                k kVar8 = new k(auVar);
                kVar8.b(auVar.f575a.E);
                c cVar8 = auVar.f575a;
                int iF5 = kVar8.f();
                com.corrodinggames.rts.game.n nVar = null;
                int iF6 = 8;
                boolean zE = false;
                if (kVar8.c() >= 90) {
                    boolean z2 = false;
                    if (kVar8.c() >= 141) {
                        z2 = true;
                        zE = kVar8.e();
                    }
                    iF6 = kVar8.f();
                    com.corrodinggames.rts.game.n.b(iF6, false);
                    kVar8.a("teams", z2);
                    if (iF6 > com.corrodinggames.rts.game.n.c) {
                        throw new IOException("Cannot load:" + iF6 + " teams");
                    }
                } else if (this.aW) {
                    g("Warning old team system used in started game, stream version:" + kVar8.c());
                }
                for (int i3 = 0; i3 < iF6; i3++) {
                    com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i3);
                    if (!kVar8.e()) {
                        if (nVarK != null) {
                            if (this.aW) {
                                g("Warning team:" + i3 + " removed while game is running");
                            }
                            nVarK.I();
                        }
                    } else {
                        kVar8.f();
                        if (nVarK == null) {
                            if (this.aW) {
                                g("Warning team:" + i3 + " added while game is running");
                            }
                            if (!this.C && (nVarK instanceof com.corrodinggames.rts.game.a.a)) {
                                g("Warning we are a client with an AI team");
                            }
                            nVarK = new com.corrodinggames.rts.game.e(i3);
                        }
                        if (zE) {
                            nVarK.a(kVar8);
                        } else {
                            nVarK.a(kVar8, this.aW);
                        }
                    }
                    if (nVarK != null && nVarK.k == iF5) {
                        nVar = nVarK;
                    }
                }
                if (kVar8.c() >= 90) {
                    kVar8.d("teams");
                }
                this.z = nVar;
                this.ay.d = kVar8.f();
                this.ay.c = kVar8.f();
                this.ay.e = kVar8.e();
                this.ay.f = kVar8.f();
                byte bD3 = kVar8.d();
                this.aw = kVar8.f();
                this.ax = kVar8.f();
                if (bD3 >= 2) {
                    this.ay.g = kVar8.f();
                    this.ay.h = kVar8.g();
                    this.ay.i = kVar8.e();
                    this.ay.j = kVar8.e();
                }
                if (bD3 >= 3 && kVar8.e()) {
                    try {
                        com.corrodinggames.rts.game.units.custom.l.a(kVar8);
                        this.x = true;
                    } catch (bd e3) {
                        b("Missing unit:" + e3.getMessage() + " d:" + e3.b);
                        b("Connection Failed", e3.getMessage());
                        if (!com.corrodinggames.rts.gameFramework.l.av()) {
                            lVarB.i(e3.getMessage());
                        }
                        lVarB.d("Connection Failed", e3.getMessage());
                        return;
                    }
                }
                if (bD3 >= 4) {
                    this.ay.l = kVar8.e();
                }
                if (bD3 >= 5) {
                    this.al = kVar8.e();
                }
                com.corrodinggames.rts.appFramework.n.o();
                return;
            case 116:
                if (this.C) {
                    d("we are a server! we don't follow orders");
                    return;
                }
                k kVar9 = new k(auVar);
                c cVar9 = auVar.f575a;
                kVar9.f();
                boolean zE2 = kVar9.e();
                if (zE2 && !this.be) {
                    this.be = zE2;
                    return;
                }
                return;
            case 117:
                c cVar10 = auVar.f575a;
                if (this.C && !cVar10.q) {
                    d("we are a server! skipping: " + auVar.b);
                    return;
                }
                k kVar10 = new k(auVar);
                kVar10.d();
                int iF7 = kVar10.f();
                String strL6 = kVar10.l();
                ae aeVar = new ae();
                aeVar.d = true;
                aeVar.c = iF7;
                aeVar.b = strL6;
                a(aeVar);
                return;
            case 118:
                return;
            case 120:
                if (this.C) {
                    d("error, we are a server but got: PACKET_START_GAME");
                    return;
                }
                k kVar11 = new k(auVar);
                kVar11.d();
                this.ay.f562a = (ai) kVar11.b(ai.class);
                if (this.ay.f562a == ai.savedGame) {
                    this.aA = kVar11.u();
                } else if (this.ay.f562a == ai.customMap) {
                    this.aB = kVar11.u();
                }
                this.az = kVar11.l();
                aB();
                return;
            case 122:
                if (this.C) {
                    d("error, we are a server but got: PACKET_RETURN_TO_BATTLEROOM");
                    return;
                } else {
                    aC();
                    return;
                }
            case 140:
                if (!this.C) {
                    d("we are not a server! skipping");
                    return;
                }
                c cVar11 = auVar.f575a;
                k kVar12 = new k(auVar);
                com.corrodinggames.rts.game.e eVar = cVar11.z;
                if (eVar == null) {
                    if (cVar11.q) {
                        d("Allowing message from non player on forwarding connection");
                        eVar = this.bk;
                    } else {
                        d("player is null for message, skipping");
                        return;
                    }
                }
                String strL7 = kVar12.l();
                kVar12.d();
                String strI = i(strL7);
                if (this.d.a(cVar11, eVar.v, strI)) {
                    if (this.aC.a(cVar11, 60000) > this.h) {
                        if (com.corrodinggames.rts.gameFramework.f.a(cVar11.g, System.nanoTime()) > 60000) {
                            cVar11.g = System.nanoTime();
                            j("Anti-spam: Too many messages from '" + cVar11.e() + "'");
                        }
                        if (this.g) {
                            com.corrodinggames.rts.gameFramework.l.e("extraDebug:" + strI);
                            return;
                        }
                        return;
                    }
                    a(cVar11, eVar, eVar.v, strI);
                    this.d.b(cVar11, eVar.v, strI);
                    b(cVar11, eVar, eVar.v, strI);
                    return;
                }
                return;
            case 141:
                if (this.C && !auVar.f575a.q) {
                    d("error, we are a server but got: PACKET_RECEIVE_CHAT_FROM_SERVER");
                    return;
                }
                k kVar13 = new k(auVar);
                String strL8 = kVar13.l();
                byte bD4 = kVar13.d();
                String strJ3 = kVar13.j();
                kVar13.f();
                int iF8 = -1;
                if (bD4 >= 3) {
                    iF8 = kVar13.f();
                }
                b((c) null, iF8, strJ3, strL8);
                return;
            case 150:
                if (this.C) {
                    d("error, we are a server but got: PACKET_SEND_KICK");
                    return;
                }
                String strC = com.corrodinggames.rts.gameFramework.h.a.c(new k(auVar).l());
                d("we got kicked, reason:" + strC);
                b("I was kicked");
                b("Kicked", "Kicked: " + strC);
                lVarB.d("Kicked", "Kicked: " + strC);
                lVarB.i("Kicked: " + strC);
                return;
            case 151:
                c cVar12 = auVar.f575a;
                if (this.C && !cVar12.q) {
                    d("error, we are a server but got: 151");
                    return;
                }
                long jA = br.a();
                k kVar14 = new k(auVar);
                int iF9 = kVar14.f();
                int iF10 = kVar14.f();
                if (kVar14.e()) {
                    aq.i = kVar14.f();
                }
                if (kVar14.e()) {
                    aq.j = kVar14.f();
                }
                String strC2 = VariableScope.nullOrMissingString;
                if (iF10 == 0) {
                    strC2 = VariableScope.nullOrMissingString + aq.i;
                }
                if (iF10 == 1) {
                    strC2 = VariableScope.nullOrMissingString + aq.j;
                }
                if (iF10 == 2) {
                    strC2 = g(aq.i);
                }
                if (iF10 == 3) {
                    strC2 = com.corrodinggames.rts.gameFramework.f.c(aq.i + "|" + aq.j);
                }
                if (iF10 == 4) {
                    strC2 = com.corrodinggames.rts.gameFramework.f.c(aq.i + "|" + aq.j);
                }
                if (iF10 == 5 || iF10 == 6) {
                    String strL9 = kVar14.l();
                    String strL10 = kVar14.l();
                    int iF11 = kVar14.f();
                    if (iF10 == 6) {
                        strL10 = strL10 + aq.i;
                    }
                    if (iF11 > 10000000) {
                        strC2 = "max";
                    } else {
                        strC2 = "-1";
                        int i4 = 0;
                        while (true) {
                            if (i4 <= iF11) {
                                if (!com.corrodinggames.rts.gameFramework.f.c(strL10 + i4).equals(strL9)) {
                                    i4++;
                                } else {
                                    strC2 = VariableScope.nullOrMissingString + i4;
                                }
                            }
                        }
                    }
                }
                if (iF10 == 7) {
                    String strL11 = kVar14.l();
                    int iF12 = kVar14.f();
                    if (iF12 > 10000) {
                        strC2 = "max";
                    } else {
                        strC2 = VariableScope.nullOrMissingString;
                        for (int i5 = 0; i5 < iF12; i5++) {
                            strC2 = strC2 + strL11;
                        }
                    }
                }
                float fA = br.a(jA);
                as asVar2 = new as();
                asVar2.a(iF9);
                asVar2.a(iF10);
                asVar2.c(strC2);
                asVar2.a(fA);
                a(cVar12, asVar2.b(152));
                return;
            case 160:
                k kVar15 = new k(auVar);
                c cVar13 = auVar.f575a;
                kVar15.l();
                int iF13 = kVar15.f();
                kVar15.f();
                if (iF13 >= 1) {
                    kVar15.f();
                }
                if (cVar13.i) {
                    com.corrodinggames.rts.gameFramework.l.e("steam: request info packet");
                }
                if (iF13 >= 2 && (strJ = kVar15.j()) != null) {
                    cVar13.c("Using query string: " + strJ);
                    cVar13.o = strJ;
                }
                if (iF13 >= 3) {
                    kVar15.l();
                }
                if (iF13 >= 4) {
                    kVar15.l();
                    String strL12 = kVar15.l();
                    if (com.corrodinggames.rts.gameFramework.l.ax()) {
                        cVar13.c("Misc: " + strL12);
                    }
                }
                g(cVar13);
                return;
            case 161:
                if (this.C) {
                    d("we are a server! we don't PREREGISTER_INFO");
                    return;
                }
                k kVar16 = new k(auVar);
                c cVar14 = auVar.f575a;
                if (cVar14.i) {
                    com.corrodinggames.rts.gameFramework.l.e("steam: got info packet");
                }
                kVar16.l();
                int iF14 = kVar16.f();
                int iF15 = kVar16.f();
                kVar16.f();
                kVar16.l();
                this.S = kVar16.l();
                cVar14.E = iF15;
                if (iF14 >= 1) {
                    this.T = kVar16.f();
                }
                if (iF14 >= 2) {
                    this.U = kVar16.f();
                    this.V = kVar16.f();
                }
                if (this.bz) {
                    d("PACKET_SEND_PREREGISTER_INFO: Register connection has already been sent (resending)");
                }
                h(cVar14);
                return;
            case 163:
                if (this.C) {
                    d("we are already a server");
                    return;
                }
                k kVar17 = new k(auVar);
                kVar17.d();
                int iF16 = kVar17.f();
                kVar17.f();
                kVar17.j();
                d("Relay version: " + iF16);
                return;
            case 170:
                d("Got 'become server' packet");
                if (this.C) {
                    d("we are already a server");
                    return;
                }
                c cVar15 = auVar.f575a;
                k kVar18 = new k(auVar);
                byte bD5 = kVar18.d();
                boolean zE3 = kVar18.e();
                boolean zE4 = kVar18.e();
                String strJ4 = kVar18.j();
                boolean zE5 = kVar18.e();
                boolean zE6 = kVar18.e();
                String strJ5 = kVar18.j();
                boolean zE7 = false;
                if (bD5 >= 1) {
                    zE7 = kVar18.e();
                }
                String strJ6 = null;
                if (bD5 >= 2) {
                    strJ6 = kVar18.j();
                }
                d("Multicast:" + zE7);
                cVar15.r = zE7;
                if (zE3) {
                    cVar15.q = true;
                }
                if (zE4) {
                    cVar15.s = true;
                }
                this.D = true;
                this.E = strJ5;
                lVarB.bX.n = null;
                lVarB.bX.o = zE5;
                lVarB.bX.q = zE6;
                c(false);
                if (strJ6 != null) {
                    if (this.z != null) {
                        this.z.P = strJ6;
                    } else {
                        com.corrodinggames.rts.gameFramework.l.e("Become server: No local team");
                    }
                }
                if (lVarB.bX.q) {
                }
                if (strJ4 != null) {
                    lVarB.bQ.networkServerId = strJ4;
                }
                if (lVarB.bx > 60) {
                    this.aa = true;
                }
                if (!this.x && !this.aW) {
                    com.corrodinggames.rts.gameFramework.l.e("enableAllCustomUnitsPossible mods:" + this.o);
                    com.corrodinggames.rts.game.units.custom.ag.b(this.o);
                    this.x = true;
                    return;
                }
                return;
            case 172:
                c cVar16 = auVar.f575a;
                if (!cVar16.q) {
                    d("forwarding not allowed on this connection");
                    return;
                }
                d("got FORWARD_CLIENT_ADD");
                k kVar19 = new k(auVar);
                byte bD6 = kVar19.d();
                int iF17 = kVar19.f();
                String strL13 = kVar19.l();
                String strJ7 = kVar19.j();
                String strJ8 = null;
                if (bD6 >= 1) {
                    strJ8 = kVar19.j();
                }
                if (a(cVar16, iF17) != null) {
                    d("Not adding client:" + iF17 + " already exists");
                    return;
                }
                if (a(cVar16, iF17, strL13, strJ8) != null && strJ7 != null) {
                    com.corrodinggames.rts.game.e eVarB = com.corrodinggames.rts.game.n.b(strL13);
                    if (eVarB == null) {
                        d("PACKET_FORWARD_CLIENT_ADD: Failed to find existing player with id:" + strL13);
                        Iterator it2 = com.corrodinggames.rts.game.n.c().iterator();
                        while (it2.hasNext()) {
                            com.corrodinggames.rts.game.n nVar2 = (com.corrodinggames.rts.game.n) it2.next();
                            if (nVar2 != null) {
                                d("option: " + nVar2.v + " - " + nVar2.P + " - localPlayer:" + (this.z == nVar2));
                            }
                        }
                        return;
                    }
                    eVarB.O = strJ7;
                    return;
                }
                return;
            case 173:
                c cVar17 = auVar.f575a;
                if (!cVar17.q) {
                    d("forwarding not allowed on this connection");
                    return;
                }
                d("got FORWARD_CLIENT_REMOVE");
                k kVar20 = new k(auVar);
                kVar20.d();
                c cVarA = a(cVar17, kVar20.f());
                if (cVarA != null) {
                    b(cVarA, (String) null);
                    return;
                }
                return;
            case 174:
                c cVar18 = auVar.f575a;
                if (!cVar18.q) {
                    d("forwarding not allowed on this connection");
                    return;
                }
                k kVar21 = new k(auVar);
                int iF18 = kVar21.f();
                byte[] bArrT = kVar21.t();
                c cVarA2 = a(cVar18, iF18);
                if (cVarA2 == null) {
                    d("PACKET_FORWARD_CLIENT_FROM failed, cannot find client");
                    return;
                } else if (!(cVarA2.d instanceof h)) {
                    d("PACKET_FORWARD_CLIENT_FROM failed, socket is wrong type");
                    return;
                } else {
                    ((h) cVarA2.d).d.a(bArrT);
                    return;
                }
            case 175:
                d("got PACKET_FORWARD_CLIENT_TO");
                return;
            case 176:
                d("got PACKET_FORWARD_CLIENT_TO_REPEATED");
                return;
            case SlickToAndroidKeycodes.AndroidCodes.KEYCODE_TV_INPUT /* 178 */:
                d("got PACKET_RECONNECT_TO");
                c cVar19 = auVar.f575a;
                if (this.C && !cVar19.q) {
                    d("we are a server, ");
                    return;
                }
                k kVar22 = new k(auVar);
                kVar22.d();
                kVar22.f();
                boolean zE8 = kVar22.e();
                int iF19 = kVar22.f();
                ArrayList arrayList = new ArrayList();
                for (int i6 = 0; i6 < iF19; i6++) {
                    arrayList.add(kVar22.l());
                }
                a(arrayList, zE8);
                return;
            default:
                d("we did not handle packet:" + auVar.b);
                return;
        }
    }

    public static String i(String str) {
        if (str == null) {
            return null;
        }
        if (str.length() > 250) {
            str = str.substring(0, 250);
        }
        if (str.contains("\n")) {
            str = str.replace("\n", "?");
        }
        String strReplace = str.replace("", ".");
        boolean z = false;
        char[] charArray = strReplace.toCharArray();
        int length = charArray.length;
        int i = 0;
        while (true) {
            if (i >= length) {
                break;
            }
            if (!Character.isISOControl(charArray[i])) {
                i++;
            } else {
                z = true;
                break;
            }
        }
        if (z) {
            StringBuilder sb = new StringBuilder();
            for (char c2 : strReplace.toCharArray()) {
                if (!Character.isISOControl(c2)) {
                    sb.append(c2);
                }
            }
            strReplace = sb.toString();
        }
        return strReplace;
    }

    public void J() {
        com.corrodinggames.rts.gameFramework.l.B().bS.g.m();
    }

    public void K() {
        b((String) null, (String) null);
    }

    public void b(String str, String str2) {
        com.corrodinggames.rts.gameFramework.l.e("closeBattleroom..");
        com.corrodinggames.rts.appFramework.n.a(str, str2);
        this.d.d();
    }

    public synchronized void L() {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.p) {
                c(cVar);
            }
        }
    }

    public synchronized void c(c cVar) {
        if (!this.C) {
            d("sendServerInfo: we are not a server!");
            return;
        }
        as asVar = new as();
        try {
            asVar.c("com.corrodinggames.rts");
            asVar.a(this.e);
            asVar.a(this.ay.f562a);
            if (this.v) {
                asVar.c("<CHAT ONLY>");
            } else {
                asVar.c(this.ay.b == null ? "<NULL>" : com.corrodinggames.rts.gameFramework.e.a.o(this.ay.b));
            }
            asVar.a(this.ay.c);
            asVar.a(this.ay.d);
            asVar.a(this.ay.e);
            asVar.a(this.ay.f);
            asVar.c(8);
            asVar.a(this.d.a(cVar));
            asVar.a(this.d.b(cVar));
            asVar.a(this.aw);
            asVar.a(this.ax);
            asVar.a(this.ay.g);
            asVar.a(this.ay.h);
            asVar.a(this.ay.i);
            asVar.a(this.ay.j);
            if (this.v) {
                asVar.a(false);
            } else {
                asVar.a(true);
                com.corrodinggames.rts.game.units.custom.l.a(asVar);
            }
            asVar.a(this.ay.l);
            asVar.a(this.ay.m);
            asVar.a(this.ay.n);
            asVar.a(this.ay.o);
            asVar.a(this.ay.p);
            asVar.a(this.ay.q);
            a(cVar, asVar.b(106));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public synchronized void a(c cVar, String str) {
        if (!this.C) {
            d("sendKick: we are not a server!");
            return;
        }
        d("kicking client reason:" + str);
        as asVar = new as();
        try {
            asVar.c(str);
            a(cVar, asVar.b(150));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public synchronized void d(c cVar) {
        if (!this.C) {
            d("sendIncorrectPassword: we are not a server!");
            return;
        }
        d("sendIncorrectPassword");
        as asVar = new as();
        try {
            asVar.a(0);
            a(cVar, asVar.b(113));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public void M() {
        if (this.C) {
            for (int i = 0; i < com.corrodinggames.rts.game.n.f; i++) {
                com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i);
                if (nVarK != null) {
                    if (this.v) {
                        nVarK.ac = 0;
                    } else if (nVarK.b()) {
                        nVarK.ac = 100;
                    } else {
                        nVarK.ac = nVarK.r;
                    }
                    if (nVarK.b()) {
                        nVarK.D = -1;
                    } else {
                        int iS = nVarK.S();
                        if (nVarK.C != null) {
                            iS = nVarK.C.intValue();
                        } else if (a(iS, (com.corrodinggames.rts.game.n) null)) {
                            iS = -1;
                        }
                        nVarK.D = iS;
                    }
                }
            }
            for (int i2 = 0; i2 < com.corrodinggames.rts.game.n.f; i2++) {
                com.corrodinggames.rts.game.n nVarK2 = com.corrodinggames.rts.game.n.k(i2);
                if (nVarK2 != null && nVarK2.D == -1 && !nVarK2.b()) {
                    nVarK2.D = N();
                }
            }
        }
    }

    public int N() {
        for (int i = 0; i < 10; i++) {
            if (!f(i)) {
                return i;
            }
        }
        return -1;
    }

    public boolean f(int i) {
        for (int i2 = 0; i2 < com.corrodinggames.rts.game.n.f; i2++) {
            com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i2);
            if (nVarK != null && nVarK.D == i && !nVarK.b()) {
                return true;
            }
        }
        return false;
    }

    public boolean a(int i, com.corrodinggames.rts.game.n nVar) {
        for (int i2 = 0; i2 < com.corrodinggames.rts.game.n.f; i2++) {
            com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i2);
            if (nVarK != null && nVarK != nVar && nVarK.C != null && nVarK.C.intValue() == i && !nVarK.b()) {
                return true;
            }
        }
        return false;
    }

    public void O() throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        if (this.C) {
            long jCurrentTimeMillis = System.currentTimeMillis();
            int i = com.corrodinggames.rts.gameFramework.l.B().by;
            if (this.z != null && !this.D) {
                this.z.W = -99;
                this.z.X = jCurrentTimeMillis;
            }
            M();
            for (int i2 = 0; i2 < com.corrodinggames.rts.game.n.c; i2++) {
                com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i2);
                if (nVarK != null) {
                    nVarK.c(this.z == nVarK);
                    if (!this.aW) {
                    }
                    if (this.aW && !this.F && !nVarK.w) {
                        boolean z = false;
                        if (nVarK.B()) {
                            z = true;
                        }
                        long j = 60000;
                        if (nVarK.Z > 180000) {
                            j = 160000;
                        }
                        boolean z2 = false;
                        if (this.aa) {
                            if (nVarK.Y == -1) {
                                nVarK.Y = jCurrentTimeMillis;
                                nVarK.Z = i;
                            }
                            if ((this.ak || this.al) && !nVarK.ab) {
                                nVarK.Y = jCurrentTimeMillis;
                                nVarK.Z = i;
                            }
                            if (nVarK.Y + j < jCurrentTimeMillis) {
                                z2 = true;
                            }
                        }
                        if (nVarK.ab != z2) {
                            nVarK.ab = z2;
                        }
                        if (z2) {
                            z = true;
                            if (!nVarK.aa) {
                                if (!(nVarK.G || nVarK.F || nVarK.J || nVarK.b())) {
                                    nVarK.aa = true;
                                }
                            }
                        }
                        if (nVarK.J != z) {
                            if (z && !nVarK.G && !nVarK.F && !nVarK.I && !nVarK.b()) {
                                String str = "-t [Sharing control due to disconnect]";
                                if (z2) {
                                    str = "-t [Sharing control due to afk]";
                                }
                                com.corrodinggames.rts.gameFramework.l.e(nVarK.v + " - " + str);
                                if (com.corrodinggames.rts.game.n.a(nVarK.r, true) > 1) {
                                    a((c) null, nVarK, nVarK.v, str);
                                }
                            }
                            nVarK.J = z;
                        }
                    }
                }
            }
        }
    }

    public void P() {
        if (this.au == 0) {
            this.au = System.currentTimeMillis();
        }
    }

    public void Q() throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        this.au = 0L;
        e((c) null);
    }

    public void e(c cVar) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        if (!this.C) {
            d("sendUpdatePlayer: we are not a server!");
            return;
        }
        O();
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar2 = (c) it.next();
            if (cVar2.p) {
                as asVar = new as(cVar2.E);
                try {
                    asVar.a(cVar2.c());
                    int i = com.corrodinggames.rts.game.n.c;
                    boolean z = false;
                    if (asVar.g() >= 90) {
                        boolean z2 = false;
                        if (asVar.g() >= 141) {
                            z2 = true;
                            if (this.aW && cVar2.Q) {
                                z = true;
                            }
                            asVar.a(z);
                        }
                        asVar.a(i);
                        asVar.a("teams", z2);
                    } else {
                        i = 8;
                        if (!this.v) {
                            d("sendUpdatePlayer: warning saving with lower team count");
                        }
                    }
                    for (int i2 = 0; i2 < i; i2++) {
                        com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i2);
                        asVar.a(nVarK != null);
                        if (nVarK != null) {
                            int i3 = 0;
                            if (nVarK instanceof com.corrodinggames.rts.game.a.a) {
                                i3 = 1;
                            }
                            asVar.a(i3);
                            if (z) {
                                nVarK.c(asVar);
                            } else {
                                nVarK.b(asVar);
                            }
                        }
                    }
                    if (asVar.g() >= 90) {
                        asVar.a("teams");
                    }
                    asVar.a(this.ay.d);
                    asVar.a(this.ay.c);
                    asVar.a(this.ay.e);
                    asVar.a(this.ay.f);
                    asVar.c(5);
                    asVar.a(this.aw);
                    asVar.a(this.ax);
                    asVar.a(this.ay.g);
                    asVar.a(this.ay.h);
                    asVar.a(this.ay.i);
                    asVar.a(this.ay.j);
                    asVar.a(false);
                    asVar.a(this.ay.l);
                    asVar.a(this.al);
                    int i4 = -1;
                    if (cVar == cVar2 && cVar2.E <= 26) {
                        i4 = 1000;
                    }
                    cVar2.Q = true;
                    a(cVar2, asVar.a(115, i4));
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        }
    }

    public void a(c cVar, int i, int i2) {
        as asVar = new as();
        try {
            asVar.c(0);
            asVar.a(i);
            asVar.a(i2);
            a(cVar, asVar.b(4));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public synchronized boolean R() {
        if (S()) {
            this.p = true;
            this.ay.d = 0;
            return true;
        }
        return false;
    }

    public synchronized boolean S() throws InterruptedException {
        if (this.B) {
            b("Started singleplayer");
        }
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        r();
        this.B = true;
        this.C = true;
        this.F = true;
        this.ay.f562a = lVarB.an();
        this.ay.b = lVarB.am();
        aa();
        this.z = lVarB.bs;
        com.corrodinggames.rts.appFramework.n.o();
        this.m = lVarB.bQ.networkPort;
        d("singleplayer server started");
        return true;
    }

    private void aA() {
        this.ay.q = com.corrodinggames.rts.gameFramework.f.a(1, 1000000000);
    }

    public synchronized boolean b(boolean z) throws IllegalAccessException, InterruptedException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        if (this.B) {
            throw new RuntimeException("networking already started");
        }
        q();
        this.B = true;
        this.C = true;
        aa();
        aA();
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        c(z);
        com.corrodinggames.rts.appFramework.n.o();
        this.m = lVarB.bQ.networkPort;
        com.corrodinggames.rts.gameFramework.o.a.a().i();
        this.aE = new ao(this);
        try {
            this.aE.a(false);
            this.aD = new Thread(this.aE);
            this.aD.setDaemon(true);
            this.aD.start();
            if (1 != 0) {
                this.aG = new ao(this);
                try {
                    this.aG.a(true);
                    this.aF = new Thread(this.aG);
                    this.aF.start();
                } catch (IOException e) {
                    e.printStackTrace();
                    lVarB.a("Could not open udp port:" + this.m + ", check this port is not in use or change the port in the game settings", 1);
                    b("Could not open udp port");
                    return false;
                }
            }
            am();
            if (this.q) {
                n.b();
            }
            this.aV = null;
            if (r) {
                n.a();
            }
            d("server started");
            return true;
        } catch (IOException e2) {
            e2.printStackTrace();
            lVarB.a("Could not open tcp port:" + this.m + ", check this port is not in use or change the port in the game settings", 1);
            b("Could not open tcp port");
            return false;
        }
    }

    public void c(boolean z) {
        int iG;
        this.C = true;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (this.z == null) {
            com.corrodinggames.rts.game.e eVar = null;
            if (!z) {
                iG = com.corrodinggames.rts.game.n.G();
                if (iG == -1) {
                    throw new RuntimeException("playerId is -1 for server player");
                }
            } else {
                eVar = this.bk;
                iG = this.bk.k;
            }
            if (eVar == null) {
                eVar = new com.corrodinggames.rts.game.e(iG);
                eVar.v = this.y;
                lVarB.bs = eVar;
            }
            this.z = eVar;
        }
        if (this.aI == null) {
            com.corrodinggames.rts.gameFramework.l.e("pingerTask starting");
            this.aI = new av(this);
            this.aH = new Timer();
            this.aH.schedule(this.aI, 100L, 100L);
        } else {
            com.corrodinggames.rts.gameFramework.l.e("pingerTask already active");
        }
        com.corrodinggames.rts.appFramework.n.o();
    }

    public boolean T() {
        return com.corrodinggames.rts.gameFramework.l.B().bQ.udpInMultiplayer;
    }

    public an a(String str, boolean z, Runnable runnable) {
        an anVar = new an(str, z, runnable);
        anVar.b();
        return anVar;
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Type inference failed for: r0v104, types: [java.net.Socket] */
    public static Socket b(String str, boolean z) throws ag, NumberFormatException, IOException {
        a.a.h hVar;
        String str2;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        com.corrodinggames.rts.gameFramework.l.e("Connect to server: " + str + " (force tcp:" + z + ")");
        boolean z2 = false;
        String strTrim = str.trim();
        if (strTrim.startsWith("get|")) {
            String[] strArrSplit = strTrim.split("\\|");
            try {
                String str3 = strArrSplit[0];
                String str4 = strArrSplit[1];
                int i = Integer.parseInt(strArrSplit[2]);
                boolean z3 = Boolean.parseBoolean(strArrSplit[3]);
                Integer.parseInt(strArrSplit[4]);
                if (z3) {
                    lVarB.bX.n = null;
                    final Object obj = new Object();
                    ae aeVar = new ae() { // from class: com.corrodinggames.rts.gameFramework.j.ad.1
                        @Override // com.corrodinggames.rts.gameFramework.j.ae
                        public void a(String str5) {
                            com.corrodinggames.rts.gameFramework.l lVarB2 = com.corrodinggames.rts.gameFramework.l.B();
                            com.corrodinggames.rts.gameFramework.l.e("Entered password");
                            if (lVarB2.bX.C) {
                                com.corrodinggames.rts.gameFramework.l.a("Cannot enter a password when we are a server");
                            } else {
                                lVarB2.bX.n = str5;
                            }
                            synchronized (obj) {
                                obj.notify();
                            }
                        }

                        @Override // com.corrodinggames.rts.gameFramework.j.ae
                        public void a() {
                            synchronized (obj) {
                                obj.notify();
                            }
                        }
                    };
                    com.corrodinggames.rts.gameFramework.l.e("Asking for password..");
                    synchronized (obj) {
                        a(aeVar);
                        try {
                            obj.wait();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                    if (lVarB.bX.n == null) {
                        com.corrodinggames.rts.gameFramework.l.b("No password entered");
                        throw new ag();
                    }
                    com.corrodinggames.rts.gameFramework.l.e("Password has been entered");
                }
                String str5 = null;
                if (z3) {
                    str5 = lVarB.bX.n;
                    if (str5 == null) {
                        throw new IOException("This server requires a password but no password was provided");
                    }
                }
                final Object obj2 = new Object();
                w wVar = new w() { // from class: com.corrodinggames.rts.gameFramework.j.ad.2
                    @Override // com.corrodinggames.rts.gameFramework.j.w
                    public void a(String str6) {
                        super.a(str6);
                        synchronized (obj2) {
                            obj2.notify();
                        }
                    }

                    @Override // com.corrodinggames.rts.gameFramework.j.w
                    public void a(String str6, x xVar, Exception exc) {
                        super.a(str6, xVar, exc);
                        synchronized (obj2) {
                            obj2.notify();
                        }
                    }
                };
                synchronized (obj2) {
                    n.a(wVar, str4, i, str5);
                    try {
                        obj2.wait(15000L);
                    } catch (InterruptedException e2) {
                    }
                }
                if (wVar.b != null) {
                    throw new IOException(wVar.b);
                }
                if (wVar.f600a == null) {
                    throw new IOException("Failed to get game server info.");
                }
                return b(wVar.f600a, z);
            } catch (NumberFormatException e3) {
                e3.printStackTrace();
                throw new IOException("Bad server connect string");
            }
        }
        if (strTrim.toLowerCase(Locale.ENGLISH).endsWith(".relay")) {
            strTrim = strTrim + ".corrodinggames.com";
        }
        if (strTrim.startsWith("[TCP]")) {
            strTrim = strTrim.substring("[TCP]".length());
            z = true;
        }
        if (strTrim.length() > 4 && !strTrim.contains(":") && !strTrim.contains(".") && !strTrim.equals("localhost") && !strTrim.contains("/") && !strTrim.contains("\\")) {
            String str6 = (VariableScope.nullOrMissingString + strTrim.charAt(0)) + ".relay.corrodinggames.com/" + strTrim;
            com.corrodinggames.rts.gameFramework.l.e("Converting connect string to: " + str6);
            strTrim = str6;
        }
        lVarB.bX.L = null;
        if (strTrim.contains("/") || strTrim.contains("\\")) {
            int iIndexOf = strTrim.indexOf("/");
            int iIndexOf2 = strTrim.indexOf("\\");
            if (iIndexOf == -1) {
                iIndexOf = strTrim.length();
            }
            if (iIndexOf2 == -1) {
                iIndexOf2 = strTrim.length();
            }
            int iC = com.corrodinggames.rts.gameFramework.f.c(iIndexOf, iIndexOf2);
            String strTrim2 = strTrim.substring(iC + 1).trim();
            if (!strTrim2.equals(VariableScope.nullOrMissingString)) {
                lVarB.bX.L = strTrim2;
            }
            strTrim = strTrim.substring(0, iC);
        }
        String str7 = strTrim;
        int i2 = 5123;
        String[] strArrSplit2 = strTrim.split(":");
        if (strArrSplit2.length > 1) {
            str7 = null;
            for (int i3 = 0; i3 < strArrSplit2.length - 1; i3++) {
                if (str7 == null) {
                    str2 = VariableScope.nullOrMissingString;
                } else {
                    str2 = str7 + ":";
                }
                str7 = str2 + strArrSplit2[i3];
            }
            String str8 = strArrSplit2[strArrSplit2.length - 1];
            try {
                i2 = Integer.parseInt(str8);
            } catch (NumberFormatException e4) {
                String str9 = "Bad port number:" + str8;
                e4.printStackTrace();
                throw new IOException(str9);
            }
        }
        if (!z && lVarB.bX.T()) {
            z2 = true;
        }
        int i4 = 7000;
        com.corrodinggames.rts.gameFramework.l.e(VariableScope.nullOrMissingString);
        com.corrodinggames.rts.gameFramework.l.e("===============================");
        com.corrodinggames.rts.gameFramework.l.e("Connect to: " + strTrim);
        if (!z2) {
            hVar = new Socket();
            com.corrodinggames.rts.gameFramework.l.e("connecting to Server.. (tcp)");
        } else {
            hVar = new a.a.h();
            com.corrodinggames.rts.gameFramework.l.e("connecting to Server.. (udp)");
            i4 = 5000;
        }
        hVar.setTcpNoDelay(true);
        try {
            try {
                hVar.connect(new InetSocketAddress(InetAddress.getByName(str7), i2), i4);
                return hVar;
            } catch (UnknownHostException e5) {
                String str10 = "Failed to connect to host";
                if (z2) {
                    str10 = str10 + " (udp)";
                }
                com.corrodinggames.rts.gameFramework.l.e("UnknownHostException.." + str10);
                e5.printStackTrace();
                throw new IOException(str10, e5);
            } catch (IOException e6) {
                String str11 = "Failed to connect to host";
                if (z2) {
                    str11 = str11 + " (udp)";
                }
                String str12 = str11 + " - " + e6.getMessage();
                com.corrodinggames.rts.gameFramework.l.e("IOException.." + str12);
                e6.printStackTrace();
                throw new IOException(str12, e6);
            }
        } catch (IllegalArgumentException e7) {
            com.corrodinggames.rts.gameFramework.l.b("IllegalArgumentException..Incorrect server format");
            e7.printStackTrace();
            throw new IOException("Incorrect server format", e7);
        }
    }

    public void U() {
        final com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        final com.corrodinggames.rts.gameFramework.f.a.f fVarA = com.corrodinggames.rts.gameFramework.f.a.f.a(com.corrodinggames.rts.gameFramework.h.a.a("menus.ingame.multiplayerReconnect.message", new Object[0]), false);
        fVarA.a(com.corrodinggames.rts.gameFramework.h.a.a("menus.ingame.resume", new Object[0]), new com.corrodinggames.rts.gameFramework.f.a.k() { // from class: com.corrodinggames.rts.gameFramework.j.ad.3
            @Override // com.corrodinggames.rts.gameFramework.f.a.k
            public boolean a(com.corrodinggames.rts.gameFramework.f.a.c cVar) {
                fVarA.i();
                return true;
            }
        });
        fVarA.a(com.corrodinggames.rts.gameFramework.h.a.a("menus.ingame.reconnect", new Object[0]), new com.corrodinggames.rts.gameFramework.f.a.k() { // from class: com.corrodinggames.rts.gameFramework.j.ad.4
            @Override // com.corrodinggames.rts.gameFramework.f.a.k
            public boolean a(com.corrodinggames.rts.gameFramework.f.a.c cVar) throws InterruptedException {
                fVarA.i();
                ad.this.V();
                return true;
            }
        });
        fVarA.a(com.corrodinggames.rts.gameFramework.h.a.a("menus.ingame.disconnect", new Object[0]), new com.corrodinggames.rts.gameFramework.f.a.k() { // from class: com.corrodinggames.rts.gameFramework.j.ad.5
            @Override // com.corrodinggames.rts.gameFramework.f.a.k
            public boolean a(com.corrodinggames.rts.gameFramework.f.a.c cVar) {
                fVarA.i();
                lVarB.a(new Runnable() { // from class: com.corrodinggames.rts.gameFramework.j.ad.5.1
                    @Override // java.lang.Runnable
                    public void run() throws InterruptedException {
                        ad.this.b("already disconnected");
                        lVarB.bS.g.l();
                    }
                });
                return true;
            }
        });
        lVarB.bS.a(fVarA);
        this.bx = true;
    }

    public synchronized boolean V() throws InterruptedException {
        Socket socket = this.bv;
        if (socket == null) {
            com.corrodinggames.rts.gameFramework.l.e("reconnectToServer: lastConnectedTo==null");
            return false;
        }
        com.corrodinggames.rts.gameFramework.l.e("reconnectToServer attempted");
        if (this.B) {
            com.corrodinggames.rts.gameFramework.l.e("reconnectToServer: disconnecting");
            b("reconnecting");
        }
        if (socket.getInetAddress() == null) {
            com.corrodinggames.rts.gameFramework.l.e("reconnectToServer: lastConnectedTo.getInetAddress()==null");
            return false;
        }
        String str = socket.getInetAddress().getHostAddress() + ":" + socket.getPort();
        com.corrodinggames.rts.gameFramework.l.e("reconnectToServer: connecting to: " + str);
        try {
            return a(b(str, false));
        } catch (ag e) {
            e.printStackTrace();
            return false;
        } catch (IOException e2) {
            e2.printStackTrace();
            return false;
        }
    }

    public synchronized boolean a(Socket socket) throws IllegalAccessException, InterruptedException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        if (this.B) {
            b("starting new");
        }
        if (socket == null) {
            throw new RuntimeException("connectedSocket==null");
        }
        q();
        com.corrodinggames.rts.gameFramework.l.B();
        this.m = socket.getPort();
        this.B = true;
        this.C = false;
        d("connected to Server..");
        c cVar = new c(this, socket);
        cVar.p = true;
        cVar.d();
        this.aM.add(cVar);
        f(cVar);
        am();
        this.bv = socket;
        return true;
    }

    public c c(com.corrodinggames.rts.game.n nVar) {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.z == nVar) {
                return cVar;
            }
        }
        return null;
    }

    public c d(com.corrodinggames.rts.game.n nVar) {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (!cVar.f580a && cVar.z == nVar) {
                return cVar;
            }
        }
        return null;
    }

    public c W() {
        if (this.C) {
            return null;
        }
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (!cVar.f580a) {
                return cVar;
            }
        }
        return null;
    }

    public void d(au auVar) {
        if (!this.B) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping sendPacketToAll, not networked");
        } else {
            i(auVar);
        }
    }

    private void i(au auVar) {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.p && !cVar.f580a && !cVar.s) {
                cVar.a(auVar);
            }
        }
    }

    public void e(au auVar) {
        if (!this.B) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping sendPacketToAllIncludingRelay, not networked");
            return;
        }
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar = (c) it.next();
            if (cVar.p && !cVar.f580a) {
                cVar.a(auVar);
            }
        }
    }

    public void f(au auVar) {
        if (!this.B) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping sendPacketToServer, not networked");
        } else {
            if (this.C) {
                throw new RuntimeException("We are a server");
            }
            d(auVar);
        }
    }

    public void g(au auVar) {
        if (!this.B) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping sendPacketToClients, not networked");
        } else {
            if (!this.C) {
                throw new RuntimeException("We are not a server");
            }
            e(auVar);
        }
    }

    public void h(au auVar) {
        if (!this.B) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping sendPacketToClients, not networked");
        } else {
            if (!this.C) {
                throw new RuntimeException("We are not a server");
            }
            d(auVar);
        }
    }

    public void a(c cVar, au auVar) {
        if (!this.B) {
            com.corrodinggames.rts.gameFramework.l.e("Skipping sendPacketOnConnection, not networked");
        } else {
            cVar.a(auVar);
        }
    }

    public void X() {
        if (this.C) {
            d("registerConnection: We are a server");
        }
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            h((c) it.next());
        }
    }

    public void Y() throws SocketException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        lVarB.bQ.networkClientId = null;
        if (this.S == null) {
            com.corrodinggames.rts.gameFramework.l.e("generateNewClientId: serverUUID==null");
            this.S = "x";
        }
        Z();
        lVarB.bQ.save();
    }

    public String Z() throws SocketException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        boolean z = false;
        if (lVarB.bQ.networkClientId == null) {
            z = true;
        }
        if (!this.by) {
            this.by = true;
            if (com.corrodinggames.rts.gameFramework.l.av()) {
                String strAk = ak();
                if (!strAk.equals(lVarB.bQ.networkClientIdMachineKey)) {
                    if (lVarB.bQ.networkClientIdMachineKey != null) {
                        com.corrodinggames.rts.gameFramework.l.e("Machine appears to have changed: " + lVarB.bQ.networkClientIdMachineKey + " vs " + strAk);
                    }
                    lVarB.bQ.networkClientIdMachineKey = strAk;
                    z = true;
                }
            }
        }
        if (z) {
            com.corrodinggames.rts.gameFramework.l.e("new networkClientId needed");
            lVarB.bQ.networkClientId = UUID.randomUUID().toString();
            lVarB.bQ.save();
        }
        String str = lVarB.bQ.networkClientId;
        if (this.S == null) {
            throw new RuntimeException("getOwnClientIdHashed: serverUUID==null");
        }
        return com.corrodinggames.rts.gameFramework.f.e(str + this.S);
    }

    public void aa() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        lVarB.bQ.networkServerId = UUID.randomUUID().toString();
        lVarB.bQ.save();
    }

    public String ab() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (lVarB.bQ.networkServerId == null) {
            aa();
        }
        return lVarB.bQ.networkServerId;
    }

    public String ac() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (this.C) {
            return lVarB.bQ.networkServerId;
        }
        return this.S;
    }

    public void f(c cVar) {
        as asVar = new as();
        try {
            int i = 1;
            if (com.corrodinggames.rts.gameFramework.l.av()) {
                i = 2;
            }
            if (com.corrodinggames.rts.gameFramework.l.aZ) {
                i = 3;
            }
            asVar.c("com.corrodinggames.rts");
            asVar.a(4);
            asVar.a(this.e);
            asVar.a(i);
            asVar.b(this.L);
            asVar.c(this.y);
            asVar.c(com.corrodinggames.rts.gameFramework.h.a.c());
            String str = VariableScope.nullOrMissingString;
            if (com.corrodinggames.rts.gameFramework.l.aT) {
                str = str + "d";
            }
            asVar.c(str);
            a(cVar, asVar.b(160));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public void g(c cVar) {
        as asVar = new as();
        try {
            com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
            asVar.c("com.corrodinggames.rts");
            asVar.a(2);
            asVar.a(this.e);
            asVar.a(lVarB.c(true));
            asVar.c(lVarB.l());
            asVar.c(ab());
            asVar.a(cVar.M);
            asVar.a(this.W);
            asVar.a(0);
            a(cVar, asVar.b(161));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public void h(c cVar) {
        com.corrodinggames.rts.gameFramework.l.e("sendRegisterConnection...");
        as asVar = new as();
        try {
            asVar.c("com.corrodinggames.rts");
            asVar.a(5);
            asVar.a(this.e);
            com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
            asVar.a(lVarB.c(true));
            asVar.c(this.y);
            String strE = null;
            if (this.n != null) {
                strE = com.corrodinggames.rts.gameFramework.f.e(this.n);
            }
            asVar.b(strE);
            asVar.c(lVarB.l());
            asVar.c(Z());
            asVar.a(lVarB.z());
            asVar.c(g(this.T));
            asVar.c(h(this.U));
            a(cVar, asVar.b(110));
            this.bz = true;
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public String g(int i) {
        String str = (((((((((((VariableScope.nullOrMissingString + "c:" + i) + "m:" + ((i * 87) + 24)) + "0:" + (e(0) * 11 * i)) + "1:" + ((e(1) * 12) + i)) + "2:" + (e(2) * 13 * i)) + "3:" + ((e(3) * 14) + i)) + "4:" + (e(4) * 15 * i)) + "5:" + ((e(5) * 16) + i)) + "6:" + (e(6) * 17 * i)) + "7:" + (e(7) * 18 * i)) + "8:" + (e(8) * 19 * i)) + "t1:" + (com.corrodinggames.rts.game.n.j.o * 11.0d * i);
        int i2 = 5 * i;
        if (k() != e(this.ay.c)) {
            i2 = 7 * i;
        }
        return str + "d:" + i2;
    }

    public String h(int i) {
        return com.corrodinggames.rts.gameFramework.f.h(i);
    }

    public void ad() {
        if (this.C) {
            throw new RuntimeException("We are a server");
        }
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        as asVar = new as();
        try {
            asVar.a(this.bG);
            asVar.a(lVarB.bq);
            f(asVar.b(112));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public void j(String str) {
        if (!this.C) {
            d("cannot send sendSystemMessage:" + str + ", we are not a server");
        } else if (!this.B || this.F) {
            d("cannot send sendSystemMessage:" + str + ", not networked");
        } else {
            com.corrodinggames.rts.gameFramework.l.e("sendSystemMessage:" + str);
            a((c) null, (com.corrodinggames.rts.game.n) null, (String) null, str);
        }
    }

    public void k(String str) {
        m("-qc " + str);
    }

    public void l(String str) {
        boolean z = true;
        String lowerCase = null;
        if (str != null) {
            String strTrim = str.trim();
            if ((strTrim.startsWith("-") || strTrim.startsWith(".") || strTrim.startsWith("_")) && strTrim.length() >= 2) {
                String strTrim2 = strTrim.substring(1).trim();
                int iIndexOf = strTrim2.indexOf(" ");
                if (iIndexOf == -1) {
                    iIndexOf = strTrim2.length();
                }
                lowerCase = strTrim2.substring(0, iIndexOf).toLowerCase(Locale.ENGLISH);
            }
        }
        if ("share".equals(lowerCase)) {
            z = false;
        }
        if ("t".equals(lowerCase)) {
            z = false;
        }
        if (z) {
            str = "-t " + str;
        }
        m(str);
    }

    public void m(String str) {
        if (!this.B) {
            com.corrodinggames.rts.gameFramework.l.e("sendChatMessage: not networked:" + str);
            b((c) null, -1, (String) null, str);
        } else {
            if (this.C) {
                a((c) null, this.z, this.y, str);
                b((c) null, this.z, this.y, str);
                return;
            }
            try {
                as asVar = new as();
                asVar.c(str);
                asVar.c(0);
                f(asVar.b(140));
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
    }

    public void a(c cVar, com.corrodinggames.rts.game.n nVar, String str, String str2) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        a(cVar, nVar, str, str2, null);
    }

    public void a(c cVar, com.corrodinggames.rts.game.n nVar, String str, String str2, c cVar2) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        com.corrodinggames.rts.game.e eVar;
        try {
            boolean z = false;
            boolean z2 = false;
            String strN = n(str2);
            if ("t".equalsIgnoreCase(strN)) {
                if (nVar != null) {
                    z = true;
                    str2 = "[TEAM] " + str2.substring("-t".length());
                } else {
                    com.corrodinggames.rts.gameFramework.l.b("toOnlyTeams failed team==null");
                }
            }
            if (nVar != null && "surrender".equalsIgnoreCase(strN)) {
                z = true;
                str2 = "[TEAM] " + str2;
            }
            if (nVar != null && "i".equalsIgnoreCase(strN)) {
                z2 = true;
                str2 = "[INFO] " + str2.substring("-i".length());
            }
            if (nVar != null && "qc".equalsIgnoreCase(strN)) {
                z2 = true;
                str2 = "[COMMAND] " + str2.substring("-qc".length());
            }
            if (!z2 && nVar != null && nVar != this.bj && nVar != this.bk && !this.d.a(cVar, nVar, str2, z)) {
                z2 = true;
            }
            as asVar = new as();
            asVar.c(str2);
            asVar.c(3);
            asVar.b(str);
            asVar.a(cVar);
            int i = -1;
            if (nVar != null) {
                i = nVar.k;
            }
            asVar.a(i);
            au auVarB = asVar.b(141);
            if (z) {
                Iterator it = this.aM.iterator();
                while (it.hasNext()) {
                    c cVar3 = (c) it.next();
                    if (cVar3.p && !cVar3.f580a && (eVar = cVar3.z) != null && eVar.d(nVar)) {
                        cVar3.a(auVarB);
                    }
                }
                com.corrodinggames.rts.game.n nVar2 = this.z;
                if (nVar2 != null && nVar2.d(nVar)) {
                    b(cVar, i, str, str2);
                }
            } else if (z2) {
                com.corrodinggames.rts.gameFramework.l.b("info message:" + c(str, str2));
            } else {
                if (cVar2 != null) {
                    a(cVar2, auVarB);
                } else {
                    g(auVarB);
                }
                b(cVar, i, str, str2);
            }
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public static String n(String str) {
        if (str == null) {
            return null;
        }
        String strTrim = str.trim();
        if ((strTrim.startsWith("-") || strTrim.startsWith(".") || strTrim.startsWith("_")) && strTrim.length() >= 2) {
            String strTrim2 = strTrim.substring(1).trim();
            int iIndexOf = strTrim2.indexOf(" ");
            if (iIndexOf == -1) {
                iIndexOf = strTrim2.length();
            }
            return strTrim2.substring(0, iIndexOf).toLowerCase(Locale.ENGLISH);
        }
        return null;
    }

    public static String c(String str, String str2) {
        if (str != null) {
            return str + ": " + str2;
        }
        return str2;
    }

    public void o(String str) {
        String strC = com.corrodinggames.rts.gameFramework.h.a.c(str);
        this.aC.a(-1, null, strC, null);
        this.d.a(-1, (String) null, strC, (c) null);
        boolean z = false;
        if (this.aW) {
            z = true;
        }
        if (!this.B) {
            z = true;
        }
        if (z) {
            a((String) null, strC);
            return;
        }
        String strC2 = c((String) null, strC);
        if (!com.corrodinggames.rts.gameFramework.l.aU) {
            com.corrodinggames.rts.appFramework.n.d(strC2);
        }
    }

    private void b(c cVar, int i, String str, String str2) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        if (!this.B && str2.startsWith("-i ")) {
            return;
        }
        if (!this.B && str2.startsWith("-qc ")) {
            return;
        }
        String strC = com.corrodinggames.rts.gameFramework.h.a.c(str2);
        if (str != null) {
            if (strC != null) {
                if (strC.equals("-surrender")) {
                }
                if (this.z == null || i < 0 || this.z.k == i) {
                }
            }
            if (1 != 0) {
                d("New Message", str + ": " + strC);
            }
        }
        c cVar2 = null;
        if (this.C) {
            cVar2 = cVar;
        }
        this.aC.a(i, str, strC, cVar2);
        this.d.a(i, str, strC, cVar);
        boolean z = false;
        if (this.aW) {
            z = true;
        }
        if (!this.B) {
            z = true;
        }
        if (z) {
            a(str, strC);
            return;
        }
        String strC2 = c(str, strC);
        if (!com.corrodinggames.rts.gameFramework.l.aU) {
            com.corrodinggames.rts.appFramework.n.d(strC2);
        }
    }

    public void a(c cVar, byte[] bArr, boolean z, boolean z2) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        try {
            as asVar = new as();
            asVar.c(0);
            asVar.a(lVarB.bx);
            asVar.a(lVarB.by);
            asVar.a(c());
            asVar.a(1.0f);
            asVar.a(z);
            asVar.a(z2);
            asVar.e("gameSave");
            asVar.b(bArr);
            asVar.a("gameSave");
            a(cVar, asVar.b(35));
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public void a(boolean z, boolean z2, boolean z3) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        try {
            as asVar = new as();
            asVar.c(0);
            asVar.a(lVarB.bx);
            asVar.a(lVarB.by);
            asVar.a(c());
            asVar.a(1.0f);
            asVar.a(z);
            asVar.a(z2);
            asVar.e("gameSave");
            lVarB.ca.a(asVar);
            asVar.a("gameSave");
            if (z) {
            }
            au auVarB = asVar.b(35);
            d(auVarB);
            if (z3) {
                if (!this.C) {
                    throw new RuntimeException("sendResyncSave: reloadCreatedSave: We are not a server");
                }
                auVarB.f575a = this.aL;
                a(auVarB);
            }
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public boolean ae() throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        Q();
        L();
        return a((c) null, false);
    }

    public boolean a(c cVar, boolean z) {
        com.corrodinggames.rts.gameFramework.l.e("Sending start game....");
        if (!this.C) {
            throw new RuntimeException("We are not a server");
        }
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        as asVar = new as();
        try {
            asVar.c(0);
            asVar.a(this.ay.f562a);
            if (this.ay.f562a == ai.savedGame) {
                try {
                    lVarB.ca.a(this.ay.b, asVar);
                    asVar.c("SAVE:" + this.ay.b);
                } catch (IOException e) {
                    e.printStackTrace();
                    lVarB.c("Map error starting game", "Map error: " + e.getMessage());
                    return false;
                }
            } else if (this.ay.f562a == ai.customMap) {
                com.corrodinggames.rts.gameFramework.l.e("Starting with custom map: " + l());
                try {
                    com.corrodinggames.rts.game.b.b.a(this.az, asVar);
                    asVar.c("STEAM:" + l());
                } catch (IOException e2) {
                    e2.printStackTrace();
                    lVarB.c("Map error starting game", "Map error: " + e2.getMessage());
                    return false;
                }
            } else {
                asVar.c(l());
            }
            asVar.a(z);
            au auVarB = asVar.b(120);
            if (cVar == null) {
                g(auVarB);
            } else {
                a(cVar, auVarB);
            }
            if (!this.aW) {
                aB();
                return true;
            }
            return true;
        } catch (IOException e3) {
            throw new RuntimeException(e3);
        }
    }

    public void af() throws InterruptedException {
        this.bc = true;
        com.corrodinggames.rts.gameFramework.l.e("onStartGameFailed");
        if (this.C) {
            this.aW = false;
            j("Map load failed.");
        } else {
            b("Map load failed");
        }
    }

    private void aB() {
        this.aY = false;
        this.aW = true;
        this.bc = false;
        this.bd = false;
        com.corrodinggames.rts.gameFramework.l.e("Starting new network game (" + ac() + ")");
        if (this.q && this.C) {
            n.c();
        }
        if (!com.corrodinggames.rts.gameFramework.l.aU) {
            com.corrodinggames.rts.appFramework.n.p();
        }
        this.d.b();
    }

    public void ag() {
        d(5.0f);
    }

    public void d(float f) {
        if (!this.C) {
            throw new RuntimeException("We are not a server");
        }
        if (this.aZ) {
            return;
        }
        com.corrodinggames.rts.gameFramework.l.e("Setting up return to battleroom timer...");
        this.ba = f;
        this.aZ = true;
        j("Game ended by host. Returning to battleroom in " + ((int) f) + " seconds...");
    }

    public void i(c cVar) {
        if (!this.C) {
            throw new RuntimeException("We are not a server");
        }
        try {
            as asVar = new as();
            asVar.c(0);
            au auVarB = asVar.b(122);
            if (cVar == null) {
                h(auVarB);
            } else {
                a(cVar, auVarB);
            }
            aC();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    private void aC() {
        this.aY = true;
    }

    private void aD() {
        com.corrodinggames.rts.gameFramework.l.e("----- returnToBattleroom -----");
        this.aY = false;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        lVarB.cb.e();
        com.corrodinggames.rts.game.n nVar = this.z;
        lVarB.g();
        s();
        this.z = nVar;
        lVarB.bx = 0;
        lVarB.by = 0;
        A();
        com.corrodinggames.rts.game.n.n();
        if (this.C) {
            aA();
        }
        J();
        if (this.q && this.C) {
            n.c();
        }
        if (!com.corrodinggames.rts.gameFramework.l.aU) {
        }
    }

    public String ah() throws SocketException {
        ArrayList arrayListAj = aj();
        if (arrayListAj == null || arrayListAj.size() == 0) {
            return null;
        }
        return (String) arrayListAj.get(0);
    }

    public String ai() throws SocketException {
        ArrayList arrayListAj = aj();
        if (arrayListAj == null || arrayListAj.size() == 0) {
            return null;
        }
        String str = VariableScope.nullOrMissingString;
        boolean z = true;
        Iterator it = arrayListAj.iterator();
        while (it.hasNext()) {
            String str2 = (String) it.next();
            if (z) {
                z = false;
            } else {
                str = str + ", ";
            }
            str = str + str2;
        }
        return str;
    }

    public ArrayList aj() throws SocketException {
        ArrayList arrayListD;
        if (bA != null) {
            return new ArrayList(bA);
        }
        long jA = br.a();
        ArrayList arrayListD2 = d(true);
        if (arrayListD2 != null && arrayListD2.size() > 0) {
            arrayListD = arrayListD2;
        } else {
            arrayListD = d(false);
        }
        double dA = br.a(jA);
        if (dA > 2.0d) {
            com.corrodinggames.rts.gameFramework.l.b("getLocalIpAddressList was slow, taking:" + br.a(dA));
        }
        if (dA > 10.0d && arrayListD != null && arrayListD.size() > 0) {
            com.corrodinggames.rts.gameFramework.l.e("getLocalIpAddressList: creating cache");
            bA = new ArrayList(arrayListD);
        }
        return arrayListD;
    }

    public String ak() throws SocketException {
        String str = null;
        try {
            Enumeration<NetworkInterface> networkInterfaces = NetworkInterface.getNetworkInterfaces();
            while (true) {
                if (!networkInterfaces.hasMoreElements()) {
                    break;
                }
                byte[] hardwareAddress = networkInterfaces.nextElement().getHardwareAddress();
                if (hardwareAddress != null) {
                    String strTrim = new String(hardwareAddress).trim();
                    if (strTrim.length() > 2) {
                        str = strTrim;
                        break;
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        if (str != null) {
            return com.corrodinggames.rts.gameFramework.f.c(str);
        }
        return "[blank]";
    }

    public ArrayList d(boolean z) throws SocketException {
        ArrayList arrayList = new ArrayList();
        try {
            Enumeration<NetworkInterface> networkInterfaces = NetworkInterface.getNetworkInterfaces();
            while (networkInterfaces.hasMoreElements()) {
                Enumeration<InetAddress> inetAddresses = networkInterfaces.nextElement().getInetAddresses();
                while (inetAddresses.hasMoreElements()) {
                    InetAddress inetAddressNextElement = inetAddresses.nextElement();
                    if (!inetAddressNextElement.isLoopbackAddress()) {
                        String string = inetAddressNextElement.getHostAddress().toString();
                        if (!string.contains("%")) {
                            if (!z) {
                                arrayList.add(string);
                            } else if (string.contains(".")) {
                                arrayList.add(string);
                            }
                        }
                    }
                }
            }
        } catch (SocketException e) {
            Log.d("RustedWarfare", e.toString());
        }
        return arrayList;
    }

    InetAddress al() {
        try {
            DhcpInfo dhcpInfo = ((WifiManager) com.corrodinggames.rts.gameFramework.l.B().am.c("wifi")).getDhcpInfo();
            int i = (dhcpInfo.ipAddress & dhcpInfo.netmask) | (dhcpInfo.netmask ^ (-1));
            byte[] bArr = new byte[4];
            for (int i2 = 0; i2 < 4; i2++) {
                bArr[i2] = (byte) ((i >> (i2 * 8)) & 255);
            }
            return InetAddress.getByAddress(bArr);
        } catch (UnknownHostException e) {
            e.printStackTrace();
            return null;
        }
    }

    public void d(String str, String str2) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        if (com.corrodinggames.rts.gameFramework.l.aU) {
            return;
        }
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (this.F || lVarB.cb.j()) {
            return;
        }
        boolean zL = com.corrodinggames.rts.appFramework.n.l();
        com.corrodinggames.rts.appFramework.f fVar = lVarB.ao;
        if (fVar != null && !fVar.e()) {
            zL = true;
        }
        if (zL) {
            if (this.bB) {
                i(2);
                return;
            }
            return;
        }
        NotificationManager notificationManager = (NotificationManager) lVarB.am.c("notification");
        PendingIntent activity = PendingIntent.getActivity(lVarB.am, 0, new Intent(lVarB.am, (Class<?>) com.corrodinggames.rts.appFramework.a.class), 2);
        if (Build.VERSION.SDK_INT >= 11) {
            Notification.Builder builder = new Notification.Builder(lVarB.am);
            builder.setContentTitle("Rusted Warfare Multiplayer");
            builder.setContentText(str + ": " + str2);
            builder.setSmallIcon(R.drawable.icon);
            builder.setContentIntent(activity);
            builder.setOngoing(false);
            builder.setAutoCancel(true);
            a(notificationManager);
            a(builder, "multiplayerChatId");
            notificationManager.notify(2, builder.getNotification());
            this.bB = true;
        }
    }

    public void am() throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (this.B && lVarB != null && lVarB.M()) {
            aE();
        } else {
            i(1);
            i(2);
        }
    }

    private void a(Notification.Builder builder, String str) throws IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        if (Build.VERSION.SDK_INT >= 26) {
            try {
                builder.getClass().getDeclaredMethod("setChannelId", String.class).invoke(builder, str);
            } catch (Exception e) {
                com.corrodinggames.rts.gameFramework.l.a("setChannelId failed", (Throwable) e);
            }
        }
    }

    private void a(NotificationManager notificationManager) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        a(notificationManager, "multiplayerChatId", "Multiplayer Chat");
        a(notificationManager, "multiplayerStatusId", "Multiplayer Status");
    }

    private void a(NotificationManager notificationManager, String str, String str2) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        if (Build.VERSION.SDK_INT >= 26) {
            try {
                Class<?> cls = Class.forName("android.app.NotificationChannel");
                notificationManager.getClass().getDeclaredMethod("createNotificationChannel", cls).invoke(notificationManager, cls.getDeclaredConstructor(String.class, CharSequence.class, Integer.TYPE).newInstance(str, str2, 3));
            } catch (Exception e) {
                com.corrodinggames.rts.gameFramework.l.a("Creating notification channel failed", (Throwable) e);
            }
        }
    }

    private void aE() throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        if (com.corrodinggames.rts.gameFramework.l.aU) {
            return;
        }
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        PendingIntent activity = PendingIntent.getActivity(lVarB.am, 0, new Intent(lVarB.am, (Class<?>) com.corrodinggames.rts.appFramework.a.class), 2);
        NotificationManager notificationManager = (NotificationManager) lVarB.am.c("notification");
        if (Build.VERSION.SDK_INT >= 11) {
            if (Build.VERSION.SDK_INT >= 26) {
            }
            Notification.Builder builder = new Notification.Builder(lVarB.am);
            builder.setContentTitle("Rusted Warfare Multiplayer");
            builder.setContentText("A multiplayer game is in progress");
            builder.setSmallIcon(R.drawable.icon);
            builder.setContentIntent(activity);
            builder.setOngoing(true);
            a(notificationManager);
            a(builder, "multiplayerStatusId");
            if (Build.VERSION.SDK_INT >= 16) {
                builder.build();
            }
            notificationManager.notify(1, builder.getNotification());
        }
    }

    private void i(int i) {
        if (com.corrodinggames.rts.gameFramework.l.aU) {
            return;
        }
        ((NotificationManager) com.corrodinggames.rts.gameFramework.l.B().am.c("notification")).cancel(i);
    }

    public int an() {
        int i = 0;
        for (int i2 = 0; i2 < com.corrodinggames.rts.game.n.c; i2++) {
            com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i2);
            if (nVarK != null && !nVarK.w) {
                i++;
            }
        }
        return i;
    }

    public int ao() {
        int i = 0;
        for (int i2 = 0; i2 < com.corrodinggames.rts.game.n.c; i2++) {
            if (com.corrodinggames.rts.game.n.k(i2) != null) {
                i++;
            }
        }
        return i;
    }

    public void e(com.corrodinggames.rts.game.n nVar) {
        if (this.C) {
            f(nVar);
        } else if (this.H) {
            k("-kick " + (nVar.k + 1));
        } else {
            com.corrodinggames.rts.gameFramework.l.b("kickTeamAndAttachedPlayer: but not server or proxy controller");
        }
    }

    public void f(com.corrodinggames.rts.game.n nVar) {
        if (nVar instanceof com.corrodinggames.rts.game.a.a) {
            nVar.I();
        } else {
            if (this.z == nVar) {
                com.corrodinggames.rts.gameFramework.l.b("kickTeamAndAttachedPlayer", "Cannot kick self");
                return;
            }
            c cVarC = c(nVar);
            if (cVarC == null) {
                g("Kick player: cannot find connection for team");
            } else {
                int i = com.corrodinggames.rts.gameFramework.l.B().bQ.banTimeInSecondsAfterKick;
                if (i > 0) {
                    a(cVarC, "Temporarily banned due to recent kick", i);
                }
                a(cVarC, "Kicked by host");
                cVarC.a("Kicked by host");
            }
            nVar.I();
        }
        P();
        com.corrodinggames.rts.appFramework.n.o();
    }

    public void ap() throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (!this.C) {
            com.corrodinggames.rts.gameFramework.l.b("addAIToGame", "We are not a server");
            return;
        }
        int iG = com.corrodinggames.rts.game.n.G();
        if (iG == -1) {
            lVarB.a("No free slots for AI", 1);
        }
        com.corrodinggames.rts.game.a.a aVar = new com.corrodinggames.rts.game.a.a(iG);
        aVar.v = "AI";
        aVar.r = iG % 2;
        aVar.x = this.ay.f;
        aq();
        lVarB.bX.d.a(aVar);
        lVarB.bX.e((c) null);
        com.corrodinggames.rts.appFramework.n.o();
    }

    public boolean aq() {
        if (!this.C && this.B) {
            com.corrodinggames.rts.gameFramework.l.b("updateNamesOfAI", "We are not a server");
            return false;
        }
        boolean z = false;
        for (int i = 0; i < com.corrodinggames.rts.game.n.c; i++) {
            com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i);
            if (nVarK != null && b(nVarK)) {
                z = true;
            }
        }
        return z;
    }

    public void a(com.corrodinggames.rts.game.n nVar, int i) {
        synchronized (this.bC) {
            c(nVar, i);
        }
    }

    private void c(com.corrodinggames.rts.game.n nVar, int i) {
        if (nVar.k != i) {
            int i2 = nVar.k;
            int i3 = nVar.r;
            boolean z = false;
            if (i == -3) {
                z = true;
                i = com.corrodinggames.rts.game.n.H();
                if (i == -1) {
                    e("No free spectator slots");
                    return;
                }
            }
            com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i);
            nVar.f(i);
            nVar.r = i3;
            if (z) {
                nVar.r = -3;
            }
            if (nVarK != null) {
                int i4 = nVarK.r;
                nVarK.f(i2);
                if (i4 == -3) {
                    nVarK.r = -3;
                } else {
                    nVarK.r = i3;
                }
            }
            M();
            P();
        }
    }

    public void a(am amVar) {
        synchronized (this.bC) {
            b(amVar);
        }
    }

    private synchronized void b(am amVar) {
        if (!com.corrodinggames.rts.gameFramework.l.B().bX.C) {
            com.corrodinggames.rts.gameFramework.l.e("Not server");
            return;
        }
        if (amVar == am.layout_2sides) {
            ArrayList arrayList = new ArrayList();
            for (int i = 0; i < com.corrodinggames.rts.game.n.c; i++) {
                com.corrodinggames.rts.game.n nVarK = com.corrodinggames.rts.game.n.k(i);
                if (nVarK != null) {
                    arrayList.add(nVarK);
                }
            }
            Collections.shuffle(arrayList);
            int size = arrayList.size() / 2;
            if (arrayList.size() % 2 != 0) {
                size += com.corrodinggames.rts.gameFramework.f.a(0, 1);
            }
            if (size >= arrayList.size()) {
                size = arrayList.size();
            }
            int i2 = 0;
            for (int i3 = 0; i3 < size; i3++) {
                ((com.corrodinggames.rts.game.n) arrayList.get(i3)).f(i2);
                i2 += 2;
                ((com.corrodinggames.rts.game.n) arrayList.get(i3)).r = 0;
            }
            int i4 = 1;
            for (int i5 = 0 + size; i5 < arrayList.size(); i5++) {
                ((com.corrodinggames.rts.game.n) arrayList.get(i5)).f(i4);
                i4 += 2;
                ((com.corrodinggames.rts.game.n) arrayList.get(i5)).r = 1;
            }
        } else if (amVar == am.layout_3sides) {
            ArrayList arrayList2 = new ArrayList();
            for (int i6 = 0; i6 < com.corrodinggames.rts.game.n.c; i6++) {
                com.corrodinggames.rts.game.n nVarK2 = com.corrodinggames.rts.game.n.k(i6);
                if (nVarK2 != null) {
                    arrayList2.add(nVarK2);
                }
            }
            Collections.shuffle(arrayList2);
            int size2 = arrayList2.size() / 3;
            if (size2 >= arrayList2.size()) {
                size2 = arrayList2.size();
            }
            int i7 = 0;
            for (int i8 = 0; i8 < size2; i8++) {
                com.corrodinggames.rts.game.n nVar = (com.corrodinggames.rts.game.n) arrayList2.get(i8);
                nVar.f(i7);
                nVar.r = 0;
                i7 += 3;
                arrayList2.set(i8, null);
            }
            int size3 = 0 + size2;
            int size4 = size3 + (arrayList2.size() / 3);
            if (size4 >= arrayList2.size()) {
                size4 = arrayList2.size();
            }
            if (size3 >= arrayList2.size()) {
                size3 = arrayList2.size();
            }
            int i9 = 1;
            for (int i10 = size3; i10 < size4; i10++) {
                com.corrodinggames.rts.game.n nVar2 = (com.corrodinggames.rts.game.n) arrayList2.get(i10);
                nVar2.f(i9);
                nVar2.r = 1;
                i9 += 3;
                arrayList2.set(i10, null);
            }
            int size5 = size3 + size2;
            if (size5 >= arrayList2.size()) {
                size5 = arrayList2.size();
            }
            int i11 = 2;
            for (int i12 = size5; i12 < arrayList2.size(); i12++) {
                com.corrodinggames.rts.game.n nVar3 = (com.corrodinggames.rts.game.n) arrayList2.get(i12);
                if (i11 >= com.corrodinggames.rts.game.n.c) {
                    nVar3.f(i11);
                    nVar3.r = 2;
                    i11 += 3;
                    arrayList2.set(i12, null);
                }
            }
            for (int i13 = 0; i13 < arrayList2.size(); i13++) {
                com.corrodinggames.rts.game.n nVar4 = (com.corrodinggames.rts.game.n) arrayList2.get(i13);
                if (nVar4 != null) {
                    for (int i14 = 0; i14 < com.corrodinggames.rts.game.n.c; i14++) {
                        if (com.corrodinggames.rts.game.n.k(i14) == null) {
                            nVar4.f(i14);
                            nVar4.r = 2;
                            arrayList2.set(i13, null);
                        }
                    }
                }
            }
        } else if (amVar == am.layout_ffa) {
            ArrayList arrayList3 = new ArrayList();
            for (int i15 = 0; i15 < com.corrodinggames.rts.game.n.c; i15++) {
                com.corrodinggames.rts.game.n nVarK3 = com.corrodinggames.rts.game.n.k(i15);
                if (nVarK3 != null) {
                    arrayList3.add(nVarK3);
                }
            }
            Collections.shuffle(arrayList3);
            int i16 = 0;
            for (int i17 = 0; i17 < arrayList3.size(); i17++) {
                ((com.corrodinggames.rts.game.n) arrayList3.get(i17)).f(i16);
                ((com.corrodinggames.rts.game.n) arrayList3.get(i17)).r = i16;
                i16++;
            }
        } else if (amVar == am.layout_spectators) {
            ArrayList arrayList4 = new ArrayList();
            for (int i18 = 0; i18 < com.corrodinggames.rts.game.n.c; i18++) {
                com.corrodinggames.rts.game.n nVarK4 = com.corrodinggames.rts.game.n.k(i18);
                if (nVarK4 != null) {
                    arrayList4.add(nVarK4);
                }
            }
            Collections.shuffle(arrayList4);
            int i19 = 0;
            for (int i20 = 0; i20 < arrayList4.size(); i20++) {
                int iH = com.corrodinggames.rts.game.n.H();
                if (iH != -1) {
                    ((com.corrodinggames.rts.game.n) arrayList4.get(i20)).f(iH);
                }
                ((com.corrodinggames.rts.game.n) arrayList4.get(i20)).r = -3;
                i19++;
            }
        } else {
            throw new RuntimeException("overrideTeamLayout: unhandled layout: " + amVar);
        }
        M();
    }

    public void a(com.corrodinggames.rts.game.n nVar, int i, Integer num) {
        String str = VariableScope.nullOrMissingString;
        if (num != null) {
            str = " " + num;
        }
        if (!this.H && this.z == nVar) {
            k("-self_move " + (i + 1) + str);
        } else {
            k("-move " + (nVar.k + 1) + " " + (i + 1) + str);
        }
    }

    public void b(com.corrodinggames.rts.game.n nVar, int i) {
        if (i != -1) {
            i++;
        }
        if (!this.H && this.z == nVar) {
            k("-self_team " + i);
        } else {
            k("-team " + (nVar.k + 1) + " " + i);
        }
    }

    public void g(com.corrodinggames.rts.game.n nVar) {
        if (!nVar.H) {
            nVar.H = true;
            String str = nVar.v;
            if (str == null) {
                str = "Player - " + (nVar.k + 1) + VariableScope.nullOrMissingString;
            }
            j(str + " is victorious!");
        }
    }

    public void h(com.corrodinggames.rts.game.n nVar) {
        String str;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        boolean z = false;
        String str2 = nVar.v;
        if (str2 == null) {
            str2 = "Player - " + (nVar.k + 1) + VariableScope.nullOrMissingString;
        }
        String str3 = str2 + " was defeated";
        if (!this.bb) {
            str = str3 + " (Team: " + nVar.h() + ")";
        } else {
            int iG = com.corrodinggames.rts.game.n.g();
            str = str3 + " (" + iG + " players remaining)";
            if (iG == 1) {
                z = true;
            }
        }
        if (!lVarB.N() && lVarB.bx < 60) {
            com.corrodinggames.rts.gameFramework.l.e("Not showing defeated message: " + str);
            str = null;
        }
        if (nVar.E) {
            str = null;
        }
        if (str != null) {
            j(str);
        }
        if (z) {
            com.corrodinggames.rts.game.n.Q();
        }
    }

    public void i(com.corrodinggames.rts.game.n nVar) {
        String str;
        String str2;
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        String str3 = nVar.v;
        if (str3 == null) {
            str3 = "Player - " + (nVar.k + 1) + VariableScope.nullOrMissingString;
        }
        boolean z = false;
        if (lVarB.bx < 10) {
            str = str3 + " had no starting units";
        } else {
            str = str3 + " has been wiped out";
        }
        if (!this.bb) {
            str2 = str + " (Team: " + nVar.h() + ")";
        } else {
            int iG = com.corrodinggames.rts.game.n.g();
            str2 = str + " (" + iG + " players remaining)";
            if (iG == 1) {
                z = true;
            }
        }
        if (!lVarB.N() && lVarB.bx < 60) {
            com.corrodinggames.rts.gameFramework.l.e("Not showing defeated message: " + str2);
            str2 = null;
        }
        if (nVar.E) {
            str2 = null;
        }
        if (nVar.b()) {
            str2 = null;
        }
        if (str2 != null) {
            j(str2);
        }
        if (z) {
            com.corrodinggames.rts.game.n.Q();
        }
    }

    public synchronized void ar() {
        if (this.bD != null) {
            this.bD.cancel();
            this.bD = null;
        }
    }

    public synchronized void as() {
        if (this.q && this.C && this.bD == null) {
            this.bD = new Timer();
            this.bD.schedule(new TimerTask() { // from class: com.corrodinggames.rts.gameFramework.j.ad.6
                @Override // java.util.TimerTask, java.lang.Runnable
                public void run() {
                    n.c();
                }
            }, 60000L, 60000L);
        }
    }

    public String at() throws SocketException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        String str = VariableScope.nullOrMissingString;
        if (lVarB.bX.C && !lVarB.bX.F) {
            String strAi = lVarB.bX.ai();
            if (this.D) {
                if (this.E != null) {
                    str = str + this.E;
                }
            } else if (strAi != null) {
                String str2 = "Local IP address: " + strAi + " port: " + lVarB.bX.m;
                if (lVarB.bX.aV != null) {
                    if (!lVarB.bX.aV.booleanValue()) {
                        str2 = str2 + "\nUnable to get a public IP address, check your internet connection";
                    } else if (lVarB.bX.aT != null && lVarB.bX.aU != null) {
                        str2 = str2 + "\nYour public address is " + (lVarB.bX.aU.booleanValue() ? "<Open>" : "<CLOSED>") + " to the internet";
                    }
                } else {
                    str2 = str2 + "\nRetrieving your public IP...";
                }
                str = str + str2;
            } else {
                str = str + "You do not have a network connection";
            }
        }
        if (lVarB.P()) {
            if (this.p) {
                str = str + "SandBox Mode!\nPlace any unit, Control all teams, Special powers";
            } else {
                str = str + "Local skirmish";
            }
        }
        boolean z = true;
        if (com.corrodinggames.rts.gameFramework.l.at() && lVarB.bX.C) {
            z = false;
        }
        if (str.length() != 0) {
            str = str + "\n";
            if (com.corrodinggames.rts.gameFramework.l.av()) {
                str = str + "\n";
            }
        }
        if (lVarB.bX.av || lVarB.bX.C) {
            if (z) {
                if (lVarB.bX.ay.f562a != null) {
                    str = str + "Game Mode: " + lVarB.bX.ay.f562a.a();
                }
                if (lVarB.bX.ay.b != null) {
                    str = str + "\nMap: " + com.corrodinggames.rts.appFramework.i.e(lVarB.bX.ay.b);
                }
            }
            str = (str + "\nStarting Credits: " + lVarB.bX.j()) + "\nFog: " + lVarB.bX.g();
            if (lVarB.bX.ay.g != 1) {
                str = str + "\nStarting Units: " + lVarB.bX.h();
            }
            if (lVarB.bX.ay.h != 1.0f) {
                str = str + "\n" + com.corrodinggames.rts.gameFramework.f.a(lVarB.bX.ay.h, 1) + "X income";
            }
            if (lVarB.bX.ay.i) {
                str = str + "\nNo nukes";
            }
            if (lVarB.bX.ay.l) {
                str = str + "\nShared control: On";
            }
            if (this.C) {
                if (lVarB.bX.n != null) {
                    str = str + "\nPassword Protection: On";
                }
                if (!lVarB.bX.q && !lVarB.bX.F) {
                    str = str + "\nServer Visibility: Hidden";
                }
                if (lVarB.bX.o && !lVarB.bX.F) {
                    ArrayList arrayListJ = lVarB.bZ.j();
                    str = str + "\n-- Required Mods: --\n";
                    int i = 0;
                    Iterator it = arrayListJ.iterator();
                    while (true) {
                        if (!it.hasNext()) {
                            break;
                        }
                        com.corrodinggames.rts.gameFramework.i.b bVar = (com.corrodinggames.rts.gameFramework.i.b) it.next();
                        if (i > 2 && i < arrayListJ.size() - 1) {
                            str = str + VariableScope.nullOrMissingString + (arrayListJ.size() - i) + " more mods...";
                            break;
                        }
                        i++;
                        String strB = bVar.b();
                        strB.replace("\"", "'");
                        strB.replace(";", ".");
                        str = str + " mod: \"" + strB + "\"\n";
                    }
                }
            }
        }
        return str;
    }

    public String au() {
        if (!this.o) {
            return null;
        }
        ArrayList arrayListJ = com.corrodinggames.rts.gameFramework.l.B().bZ.j();
        String str = VariableScope.nullOrMissingString;
        int i = 0;
        Iterator it = arrayListJ.iterator();
        while (true) {
            if (!it.hasNext()) {
                break;
            }
            com.corrodinggames.rts.gameFramework.i.b bVar = (com.corrodinggames.rts.gameFramework.i.b) it.next();
            if (i != 0) {
                str = str + "; ";
            }
            if (i > 1 && i < arrayListJ.size() - 1) {
                str = str + VariableScope.nullOrMissingString + (arrayListJ.size() - i) + " more...";
                break;
            }
            i++;
            String strB = bVar.b();
            strB.replace(";", ".");
            str = str + strB;
        }
        return str;
    }

    public String av() {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (lVarB.bX.ay.b == null || lVarB.bX.ay.f562a == null) {
            return null;
        }
        if (lVarB.bX.ay.f562a == ai.skirmishMap) {
            return "maps/skirmish/" + lVarB.bX.ay.b;
        }
        if (lVarB.bX.ay.f562a == ai.customMap) {
            return "/SD/rusted_warfare_maps/" + lVarB.bX.ay.b;
        }
        com.corrodinggames.rts.gameFramework.l.e("getNetworkMapPath: unhandled type:" + lVarB.bX.ay.f562a);
        return null;
    }

    public boolean aw() {
        return this.C || this.H;
    }

    public void a(String str, c cVar) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        com.corrodinggames.rts.gameFramework.l.e("sendCommandError: " + str);
        if (cVar == null) {
            b((c) null, -1, (String) null, str);
        } else {
            a(null, null, null, str, cVar);
        }
    }

    public boolean b(c cVar, com.corrodinggames.rts.game.n nVar, String str, String str2) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        String str3;
        int i;
        com.corrodinggames.rts.game.n nVarK;
        String lowerCase = null;
        String strTrim = VariableScope.nullOrMissingString;
        String[] strArrSplit = new String[0];
        String strTrim2 = str2.trim();
        boolean z = false;
        if (strTrim2.startsWith("-qc ")) {
            strTrim2 = strTrim2.substring("-qc ".length()).trim();
            z = true;
        }
        if ((strTrim2.startsWith("-") || strTrim2.startsWith(".") || strTrim2.startsWith("_")) && strTrim2.length() >= 2) {
            String strTrim3 = strTrim2.substring(1).trim();
            int iIndexOf = strTrim3.indexOf(" ");
            if (iIndexOf == -1) {
                iIndexOf = strTrim3.length();
            }
            lowerCase = strTrim3.substring(0, iIndexOf).toLowerCase(Locale.ENGLISH);
            if (iIndexOf != -1 && strTrim3.length() >= iIndexOf + 1) {
                strTrim = strTrim3.substring(iIndexOf + 1).trim();
                strArrSplit = strTrim.split(" ");
            }
        }
        if (lowerCase == null) {
            return false;
        }
        if (z && !"self_move".equals(lowerCase) && !"self_team".equals(lowerCase)) {
            return false;
        }
        if ("pause".equals(lowerCase) || "unpause".equals(lowerCase)) {
            if (nVar == null) {
                a("[Could not find player]", cVar);
                return true;
            }
            if ((!this.C || nVar != this.z) && !this.d.b(cVar)) {
                a("[Only the host can change pause state]", cVar);
                return true;
            }
            if (!this.aW) {
                a("[Game not yet started]", cVar);
                return true;
            }
            boolean z2 = !this.al;
            if ("unpause".equals(lowerCase)) {
                z2 = false;
            }
            e(z2);
            return true;
        }
        if ("endgame".equals(lowerCase)) {
            if (nVar == null) {
                a("[Could not find player]", cVar);
                return true;
            }
            if (!this.C || nVar != this.z) {
                a("[Only the host can end game]", cVar);
                return true;
            }
            if (!this.aW) {
                a("[Game not yet started]", cVar);
                return true;
            }
            ag();
            return true;
        }
        if ("teamlock".equals(lowerCase)) {
            if (nVar == null) {
                a("[Could not find player]", cVar);
                return true;
            }
            if ((!this.C || nVar != this.z) && !this.d.b(cVar)) {
                a("[Only the host can change teamlock]", cVar);
                return true;
            }
            if ("true".equalsIgnoreCase(strTrim) || "on".equalsIgnoreCase(strTrim)) {
                this.ay.m = true;
                a("[teams are locked]", cVar);
                return true;
            }
            if ("false".equalsIgnoreCase(strTrim) || "off".equalsIgnoreCase(strTrim)) {
                this.ay.m = false;
                a("[teams are unlocked]", cVar);
                return true;
            }
            a("[Expected true or false]", cVar);
            return true;
        }
        if ("roomlock".equals(lowerCase)) {
            if (nVar == null) {
                a("[Could not find player]", cVar);
                return true;
            }
            if (!this.C || nVar != this.z) {
                a("[Only the host can change roomlock]", cVar);
                return true;
            }
            if ("true".equalsIgnoreCase(strTrim) || "on".equalsIgnoreCase(strTrim)) {
                this.ay.p = true;
                a("[room is locked]", cVar);
                return true;
            }
            if ("false".equalsIgnoreCase(strTrim) || "off".equalsIgnoreCase(strTrim)) {
                this.ay.p = false;
                a("[room is unlocked]", cVar);
                return true;
            }
            a("[Expected true or false]", cVar);
            return true;
        }
        if ("share".equals(lowerCase)) {
            if (nVar == null) {
                a("[Could not find player]", cVar);
                return true;
            }
            if (!this.ay.l) {
                a("[Shared control is not enabled in this game]", cVar);
                return true;
            }
            if ("true".equalsIgnoreCase(strTrim) || "on".equalsIgnoreCase(strTrim)) {
                if (!nVar.I) {
                    nVar.I = true;
                    j("[shared control now on for " + str + "]");
                    return true;
                }
                j("[shared control already on for " + str + "]");
                return true;
            }
            if ("false".equalsIgnoreCase(strTrim) || "off".equalsIgnoreCase(strTrim)) {
                if (nVar.I) {
                    nVar.I = false;
                    j("[shared control now off for " + str + "]");
                    return true;
                }
                j("[shared control already off for " + str + "]");
                return true;
            }
            a("[Expected true or false]", cVar);
            return true;
        }
        if ("self_move".equals(lowerCase)) {
            if (nVar == null) {
                a("[Cannot Move - Player not found]", cVar);
                return true;
            }
            if (this.aW) {
                a("[Cannot Move '" + nVar.v + "' - Game has been started]", cVar);
                return true;
            }
            if (o()) {
                a("[Cannot Move '" + nVar.v + "' - Game is starting]", cVar);
                return true;
            }
            if (this.ay.m) {
                a("[Cannot Move '" + nVar.v + "' - Teams locked]", cVar);
                return true;
            }
            if (strArrSplit.length > 0) {
                try {
                    int iIntValue = Integer.valueOf(strArrSplit[0]).intValue();
                    Integer numValueOf = null;
                    if (strArrSplit.length > 1) {
                        try {
                            numValueOf = Integer.valueOf(strArrSplit[1]);
                            if (numValueOf.intValue() != -1 && (numValueOf.intValue() < 1 || numValueOf.intValue() > 99)) {
                                a("[Cannot Move Team - Ally group - Out of range]", cVar);
                                return true;
                            }
                        } catch (NumberFormatException e) {
                            a("[Cannot Move '" + nVar.v + "' - ally group '" + strArrSplit[1] + "' is not a number]", cVar);
                            return true;
                        }
                    }
                    boolean z3 = false;
                    if (iIntValue - 1 == -3) {
                        if (!this.ay.o) {
                            a("[Spectators are disabled on this server]", cVar);
                            return true;
                        }
                        synchronized (this.bC) {
                            iIntValue = com.corrodinggames.rts.game.n.H();
                            if (iIntValue != -1) {
                                a(nVar, -3);
                            }
                        }
                        z3 = true;
                    }
                    int i2 = nVar.r;
                    boolean z4 = i2 == -3;
                    if (!z3) {
                        if (iIntValue < 1 || iIntValue > com.corrodinggames.rts.game.n.c) {
                            a("[Cannot Move '" + nVar.v + "' - target slotId must between 1-" + com.corrodinggames.rts.game.n.c + "]", cVar);
                            return true;
                        }
                        synchronized (this.bC) {
                            if (this.z != nVar && (nVarK = com.corrodinggames.rts.game.n.k(iIntValue - 1)) != null && !nVarK.w && !nVarK.b()) {
                                a("[Cannot move '" + nVar.v + "' to slot: " + iIntValue + " - Player: " + nVarK.v + " is in that slot.]", cVar);
                                return true;
                            }
                            a(nVar, iIntValue - 1);
                        }
                    }
                    nVar.r = i2;
                    if (numValueOf != null) {
                        if (numValueOf.intValue() == -1) {
                            nVar.r = nVar.k % 2;
                        } else {
                            nVar.r = numValueOf.intValue();
                        }
                    }
                    if (this.ay.n) {
                        nVar.r = nVar.k % 2;
                    }
                    if (z3) {
                        nVar.r = -3;
                    }
                    if (z3) {
                        if (!z4) {
                            j("Player '" + nVar.v + "' is now a spectator");
                        }
                    } else {
                        j("Player '" + nVar.v + "' moved themselves to: " + iIntValue);
                    }
                    P();
                    com.corrodinggames.rts.appFramework.n.o();
                    return true;
                } catch (NumberFormatException e2) {
                    a("[Cannot Move '" + nVar.v + "' - team '" + strArrSplit[0] + "' is not a number]", cVar);
                    return true;
                }
            }
            a("[Cannot Move '" + nVar.v + "' - No target]", cVar);
            return true;
        }
        if ("self_team".equals(lowerCase)) {
            if (nVar == null) {
                a("[Cannot Set Team - Player not found]", cVar);
                return true;
            }
            if (this.aW) {
                a("[" + nVar.v + ": Cannot Set Team - Game has been started]", cVar);
                return true;
            }
            if (o()) {
                a("[" + nVar.v + ": Cannot Set Team - Game is starting]", cVar);
                return true;
            }
            if (this.ay.m) {
                a("[" + nVar.v + ": Cannot Set Team - Teams locked]", cVar);
                return true;
            }
            if (this.ay.n) {
                return true;
            }
            try {
                int iIntValue2 = Integer.valueOf(strTrim).intValue();
                if (iIntValue2 == -1) {
                    i = nVar.k % 2;
                } else {
                    if (iIntValue2 < 1 || iIntValue2 > 99) {
                        a("[Cannot Set Team - Out of range]", cVar);
                        return true;
                    }
                    i = iIntValue2 - 1;
                }
                if (nVar.r != i) {
                    nVar.r = i;
                    a("Player '" + nVar.v + "' team changed to: " + iIntValue2, cVar);
                }
                P();
                com.corrodinggames.rts.appFramework.n.o();
                return true;
            } catch (NumberFormatException e3) {
                m("'" + strTrim + "' is not a number");
                return true;
            }
        }
        if ("surrender".equals(lowerCase)) {
            if (!this.aW) {
                a("[Cannot Surrender - Game has not started]", cVar);
                return true;
            }
            if (nVar == null) {
                a("[Could not find player]", cVar);
                return true;
            }
            if (!nVar.k()) {
                nVar.l();
                boolean zM = nVar.m();
                com.corrodinggames.rts.gameFramework.l.e(str + ": Is voting to surrender (can surrender:" + zM + ", afk:" + nVar.ab + ", defeated:" + nVar.G + ", disconnected:" + nVar.B() + ")");
                if (zM) {
                    str3 = VariableScope.nullOrMissingString;
                } else {
                    str3 = "(Cannot vote) ";
                }
            } else {
                com.corrodinggames.rts.gameFramework.l.e(str + ": Is already voting to surrender but updating timestamp");
                nVar.l();
                str3 = "(Already voted) ";
            }
            a(cVar, nVar, str, "-t " + str3 + "[Votes to surrender " + (com.corrodinggames.rts.game.n.b(nVar.r) + "/" + com.corrodinggames.rts.game.n.c(nVar.r)) + "]");
            return true;
        }
        return false;
    }

    public static void a(final ae aeVar) {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        if (lVarB.bX != null) {
            lVarB.bX.d.a(aeVar);
        }
        if (com.corrodinggames.rts.gameFramework.l.aU) {
            return;
        }
        com.corrodinggames.rts.appFramework.c.a(new Runnable() { // from class: com.corrodinggames.rts.gameFramework.j.ad.7
            @Override // java.lang.Runnable
            public void run() {
                com.corrodinggames.rts.appFramework.n.a(aeVar);
            }
        });
    }

    public ArrayList ax() {
        ArrayList arrayListC;
        synchronized (this.bC) {
            arrayListC = com.corrodinggames.rts.game.n.c();
        }
        return arrayListC;
    }

    public void e(boolean z) {
        this.al = z;
        if (this.al) {
            j("Game Paused");
        } else {
            j("Game unpaused");
        }
    }

    public void b(c cVar, String str) throws IOException {
        cVar.a(false, false, str);
    }

    public void c(c cVar, String str) {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar2 = (c) it.next();
            if (cVar2.j == cVar) {
                b(cVar2, str);
            }
        }
    }

    public c a(c cVar, int i, String str, String str2) throws IllegalAccessException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
        com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
        c cVar2 = new c(this, new h(cVar, i));
        cVar2.k = i;
        cVar2.j = cVar;
        cVar2.m = str;
        cVar2.n = str2;
        try {
            cVar2.d();
            lVarB.bX.aM.add(cVar2);
            lVarB.bX.Q();
            return cVar2;
        } catch (IOException e) {
            e.printStackTrace();
            cVar2.a("crash");
            return null;
        }
    }

    public c a(c cVar, int i) {
        Iterator it = this.aM.iterator();
        while (it.hasNext()) {
            c cVar2 = (c) it.next();
            if (cVar2.k == i && cVar2.j == cVar) {
                return cVar2;
            }
        }
        return null;
    }

    public static String p(String str) {
        String str2;
        String strReplace = str.trim().replace("\n", ".").replace("\r", ".").replace("\t", ".").replace("", ".").replace(" ", "_");
        while (true) {
            str2 = strReplace;
            if (!str2.startsWith(".") && !str2.startsWith("-") && !str2.startsWith(" ")) {
                break;
            }
            strReplace = str2.substring(1);
        }
        StringBuilder sb = new StringBuilder();
        for (char c2 : str2.toCharArray()) {
            if (!Character.isISOControl(c2)) {
                sb.append(c2);
            }
        }
        return sb.toString();
    }

    public void a(ArrayList arrayList, final boolean z) {
        if (this.bF != null) {
            com.corrodinggames.rts.gameFramework.l.e("startJoinServerInternalThread: Already joining");
        } else if (arrayList.size() == 0) {
            com.corrodinggames.rts.gameFramework.l.e("startJoinServerInternalThread: no servers");
        } else {
            this.bF = a((String) arrayList.get(0), false, new Runnable() { // from class: com.corrodinggames.rts.gameFramework.j.ad.8
                @Override // java.lang.Runnable
                public void run() throws IllegalAccessException, InterruptedException, InstantiationException, ClassNotFoundException, IllegalArgumentException, InvocationTargetException {
                    com.corrodinggames.rts.gameFramework.l lVarB = com.corrodinggames.rts.gameFramework.l.B();
                    com.corrodinggames.rts.gameFramework.l.e("startJoinServerInternalThread callback");
                    an anVar = ad.this.bF;
                    ad.this.bF = null;
                    if (anVar == null) {
                        com.corrodinggames.rts.gameFramework.l.e("startJoinServerInternalThread callback gameConnector==null");
                        return;
                    }
                    if (anVar.e != null) {
                        com.corrodinggames.rts.gameFramework.l.e("startJoinServerInternalThread failed to connect: " + anVar.e);
                        if (z) {
                            lVarB.bX.b("Reconnect failed: " + anVar.e);
                            ad.this.b("Reconnect failed", "reconnect failed");
                            lVarB.d("Reconnect failed", "Reconnect failed: " + anVar.e);
                            lVarB.i("Reconnect failed: " + anVar.e);
                            return;
                        }
                        return;
                    }
                    try {
                        lVarB.bX.b("starting new");
                        lVarB.bX.a(anVar.g);
                    } catch (IOException e) {
                        lVarB.c(e.getMessage(), "Connection failed");
                        e.printStackTrace();
                    }
                }
            });
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/x.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/x.class */
public enum x {
    wrongPassword,
    unknown
}


================================================================================
// FILE_PATH: ./gameFramework/j/a.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import android.text.Html;
import android.text.Spanned;
import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;
import java.util.Iterator;
import java.util.concurrent.ConcurrentLinkedQueue;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/a.class */
public class a {

    /* renamed from: a, reason: collision with root package name */
    private ConcurrentLinkedQueue f549a = new ConcurrentLinkedQueue();

    public String a(String str) {
        return com.corrodinggames.rts.gameFramework.f.i(str);
    }

    public void a(int i, String str, String str2, c cVar) {
        this.f549a.add(new b(this, i, str, str2.trim(), cVar));
        if (this.f549a.size() > 45) {
            this.f549a.poll();
        }
    }

    public int a(c cVar, int i) {
        if (cVar == null) {
            return 0;
        }
        int i2 = cVar.c;
        int i3 = 0;
        Iterator it = this.f549a.iterator();
        while (it.hasNext()) {
            b bVar = (b) it.next();
            if (bVar.d == i2 && com.corrodinggames.rts.gameFramework.f.a(bVar.e, System.nanoTime()) < i && !bVar.c.startsWith("-i ") && !bVar.c.startsWith("-qc ")) {
                i3++;
                if (bVar.c != null) {
                    if (com.corrodinggames.rts.gameFramework.f.a(bVar.c, '\n') >= 3) {
                        i3 += 2;
                    }
                    if (com.corrodinggames.rts.gameFramework.f.a(bVar.c, '\n') >= 6) {
                        i3 += 2;
                    }
                    if (com.corrodinggames.rts.gameFramework.f.a(bVar.c, '\n') >= 9) {
                        i3 += 2;
                    }
                }
            }
        }
        return i3;
    }

    public String a() {
        String str = VariableScope.nullOrMissingString;
        Iterator it = this.f549a.iterator();
        while (it.hasNext()) {
            str = str + ((b) it.next()).a() + "\n";
        }
        return str;
    }

    public ConcurrentLinkedQueue b() {
        return this.f549a;
    }

    public String a(boolean z) {
        String str = VariableScope.nullOrMissingString;
        if (!z) {
            Iterator it = this.f549a.iterator();
            while (it.hasNext()) {
                str = str + ((b) it.next()).b() + "<br/>\n";
            }
        } else {
            Iterator it2 = this.f549a.iterator();
            while (it2.hasNext()) {
                str = ((b) it2.next()).b() + "<br/>\n" + str;
            }
        }
        return "<pre>" + str + "</pre>";
    }

    public Spanned b(boolean z) {
        return Html.fromHtml(a(z));
    }

    public void c() {
        this.f549a.clear();
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/ah.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import com.corrodinggames.rts.game.units.custom.logicBooleans.VariableScope;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/ah.class */
public class ah implements Cloneable {
    public boolean l;
    public int q;

    /* renamed from: a, reason: collision with root package name */
    public ai f562a = ai.skirmishMap;
    public String b = "[z;p10]Crossing Large (10p).tmx";
    public int c = 0;
    public int d = 2;
    public boolean e = true;
    public int f = 1;
    public int g = 1;
    public float h = 1.0f;
    public boolean i = false;
    public boolean j = false;
    public boolean k = false;
    public boolean m = false;
    public boolean n = false;
    public boolean o = true;
    public boolean p = false;

    public void a() {
        this.f562a = ai.skirmishMap;
        this.b = "[z;p10]Crossing Large (10p).tmx";
    }

    public String b() {
        return ((((((((((VariableScope.nullOrMissingString + "startingCredits: " + this.c + "\n") + "fogMode: " + this.d + "\n") + "revealedMap: " + this.e + "\n") + "aiDifficulty: " + this.f + "\n") + "startingUnits: " + this.g + "\n") + "incomeMultiplier: " + this.h + "\n") + "noNukes: " + this.i + "\n") + "sharedControl: " + this.l + "\n") + "allowSpectators: " + this.o + "\n") + "lockedRoom: " + this.p + "\n") + "randomSeed: " + this.q + "\n";
    }

    /* renamed from: c, reason: merged with bridge method [inline-methods] */
    public ah clone() {
        try {
            return (ah) super.clone();
        } catch (CloneNotSupportedException e) {
            throw new RuntimeException(e);
        }
    }

    public void a(as asVar) {
        asVar.c(4);
        asVar.a(this.d);
        asVar.a(this.c);
        asVar.a(this.e);
        asVar.a(this.f);
        asVar.a(this.g);
        asVar.a(this.h);
        asVar.a(this.i);
        asVar.a(this.j);
        asVar.a(this.l);
        asVar.a(this.m);
        asVar.a(this.n);
        asVar.a(this.o);
        asVar.a(this.p);
        asVar.a(this.q);
    }

    public void a(k kVar) {
        byte bD = kVar.d();
        this.d = kVar.f();
        this.c = kVar.f();
        this.e = kVar.e();
        this.f = kVar.f();
        this.g = kVar.f();
        this.h = kVar.g();
        this.i = kVar.e();
        this.j = kVar.e();
        this.l = kVar.e();
        if (bD >= 1) {
            this.m = kVar.e();
        }
        if (bD >= 2) {
            this.n = kVar.e();
        }
        if (bD >= 3) {
            this.o = kVar.e();
            this.p = kVar.e();
        }
        if (bD >= 4) {
            this.q = kVar.f();
        }
    }
}


================================================================================
// FILE_PATH: ./gameFramework/j/t.java
================================================================================

package com.corrodinggames.rts.gameFramework.j;

import java.io.BufferedReader;

/* loaded from: game-lib.jar:com/corrodinggames/rts/gameFramework/j/t.class */
public class t {

    /* renamed from: a, reason: collision with root package name */
    public BufferedReader f597a;
    public boolean b;
    public boolean c;
}
